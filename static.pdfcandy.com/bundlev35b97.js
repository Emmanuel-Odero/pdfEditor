var candyLib=function(t){function e(e){for(var r,o,i=e[0],s=e[1],a=0,u=[];a<i.length;a++)o=i[a],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(c&&c(e);u.length;)u.shift()()}var r={},n={0:0};function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var i=new Promise((function(e,o){r=n[t]=[e,o]}));e.push(r[2]=i);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(t){return o.p+""+t+".bundle.js"}(t);var c=new Error;s=function(e){a.onerror=a.onload=null,clearTimeout(u);var r=n[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,r[1](c)}n[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(e)},o.m=t,o.c=r,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t};var i=this.webpackJsonpcandyLib=this.webpackJsonpcandyLib||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var a=0;a<i.length;a++)e(i[a]);var c=s;return o(o.s=489)}([function(t,e,r){var n=r(3),o=r(9),i=r(16),s=r(13),a=r(19),c=function(t,e,r){var u,p,l,f,d=t&c.F,h=t&c.G,v=t&c.S,y=t&c.P,g=t&c.B,m=h?n:v?n[e]||(n[e]={}):(n[e]||{}).prototype,b=h?o:o[e]||(o[e]={}),w=b.prototype||(b.prototype={});for(u in h&&(r=e),r)l=((p=!d&&m&&void 0!==m[u])?m:r)[u],f=g&&p?a(l,n):y&&"function"==typeof l?a(Function.call,l):l,m&&s(m,u,l,t&c.U),b[u]!=l&&i(b,u,f),y&&w[u]!=l&&(w[u]=l)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},,,function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(60)("wks"),o=r(35),i=r(3).Symbol,s="function"==typeof i;(t.exports=function(t){return n[t]||(n[t]=s&&i[t]||(s?i:o)("Symbol."+t))}).store=n},function(t,e,r){var n=r(21),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e){var r=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(t,e,r){t.exports=!r(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(5),o=r(113),i=r(30),s=Object.defineProperty;e.f=r(10)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(26);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(3),o=r(16),i=r(15),s=r(35)("src"),a=r(179),c=(""+a).split("toString");r(9).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,r,a){var u="function"==typeof r;u&&(i(r,"name")||o(r,"name",e)),t[e]!==r&&(u&&(i(r,s)||o(r,s,t[e]?""+t[e]:c.join(String(e)))),t===n?t[e]=r:a?t[e]?t[e]=r:o(t,e,r):(delete t[e],o(t,e,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(t,e,r){var n=r(0),o=r(4),i=r(26),s=/"/g,a=function(t,e,r,n){var o=String(i(t)),a="<"+e;return""!==r&&(a+=" "+r+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+o+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(a),n(n.P+n.F*o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",r)}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(11),o=r(34);t.exports=r(10)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(52),o=r(26);t.exports=function(t){return n(o(t))}},function(t,e,r){var n=r(4);t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,r){var n=r(20);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(53),o=r(34),i=r(17),s=r(30),a=r(15),c=r(113),u=Object.getOwnPropertyDescriptor;e.f=r(10)?u:function(t,e){if(t=i(t),e=s(e,!0),c)try{return u(t,e)}catch(t){}if(a(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(0),o=r(9),i=r(4);t.exports=function(t,e){var r=(o.Object||{})[t]||Object[t],s={};s[t]=e(r),n(n.S+n.F*i((function(){r(1)})),"Object",s)}},function(t,e,r){var n=r(19),o=r(52),i=r(12),s=r(8),a=r(129);t.exports=function(t,e){var r=1==t,c=2==t,u=3==t,p=4==t,l=6==t,f=5==t||l,d=e||a;return function(e,a,h){for(var v,y,g=i(e),m=o(g),b=n(a,h,3),w=s(m.length),_=0,S=r?d(e,w):c?d(e,0):void 0;w>_;_++)if((f||_ in m)&&(y=b(v=m[_],_,g),t))if(r)S[_]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return _;case 2:S.push(v)}else if(p)return!1;return l?-1:u||p?p:S}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){if(r(10)){var n=r(36),o=r(3),i=r(4),s=r(0),a=r(71),c=r(101),u=r(19),p=r(50),l=r(34),f=r(16),d=r(51),h=r(21),v=r(8),y=r(140),g=r(38),m=r(30),b=r(15),w=r(54),_=r(6),S=r(12),P=r(93),x=r(39),C=r(41),O=r(40).f,I=r(95),E=r(35),k=r(7),T=r(24),j=r(61),D=r(55),M=r(97),A=r(48),F=r(64),L=r(49),R=r(96),V=r(131),B=r(11),N=r(22),$=B.f,z=N.f,U=o.RangeError,H=o.TypeError,G=o.Uint8Array,J=Array.prototype,W=c.ArrayBuffer,q=c.DataView,Z=T(0),K=T(2),Q=T(3),Y=T(4),X=T(5),tt=T(6),et=j(!0),rt=j(!1),nt=M.values,ot=M.keys,it=M.entries,st=J.lastIndexOf,at=J.reduce,ct=J.reduceRight,ut=J.join,pt=J.sort,lt=J.slice,ft=J.toString,dt=J.toLocaleString,ht=k("iterator"),vt=k("toStringTag"),yt=E("typed_constructor"),gt=E("def_constructor"),mt=a.CONSTR,bt=a.TYPED,wt=a.VIEW,_t=T(1,(function(t,e){return Ot(D(t,t[gt]),e)})),St=i((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),Pt=!!G&&!!G.prototype.set&&i((function(){new G(1).set({})})),xt=function(t,e){var r=h(t);if(r<0||r%e)throw U("Wrong offset!");return r},Ct=function(t){if(_(t)&&bt in t)return t;throw H(t+" is not a typed array!")},Ot=function(t,e){if(!_(t)||!(yt in t))throw H("It is not a typed array constructor!");return new t(e)},It=function(t,e){return Et(D(t,t[gt]),e)},Et=function(t,e){for(var r=0,n=e.length,o=Ot(t,n);n>r;)o[r]=e[r++];return o},kt=function(t,e,r){$(t,e,{get:function(){return this._d[r]}})},Tt=function(t){var e,r,n,o,i,s,a=S(t),c=arguments.length,p=c>1?arguments[1]:void 0,l=void 0!==p,f=I(a);if(null!=f&&!P(f)){for(s=f.call(a),n=[],e=0;!(i=s.next()).done;e++)n.push(i.value);a=n}for(l&&c>2&&(p=u(p,arguments[2],2)),e=0,r=v(a.length),o=Ot(this,r);r>e;e++)o[e]=l?p(a[e],e):a[e];return o},jt=function(){for(var t=0,e=arguments.length,r=Ot(this,e);e>t;)r[t]=arguments[t++];return r},Dt=!!G&&i((function(){dt.call(new G(1))})),Mt=function(){return dt.apply(Dt?lt.call(Ct(this)):Ct(this),arguments)},At={copyWithin:function(t,e){return V.call(Ct(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Y(Ct(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return R.apply(Ct(this),arguments)},filter:function(t){return It(this,K(Ct(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return X(Ct(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Ct(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return rt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(Ct(this),arguments)},lastIndexOf:function(t){return st.apply(Ct(this),arguments)},map:function(t){return _t(Ct(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(Ct(this),arguments)},reduceRight:function(t){return ct.apply(Ct(this),arguments)},reverse:function(){for(var t,e=Ct(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return Q(Ct(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Ct(this),t)},subarray:function(t,e){var r=Ct(this),n=r.length,o=g(t,n);return new(D(r,r[gt]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,v((void 0===e?n:g(e,n))-o))}},Ft=function(t,e){return It(this,lt.call(Ct(this),t,e))},Lt=function(t){Ct(this);var e=xt(arguments[1],1),r=this.length,n=S(t),o=v(n.length),i=0;if(o+e>r)throw U("Wrong length!");for(;i<o;)this[e+i]=n[i++]},Rt={entries:function(){return it.call(Ct(this))},keys:function(){return ot.call(Ct(this))},values:function(){return nt.call(Ct(this))}},Vt=function(t,e){return _(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Bt=function(t,e){return Vt(t,e=m(e,!0))?l(2,t[e]):z(t,e)},Nt=function(t,e,r){return!(Vt(t,e=m(e,!0))&&_(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?$(t,e,r):(t[e]=r.value,t)};mt||(N.f=Bt,B.f=Nt),s(s.S+s.F*!mt,"Object",{getOwnPropertyDescriptor:Bt,defineProperty:Nt}),i((function(){ft.call({})}))&&(ft=dt=function(){return ut.call(this)});var $t=d({},At);d($t,Rt),f($t,ht,Rt.values),d($t,{slice:Ft,set:Lt,constructor:function(){},toString:ft,toLocaleString:Mt}),kt($t,"buffer","b"),kt($t,"byteOffset","o"),kt($t,"byteLength","l"),kt($t,"length","e"),$($t,vt,{get:function(){return this[bt]}}),t.exports=function(t,e,r,c){var u=t+((c=!!c)?"Clamped":"")+"Array",l="get"+t,d="set"+t,h=o[u],g=h||{},m=h&&C(h),b=!h||!a.ABV,S={},P=h&&h.prototype,I=function(t,r){$(t,r,{get:function(){return function(t,r){var n=t._d;return n.v[l](r*e+n.o,St)}(this,r)},set:function(t){return function(t,r,n){var o=t._d;c&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),o.v[d](r*e+o.o,n,St)}(this,r,t)},enumerable:!0})};b?(h=r((function(t,r,n,o){p(t,h,u,"_d");var i,s,a,c,l=0,d=0;if(_(r)){if(!(r instanceof W||"ArrayBuffer"==(c=w(r))||"SharedArrayBuffer"==c))return bt in r?Et(h,r):Tt.call(h,r);i=r,d=xt(n,e);var g=r.byteLength;if(void 0===o){if(g%e)throw U("Wrong length!");if((s=g-d)<0)throw U("Wrong length!")}else if((s=v(o)*e)+d>g)throw U("Wrong length!");a=s/e}else a=y(r),i=new W(s=a*e);for(f(t,"_d",{b:i,o:d,l:s,e:a,v:new q(i)});l<a;)I(t,l++)})),P=h.prototype=x($t),f(P,"constructor",h)):i((function(){h(1)}))&&i((function(){new h(-1)}))&&F((function(t){new h,new h(null),new h(1.5),new h(t)}),!0)||(h=r((function(t,r,n,o){var i;return p(t,h,u),_(r)?r instanceof W||"ArrayBuffer"==(i=w(r))||"SharedArrayBuffer"==i?void 0!==o?new g(r,xt(n,e),o):void 0!==n?new g(r,xt(n,e)):new g(r):bt in r?Et(h,r):Tt.call(h,r):new g(y(r))})),Z(m!==Function.prototype?O(g).concat(O(m)):O(g),(function(t){t in h||f(h,t,g[t])})),h.prototype=P,n||(P.constructor=h));var E=P[ht],k=!!E&&("values"==E.name||null==E.name),T=Rt.values;f(h,yt,!0),f(P,bt,u),f(P,wt,!0),f(P,gt,h),(c?new h(1)[vt]==u:vt in P)||$(P,vt,{get:function(){return u}}),S[u]=h,s(s.G+s.W+s.F*(h!=g),S),s(s.S,u,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*i((function(){g.of.call(h,1)})),u,{from:Tt,of:jt}),"BYTES_PER_ELEMENT"in P||f(P,"BYTES_PER_ELEMENT",e),s(s.P,u,At),L(u),s(s.P+s.F*Pt,u,{set:Lt}),s(s.P+s.F*!k,u,Rt),n||P.toString==ft||(P.toString=ft),s(s.P+s.F*i((function(){new h(1).slice()})),u,{slice:Ft}),s(s.P+s.F*(i((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!i((function(){P.toLocaleString.call([1,2])}))),u,{toLocaleString:Mt}),A[u]=k?E:T,n||k||f(P,ht,T)}}else t.exports=function(){}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,r){var n=r(6);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(35)("meta"),o=r(6),i=r(15),s=r(11).f,a=0,c=Object.isExtensible||function(){return!0},u=!r(4)((function(){return c(Object.preventExtensions({}))})),p=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!c(t))return"F";if(!e)return"E";p(t)}return t[n].i},getWeak:function(t,e){if(!i(t,n)){if(!c(t))return!0;if(!e)return!1;p(t)}return t[n].w},onFreeze:function(t){return u&&l.NEED&&c(t)&&!i(t,n)&&p(t),t}}},function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,r(44))},function(t,e,r){var n=r(28);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports=!1},function(t,e,r){var n=r(115),o=r(80);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(21),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):i(t,e)}},function(t,e,r){var n=r(5),o=r(116),i=r(80),s=r(79)("IE_PROTO"),a=function(){},c=function(){var t,e=r(77)("iframe"),n=i.length;for(e.style.display="none",r(81).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;n--;)delete c.prototype[i[n]];return c()};t.exports=Object.create||function(t,e){var r;return null!==t?(a.prototype=n(t),r=new a,a.prototype=null,r[s]=t):r=c(),void 0===e?r:o(r,e)}},function(t,e,r){var n=r(115),o=r(80).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,r){var n=r(15),o=r(12),i=r(79)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,r){var n=r(7)("unscopables"),o=Array.prototype;null==o[n]&&r(16)(o,n,{}),t.exports=function(t){o[n][t]=!0}},function(t,e,r){var n=r(6);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(32),o=r(155).f,i=r(407),s=r(29),a=r(408),c=r(159),u=r(58),p=function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,l,f,d,h,v,y,g,m=t.target,b=t.global,w=t.stat,_=t.proto,S=b?n:w?n[m]:(n[m]||{}).prototype,P=b?s:s[m]||(s[m]={}),x=P.prototype;for(f in e)r=!i(b?f:m+(w?".":"#")+f,t.forced)&&S&&u(S,f),h=P[f],r&&(v=t.noTargetGet?(g=o(S,f))&&g.value:S[f]),d=r&&v?v:e[f],r&&typeof h==typeof d||(y=t.bind&&r?a(d,n):t.wrap&&r?p(d):_&&"function"==typeof d?a(Function.call,d):d,(t.sham||d&&d.sham||h&&h.sham)&&c(y,"sham",!0),P[f]=y,_&&(u(s,l=m+"Prototype")||c(s,l,{}),s[l][f]=d,t.real&&x&&!x[f]&&c(x,f,d)))}},function(t,e,r){var n=r(11).f,o=r(15),i=r(7)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(0),o=r(26),i=r(4),s=r(83),a="["+s+"]",c=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),p=function(t,e,r){var o={},a=i((function(){return!!s[t]()||"​"!="​"[t]()})),c=o[t]=a?e(l):s[t];r&&(o[r]=c),n(n.P+n.F*a,"String",o)},l=p.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},function(t,e){t.exports={}},function(t,e,r){var n=r(3),o=r(11),i=r(10),s=r(7)("species");t.exports=function(t){var e=n[t];i&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(13);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},function(t,e,r){var n=r(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(25),o=r(7)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:i?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,r){var n=r(5),o=r(20),i=r(7)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||null==(r=n(s)[i])?e:o(r)}},function(t,e,r){var n=r(406),o=r(156);t.exports=function(t){return n(o(t))}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=r(400),o=r(420),i=r(169),s=r(427),a=r(437),c=r(442),u=r(448),p=r(452);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=l(n),d=l(o),h=l(i),v=l(s),y=l(a),g=l(c),m=l(u),b=l(p).default.File,w=b;try{void 0!==b&&new b([],"")}catch(t){w=function(t,e,r){var n=new Blob(t,r||{});return n.name=e,n.lastModified=r&&r.lastModified||m.default(),n.lastModifiedDate=new Date(n.lastModified),g.default(n,y.default(this)),n};var _=v.default(b.prototype);h.default(_,"size",d.default(Blob.prototype,"size")),h.default(_,"type",d.default(Blob.prototype,"type")),_.slice=f.default(Blob.prototype)||Blob.prototype.mozSlice||Blob.prototype.webkitSlice,_.constructor=w,w.prototype=_}var S=w;e.default=S},function(t,e,r){var n=r(9),o=r(3),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(36)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(17),o=r(8),i=r(38);t.exports=function(t){return function(e,r,s){var a,c=n(e),u=o(c.length),p=i(s,u);if(t&&r!=r){for(;u>p;)if((a=c[p++])!=a)return!0}else for(;u>p;p++)if((t||p in c)&&c[p]===r)return t||p||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(25);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(7)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:r=!0}},i[n]=function(){return s},t(i)}catch(t){}return r}},function(t,e,r){var n=r(5);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){var n=r(54),o=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var i=r.call(t,e);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,r){r(133);var n=r(13),o=r(16),i=r(4),s=r(26),a=r(7),c=r(98),u=a("species"),p=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var f=a(t),d=!i((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),h=d?!i((function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[u]=function(){return r}),r[f](""),!e})):void 0;if(!d||!h||"replace"===t&&!p||"split"===t&&!l){var v=/./[f],y=r(s,f,""[t],(function(t,e,r,n,o){return e.exec===c?d&&!o?{done:!0,value:v.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}})),g=y[0],m=y[1];n(String.prototype,t,g),o(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},function(t,e,r){var n=r(19),o=r(128),i=r(93),s=r(5),a=r(8),c=r(95),u={},p={};(e=t.exports=function(t,e,r,l,f){var d,h,v,y,g=f?function(){return t}:c(t),m=n(r,l,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(i(g)){for(d=a(t.length);d>b;b++)if((y=e?m(s(h=t[b])[0],h[1]):m(t[b]))===u||y===p)return y}else for(v=g.call(t);!(h=v.next()).done;)if((y=o(v,m,h.value,e))===u||y===p)return y}).BREAK=u,e.RETURN=p},function(t,e,r){var n=r(3).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){var n=r(3),o=r(0),i=r(13),s=r(51),a=r(31),c=r(68),u=r(50),p=r(6),l=r(4),f=r(64),d=r(46),h=r(84);t.exports=function(t,e,r,v,y,g){var m=n[t],b=m,w=y?"set":"add",_=b&&b.prototype,S={},P=function(t){var e=_[t];i(_,t,"delete"==t||"has"==t?function(t){return!(g&&!p(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!p(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof b&&(g||_.forEach&&!l((function(){(new b).entries().next()})))){var x=new b,C=x[w](g?{}:-0,1)!=x,O=l((function(){x.has(1)})),I=f((function(t){new b(t)})),E=!g&&l((function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)}));I||((b=e((function(e,r){u(e,b,t);var n=h(new m,e,b);return null!=r&&c(r,y,n[w],n),n}))).prototype=_,_.constructor=b),(O||E)&&(P("delete"),P("has"),y&&P("get")),(E||C)&&P(w),g&&_.clear&&delete _.clear}else b=v.getConstructor(e,t,y,w),s(b.prototype,r),a.NEED=!0;return d(b,t),S[t]=b,o(o.G+o.W+o.F*(b!=m),S),g||v.setStrong(b,t,y),b}},function(t,e,r){for(var n,o=r(3),i=r(16),s=r(35),a=s("typed_array"),c=s("view"),u=!(!o.ArrayBuffer||!o.DataView),p=u,l=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(n=o[f[l++]])?(i(n.prototype,a,!0),i(n.prototype,c,!0)):p=!1;t.exports={ABV:u,CONSTR:p,TYPED:a,VIEW:c}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorGenerator=void 0;var n=r(147),o=r(382);!function(t){function e(t){if("string"==typeof t)return t;var e=t.constructor.name;return t.constructor.__MODULE&&(e=t.constructor.__MODULE+"."+e),"std."+e}t.get_class_name=e,t.empty=function(t,r){return new o.OutOfRange("Error on "+e(t)+"."+r+"(): it's empty container.")},t.negative_index=function(t,r,n){return new o.OutOfRange("Error on "+e(t)+"."+r+"(): parametric index is negative -> (index = "+n+").")},t.excessive_index=function(t,r,n,i){return new o.OutOfRange("Error on "+e(t)+"."+r+"(): parametric index is equal or greater than size -> (index = "+n+", size: "+i+").")},t.not_my_iterator=function(t,r){return new n.InvalidArgument("Error on "+e(t)+"."+r+"(): parametric iterator is not this container's own.")},t.erased_iterator=function(t,r){return new n.InvalidArgument("Error on "+e(t)+"."+r+"(): parametric iterator, it already has been erased.")},t.negative_iterator=function(t,r,n){return new o.OutOfRange("Error on "+e(t)+"."+r+"(): parametric iterator is directing negative position -> (index = "+n+").")},t.iterator_end_value=function(t,r){void 0===r&&(r="end");var n=e(t);return new o.OutOfRange("Error on "+n+".Iterator.value: cannot access to the "+n+"."+r+"().value.")},t.key_nout_found=function(t,r,n){throw new o.OutOfRange("Error on "+e(t)+"."+r+"(): unable to find the matched key -> "+n)}}(e.ErrorGenerator||(e.ErrorGenerator={}))},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.type=t,e&&Object.assign(this,e)};e.Event=n},function(t,e,r){var n=r(33),o=r(157),i=r(75),s=r(112),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(i(t),e=s(e,!0),i(r),o)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(57);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t){t.exports=JSON.parse('{"a":"3.6.230"}')},function(t,e,r){var n=r(6),o=r(3).document,i=n(o)&&n(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,r){e.f=r(7)},function(t,e,r){var n=r(60)("keys"),o=r(35);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(3).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(6),o=r(5),i=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(19)(Function.call,r(22).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return i(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:i}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,r){var n=r(6),o=r(82).set;t.exports=function(t,e,r){var i,s=e.constructor;return s!==r&&"function"==typeof s&&(i=s.prototype)!==r.prototype&&n(i)&&o&&o(t,i),t}},function(t,e,r){var n=r(21),o=r(26);t.exports=function(t){var e=String(o(this)),r="",i=n(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(r+=e);return r}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e,r){var n=r(21),o=r(26);t.exports=function(t){return function(e,r){var i,s,a=String(o(e)),c=n(r),u=a.length;return c<0||c>=u?t?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):i:t?a.slice(c,c+2):s-56320+(i-55296<<10)+65536}}},function(t,e,r){var n=r(36),o=r(0),i=r(13),s=r(16),a=r(48),c=r(127),u=r(46),p=r(41),l=r(7)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,r,h,v,y,g){c(r,e,h);var m,b,w,_=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=e+" Iterator",P="values"==v,x=!1,C=t.prototype,O=C[l]||C["@@iterator"]||v&&C[v],I=O||_(v),E=v?P?_("entries"):I:void 0,k="Array"==e&&C.entries||O;if(k&&(w=p(k.call(new t)))!==Object.prototype&&w.next&&(u(w,S,!0),n||"function"==typeof w[l]||s(w,l,d)),P&&O&&"values"!==O.name&&(x=!0,I=function(){return O.call(this)}),n&&!g||!f&&!x&&C[l]||s(C,l,I),a[e]=I,a[S]=d,v)if(m={values:P?I:_("values"),keys:y?I:_("keys"),entries:E},g)for(b in m)b in C||i(C,b,m[b]);else o(o.P+o.F*(f||x),e,m);return m}},function(t,e,r){var n=r(91),o=r(26);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},function(t,e,r){var n=r(6),o=r(25),i=r(7)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,r){var n=r(7)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){var n=r(48),o=r(7)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||i[o]===t)}},function(t,e,r){var n=r(11),o=r(34);t.exports=function(t,e,r){e in t?n.f(t,e,o(0,r)):t[e]=r}},function(t,e,r){var n=r(54),o=r(7)("iterator"),i=r(48);t.exports=r(9).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[n(t)]}},function(t,e,r){var n=r(12),o=r(38),i=r(8);t.exports=function(t){for(var e=n(this),r=i(e.length),s=arguments.length,a=o(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,u=void 0===c?r:o(c,r);u>a;)e[a++]=t;return e}},function(t,e,r){var n=r(42),o=r(132),i=r(48),s=r(17);t.exports=r(89)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n,o,i=r(65),s=RegExp.prototype.exec,a=String.prototype.replace,c=s,u=(n=/a/,o=/b*/g,s.call(n,"a"),s.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),p=void 0!==/()??/.exec("")[1];(u||p)&&(c=function(t){var e,r,n,o,c=this;return p&&(r=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(e=c.lastIndex),n=s.call(c,t),u&&n&&(c.lastIndex=c.global?n.index+n[0].length:e),p&&n&&n.length>1&&a.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),t.exports=c},function(t,e,r){var n=r(88)(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n,o,i,s=r(19),a=r(121),c=r(81),u=r(77),p=r(3),l=p.process,f=p.setImmediate,d=p.clearImmediate,h=p.MessageChannel,v=p.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};f&&d||(f=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},n(y),y},d=function(t){delete g[t]},"process"==r(25)(l)?n=function(t){l.nextTick(s(m,t,1))}:v&&v.now?n=function(t){v.now(s(m,t,1))}:h?(i=(o=new h).port2,o.port1.onmessage=b,n=s(i.postMessage,i,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(n=function(t){p.postMessage(t+"","*")},p.addEventListener("message",b,!1)):n="onreadystatechange"in u("script")?function(t){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,r){var n=r(3),o=r(10),i=r(36),s=r(71),a=r(16),c=r(51),u=r(4),p=r(50),l=r(21),f=r(8),d=r(140),h=r(40).f,v=r(11).f,y=r(96),g=r(46),m=n.ArrayBuffer,b=n.DataView,w=n.Math,_=n.RangeError,S=n.Infinity,P=m,x=w.abs,C=w.pow,O=w.floor,I=w.log,E=w.LN2,k=o?"_b":"buffer",T=o?"_l":"byteLength",j=o?"_o":"byteOffset";function D(t,e,r){var n,o,i,s=new Array(r),a=8*r-e-1,c=(1<<a)-1,u=c>>1,p=23===e?C(2,-24)-C(2,-77):0,l=0,f=t<0||0===t&&1/t<0?1:0;for((t=x(t))!=t||t===S?(o=t!=t?1:0,n=c):(n=O(I(t)/E),t*(i=C(2,-n))<1&&(n--,i*=2),(t+=n+u>=1?p/i:p*C(2,1-u))*i>=2&&(n++,i/=2),n+u>=c?(o=0,n=c):n+u>=1?(o=(t*i-1)*C(2,e),n+=u):(o=t*C(2,u-1)*C(2,e),n=0));e>=8;s[l++]=255&o,o/=256,e-=8);for(n=n<<e|o,a+=e;a>0;s[l++]=255&n,n/=256,a-=8);return s[--l]|=128*f,s}function M(t,e,r){var n,o=8*r-e-1,i=(1<<o)-1,s=i>>1,a=o-7,c=r-1,u=t[c--],p=127&u;for(u>>=7;a>0;p=256*p+t[c],c--,a-=8);for(n=p&(1<<-a)-1,p>>=-a,a+=e;a>0;n=256*n+t[c],c--,a-=8);if(0===p)p=1-s;else{if(p===i)return n?NaN:u?-S:S;n+=C(2,e),p-=s}return(u?-1:1)*n*C(2,p-e)}function A(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function F(t){return[255&t]}function L(t){return[255&t,t>>8&255]}function R(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function V(t){return D(t,52,8)}function B(t){return D(t,23,4)}function N(t,e,r){v(t.prototype,e,{get:function(){return this[r]}})}function $(t,e,r,n){var o=d(+r);if(o+e>t[T])throw _("Wrong index!");var i=t[k]._b,s=o+t[j],a=i.slice(s,s+e);return n?a:a.reverse()}function z(t,e,r,n,o,i){var s=d(+r);if(s+e>t[T])throw _("Wrong index!");for(var a=t[k]._b,c=s+t[j],u=n(+o),p=0;p<e;p++)a[c+p]=u[i?p:e-p-1]}if(s.ABV){if(!u((function(){m(1)}))||!u((function(){new m(-1)}))||u((function(){return new m,new m(1.5),new m(NaN),"ArrayBuffer"!=m.name}))){for(var U,H=(m=function(t){return p(this,m),new P(d(t))}).prototype=P.prototype,G=h(P),J=0;G.length>J;)(U=G[J++])in m||a(m,U,P[U]);i||(H.constructor=m)}var W=new b(new m(2)),q=b.prototype.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||c(b.prototype,{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else m=function(t){p(this,m,"ArrayBuffer");var e=d(t);this._b=y.call(new Array(e),0),this[T]=e},b=function(t,e,r){p(this,b,"DataView"),p(t,m,"DataView");var n=t[T],o=l(e);if(o<0||o>n)throw _("Wrong offset!");if(o+(r=void 0===r?n-o:f(r))>n)throw _("Wrong length!");this[k]=t,this[j]=o,this[T]=r},o&&(N(m,"byteLength","_l"),N(b,"buffer","_b"),N(b,"byteLength","_l"),N(b,"byteOffset","_o")),c(b.prototype,{getInt8:function(t){return $(this,1,t)[0]<<24>>24},getUint8:function(t){return $(this,1,t)[0]},getInt16:function(t){var e=$(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=$(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return A($(this,4,t,arguments[1]))},getUint32:function(t){return A($(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return M($(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return M($(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){z(this,1,t,F,e)},setUint8:function(t,e){z(this,1,t,F,e)},setInt16:function(t,e){z(this,2,t,L,e,arguments[2])},setUint16:function(t,e){z(this,2,t,L,e,arguments[2])},setInt32:function(t,e){z(this,4,t,R,e,arguments[2])},setUint32:function(t,e){z(this,4,t,R,e,arguments[2])},setFloat32:function(t,e){z(this,4,t,B,e,arguments[2])},setFloat64:function(t,e){z(this,8,t,V,e,arguments[2])}});g(m,"ArrayBuffer"),g(b,"DataView"),a(b.prototype,s.VIEW,!0),e.ArrayBuffer=m,e.DataView=b},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){t.exports=!r(145)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var o=r(380),i=function(){function t(){}return t.prototype.empty=function(){return 0===this.size()},t.prototype.rbegin=function(){return this.end().reverse()},t.prototype.rend=function(){return this.begin().reverse()},t.prototype[Symbol.iterator]=function(){return new o.ForOfAdaptor(this.begin(),this.end())},t.prototype.toJSON=function(){var t,e,r=[];try{for(var o=n(this),i=o.next();!i.done;i=o.next()){var s=i.value;r.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},t}();e.Container=i},function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.NativeArrayIterator=void 0;var o=function(){function t(t,e){this.data_=t,this.index_=e}return t.prototype.index=function(){return this.index_},Object.defineProperty(t.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return--this.index_,this},t.prototype.next=function(){return++this.index_,this},t.prototype.advance=function(t){return this.index_+=t,this},t.prototype.equals=function(t){return this.data_===t.data_&&this.index_===t.index_},t.prototype.swap=function(t){var e,r;e=n([t.data_,this.data_],2),this.data_=e[0],t.data_=e[1],r=n([t.index_,this.index_],2),this.index_=r[0],t.index_=r[1]},t}();e.NativeArrayIterator=o},function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.hash=void 0;var o=r(150);function i(t,e){return e^=t?1:0,e*=u}function s(t,e){return a(t.toString(),e)}function a(t,e){for(var r=0;r<t.length;++r)e^=t.charCodeAt(r),e*=u;return Math.abs(e)}e.hash=function(){for(var t,e,r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];var l=c;try{for(var f=n(r),d=f.next();!d.done;d=f.next()){var h=d.value,v=typeof(h=h?h.valueOf():h);if("boolean"===v)l=i(h,l);else if("number"===v||"bigint"===v)l=s(h,l);else if("string"===v)l=a(h,l);else if(h instanceof Object&&h.hashCode instanceof Function){var y=h.hashCode();if(1===r.length)return y;l^=y,l*=u}else l=s(o.get_uid(h),l)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}return Math.abs(l)};var c=2166136261,u=16777619},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.greater_equal=e.greater=e.less_equal=e.less=e.not_equal_to=e.equal_to=void 0;var n=r(150);function o(t,e){return t=t?t.valueOf():t,e=e?e.valueOf():e,t instanceof Object&&t.equals instanceof Function?t.equals(e):t===e}function i(t,e){return t=t.valueOf(),e=e.valueOf(),t instanceof Object?t.less instanceof Function?t.less(e):n.get_uid(t)<n.get_uid(e):t<e}function s(t,e){return i(t,e)||o(t,e)}e.equal_to=o,e.not_equal_to=function(t,e){return!o(t,e)},e.less=i,e.less_equal=s,e.greater=function(t,e){return!s(t,e)},e.greater_equal=function(t,e){return!i(t,e)}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ListIterator=void 0;var n=r(72),o=function(){function t(t,e,r){this.prev_=t,this.next_=e,this.value_=r}return t._Set_prev=function(t,e){t.prev_=e},t._Set_next=function(t,e){t.next_=e},t.prototype.prev=function(){return this.prev_},t.prototype.next=function(){return this.next_},Object.defineProperty(t.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),t.prototype._Try_value=function(){if(void 0===this.value_&&!0===this.equals(this.source().end()))throw n.ErrorGenerator.iterator_end_value(this.source())},t.prototype.equals=function(t){return this===t},t}();e.ListIterator=o},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(57);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){t.exports=!r(10)&&!r(4)((function(){return 7!=Object.defineProperty(r(77)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(3),o=r(9),i=r(36),s=r(78),a=r(11).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,r){var n=r(15),o=r(17),i=r(61)(!1),s=r(79)("IE_PROTO");t.exports=function(t,e){var r,a=o(t),c=0,u=[];for(r in a)r!=s&&n(a,r)&&u.push(r);for(;e.length>c;)n(a,r=e[c++])&&(~i(u,r)||u.push(r));return u}},function(t,e,r){var n=r(11),o=r(5),i=r(37);t.exports=r(10)?Object.defineProperties:function(t,e){o(t);for(var r,s=i(e),a=s.length,c=0;a>c;)n.f(t,r=s[c++],e[r]);return t}},function(t,e,r){var n=r(17),o=r(40).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(n(t))}},function(t,e,r){var n=r(10),o=r(37),i=r(62),s=r(53),a=r(12),c=r(52),u=Object.assign;t.exports=!u||r(4)((function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n}))?function(t,e){for(var r=a(t),u=arguments.length,p=1,l=i.f,f=s.f;u>p;)for(var d,h=c(arguments[p++]),v=l?o(h).concat(l(h)):o(h),y=v.length,g=0;y>g;)d=v[g++],n&&!f.call(h,d)||(r[d]=h[d]);return r}:u},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){var n=r(20),o=r(6),i=r(121),s=[].slice,a={},c=function(t,e,r){if(!(e in a)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,r)};t.exports=Function.bind||function(t){var e=n(this),r=s.call(arguments,1),a=function(){var n=r.concat(s.call(arguments));return this instanceof a?c(e,n.length,n):i(e,n,t)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(3).parseInt,o=r(47).trim,i=r(83),s=/^[-+]?0[xX]/;t.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(t,e){var r=o(String(t),3);return n(r,e>>>0||(s.test(r)?16:10))}:n},function(t,e,r){var n=r(3).parseFloat,o=r(47).trim;t.exports=1/n(r(83)+"-0")!=-1/0?function(t){var e=o(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},function(t,e,r){var n=r(25);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,r){var n=r(6),o=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&o(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){var n=r(39),o=r(34),i=r(46),s={};r(16)(s,r(7)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n(s,{next:o(1,r)}),i(t,e+" Iterator")}},function(t,e,r){var n=r(5);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&n(i.call(t)),e}}},function(t,e,r){var n=r(269);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){var n=r(20),o=r(12),i=r(52),s=r(8);t.exports=function(t,e,r,a,c){n(e);var u=o(t),p=i(u),l=s(u.length),f=c?l-1:0,d=c?-1:1;if(r<2)for(;;){if(f in p){a=p[f],f+=d;break}if(f+=d,c?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:l>f;f+=d)f in p&&(a=e(a,p[f],f,u));return a}},function(t,e,r){var n=r(12),o=r(38),i=r(8);t.exports=[].copyWithin||function(t,e){var r=n(this),s=i(r.length),a=o(t,s),c=o(e,s),u=arguments.length>2?arguments[2]:void 0,p=Math.min((void 0===u?s:o(u,s))-c,s-a),l=1;for(c<a&&a<c+p&&(l=-1,c+=p-1,a+=p-1);p-- >0;)c in r?r[a]=r[c]:delete r[a],a+=l,c+=l;return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(98);r(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(65)})},function(t,e,r){var n,o,i,s,a=r(36),c=r(3),u=r(19),p=r(54),l=r(0),f=r(6),d=r(20),h=r(50),v=r(68),y=r(55),g=r(100).set,m=r(289)(),b=r(136),w=r(290),_=r(69),S=r(137),P=c.TypeError,x=c.process,C=x&&x.versions,O=C&&C.v8||"",I=c.Promise,E="process"==p(x),k=function(){},T=o=b.f,j=!!function(){try{var t=I.resolve(1),e=(t.constructor={})[r(7)("species")]=function(t){t(k,k)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==O.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),D=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var r=t._c;m((function(){for(var n=t._v,o=1==t._s,i=0,s=function(e){var r,i,s,a=o?e.ok:e.fail,c=e.resolve,u=e.reject,p=e.domain;try{a?(o||(2==t._h&&L(t),t._h=1),!0===a?r=n:(p&&p.enter(),r=a(n),p&&(p.exit(),s=!0)),r===e.promise?u(P("Promise-chain cycle")):(i=D(r))?i.call(r,c,u):c(r)):u(n)}catch(t){p&&!s&&p.exit(),u(t)}};r.length>i;)s(r[i++]);t._c=[],t._n=!1,e&&!t._h&&A(t)}))}},A=function(t){g.call(c,(function(){var e,r,n,o=t._v,i=F(t);if(i&&(e=w((function(){E?x.emit("unhandledRejection",o,t):(r=c.onunhandledrejection)?r({promise:t,reason:o}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",o)})),t._h=E||F(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){g.call(c,(function(){var e;E?x.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},R=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},V=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw P("Promise can't be resolved itself");(e=D(t))?m((function(){var n={_w:r,_d:!1};try{e.call(t,u(V,n,1),u(R,n,1))}catch(t){R.call(n,t)}})):(r._v=t,r._s=1,M(r,!1))}catch(t){R.call({_w:r,_d:!1},t)}}};j||(I=function(t){h(this,I,"Promise","_h"),d(t),n.call(this);try{t(u(V,this,1),u(R,this,1))}catch(t){R.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(51)(I.prototype,{then:function(t,e){var r=T(y(this,I));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=E?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&M(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new n;this.promise=t,this.resolve=u(V,t,1),this.reject=u(R,t,1)},b.f=T=function(t){return t===I||t===s?new i(t):o(t)}),l(l.G+l.W+l.F*!j,{Promise:I}),r(46)(I,"Promise"),r(49)("Promise"),s=r(9).Promise,l(l.S+l.F*!j,"Promise",{reject:function(t){var e=T(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!j),"Promise",{resolve:function(t){return S(a&&this===s?I:this,t)}}),l(l.S+l.F*!(j&&r(64)((function(t){I.all(t).catch(k)}))),"Promise",{all:function(t){var e=this,r=T(e),n=r.resolve,o=r.reject,i=w((function(){var r=[],i=0,s=1;v(t,!1,(function(t){var a=i++,c=!1;r.push(void 0),s++,e.resolve(t).then((function(t){c||(c=!0,r[a]=t,--s||n(r))}),o)})),--s||n(r)}));return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=T(e),n=r.reject,o=w((function(){v(t,!1,(function(t){e.resolve(t).then(r.resolve,n)}))}));return o.e&&n(o.v),r.promise}})},function(t,e,r){var n=r(20);function o(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new o(t)}},function(t,e,r){var n=r(5),o=r(6),i=r(136);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var n=r(11).f,o=r(39),i=r(51),s=r(19),a=r(50),c=r(68),u=r(89),p=r(132),l=r(49),f=r(10),d=r(31).fastKey,h=r(43),v=f?"_s":"size",y=function(t,e){var r,n=d(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,u){var p=t((function(t,n){a(t,p,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[v]=0,null!=n&&c(n,r,t[u],t)}));return i(p.prototype,{clear:function(){for(var t=h(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var r=h(this,e),n=y(r,t);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[v]--}return!!n},forEach:function(t){h(this,e);for(var r,n=s(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!y(h(this,e),t)}}),f&&n(p.prototype,"size",{get:function(){return h(this,e)[v]}}),p},def:function(t,e,r){var n,o,i=y(t,e);return i?i.v=r:(t._l=i={i:o=d(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=i),n&&(n.n=i),t[v]++,"F"!==o&&(t._i[o]=i)),t},getEntry:y,setStrong:function(t,e,r){u(t,e,(function(t,r){this._t=h(t,e),this._k=r,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?p(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,p(1))}),r?"entries":"values",!r,!0),l(e)}}},function(t,e,r){var n=r(51),o=r(31).getWeak,i=r(5),s=r(6),a=r(50),c=r(68),u=r(24),p=r(15),l=r(43),f=u(5),d=u(6),h=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return f(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var r=g(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,i){var u=t((function(t,n){a(t,u,e,"_i"),t._t=e,t._i=h++,t._l=void 0,null!=n&&c(n,r,t[i],t)}));return n(u.prototype,{delete:function(t){if(!s(t))return!1;var r=o(t);return!0===r?v(l(this,e)).delete(t):r&&p(r,this._i)&&delete r[this._i]},has:function(t){if(!s(t))return!1;var r=o(t);return!0===r?v(l(this,e)).has(t):r&&p(r,this._i)}}),u},def:function(t,e,r){var n=o(i(e),!0);return!0===n?v(t).set(e,r):n[t._i]=r,t},ufstore:v}},function(t,e,r){var n=r(21),o=r(8);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=o(e);if(e!==r)throw RangeError("Wrong length!");return r}},function(t,e,r){var n=r(40),o=r(62),i=r(5),s=r(3).Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(i(t)),r=o.f;return r?e.concat(r(t)):e}},function(t,e,r){var n=r(8),o=r(85),i=r(26);t.exports=function(t,e,r,s){var a=String(i(t)),c=a.length,u=void 0===r?" ":String(r),p=n(e);if(p<=c||""==u)return a;var l=p-c,f=o.call(u,Math.ceil(l/u.length));return f.length>l&&(f=f.slice(0,l)),s?f+a:a+f}},function(t,e,r){var n=r(10),o=r(37),i=r(17),s=r(53).f;t.exports=function(t){return function(e){for(var r,a=i(e),c=o(a),u=c.length,p=0,l=[];u>p;)r=c[p++],n&&!s.call(a,r)||l.push(t?[r,a[r]]:a[r]);return l}}},function(t,e){var r=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.is_node=void 0;var r=null;e.is_node=function(){return null===r&&(r="object"==typeof t&&"object"==typeof t.process&&"object"==typeof t.process.versions&&void 0!==t.process.versions.node),r}}).call(this,r(44))},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidArgument=void 0;var i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(r(148).LogicError);e.InvalidArgument=i},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.LogicError=void 0;var i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(r(381).Exception);e.LogicError=i},function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.IHashContainer=void 0;var i=r(383),s=r(107),a=r(108);!function(t){t.construct=function(t,e,r){for(var n=[],c=3;c<arguments.length;c++)n[c-3]=arguments[c];var u=null,p=s.hash,l=a.equal_to;if(1===n.length&&n[0]instanceof e){var f=n[0];p=f.hash_function(),l=f.key_eq(),u=function(){var e=f.begin(),r=f.end();t.assign(e,r)}}else{var d=i.IAssociativeContainer.construct.apply(i.IAssociativeContainer,o([t],n));u=d.ramda,d.tail.length>=1&&(p=d.tail[0]),d.tail.length>=2&&(l=d.tail[1])}r(p,l),null!==u&&u()}}(e.IHashContainer||(e.IHashContainer={}))},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.get_uid=void 0;var n=r(384);e.get_uid=function(t){if(t instanceof Object){if(!1===t.hasOwnProperty("__get_m_iUID")){var e=++n._Get_root().__s_iUID;Object.defineProperty(t,"__get_m_iUID",{value:function(){return e}})}return t.__get_m_iUID()}return void 0===t?-1:0}},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.ListContainer=void 0;var s=r(105),a=r(109),c=r(386),u=r(106),p=r(387),l=r(72),f=function(t){function e(){var e=t.call(this)||this;return e.end_=e._Create_iterator(null,null),e.clear(),e}return o(e,t),e.prototype.assign=function(t,e){this.clear(),this.insert(this.end(),t,e)},e.prototype.clear=function(){a.ListIterator._Set_prev(this.end_,this.end_),a.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},e.prototype.resize=function(t){var e=t-this.size();e>0?this.insert(this.end(),e,void 0):e<0&&this.erase(p.advance(this.end(),-e),this.end())},e.prototype.begin=function(){return this.begin_},e.prototype.end=function(){return this.end_},e.prototype.size=function(){return this.size_},e.prototype.push_front=function(t){this.insert(this.begin_,t)},e.prototype.push_back=function(t){this.insert(this.end_,t)},e.prototype.pop_front=function(){if(!0===this.empty())throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},e.prototype.pop_back=function(){if(!0===this.empty())throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this.size();var r=new u.NativeArrayIterator(t,0),n=new u.NativeArrayIterator(t,t.length);return this._Insert_by_range(this.end(),r,n),this.size()},e.prototype.insert=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===t.erased_)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return 1===e.length?this._Insert_by_repeating_val(t,1,e[0]):2===e.length&&"number"==typeof e[0]?this._Insert_by_repeating_val(t,e[0],e[1]):this._Insert_by_range(t,e[0],e[1])},e.prototype._Insert_by_repeating_val=function(t,e,r){var n=new c.Repeater(0,r),o=new c.Repeater(e);return this._Insert_by_range(t,n,o)},e.prototype._Insert_by_range=function(t,e,r){for(var n=t.prev(),o=null,i=0,s=e;!1===s.equals(r);s=s.next()){var c=this._Create_iterator(n,null,s.value);0===i&&(o=c),a.ListIterator._Set_next(n,c),n=c,++i}return!0===t.equals(this.begin())&&(this.begin_=o),a.ListIterator._Set_next(n,t),a.ListIterator._Set_prev(t,n),this.size_+=i,o},e.prototype.erase=function(t,e){return void 0===e&&(e=t.next()),this._Erase_by_range(t,e)},e.prototype._Erase_by_range=function(t,e){if(t.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===t.erased_)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(t.equals(this.end_))return this.end_;var r=t.prev();a.ListIterator._Set_next(r,e),a.ListIterator._Set_prev(e,r);for(var n=t;!n.equals(e);n=n.next())n.erased_=!0,--this.size_;return t.equals(this.begin_)&&(this.begin_=e),e},e.prototype.swap=function(t){var e,r,n;e=i([t.begin_,this.begin_],2),this.begin_=e[0],t.begin_=e[1],r=i([t.end_,this.end_],2),this.end_=r[0],t.end_=r[1],n=i([t.size_,this.size_],2),this.size_=n[0],t.size_=n[1]},e}(s.Container);e.ListContainer=f},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ReverseIterator=void 0;var n=function(){function t(t){this.base_=t.prev()}return t.prototype.source=function(){return this.base_.source()},t.prototype.base=function(){return this.base_.next()},Object.defineProperty(t.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return this._Create_neighbor(this.base().next())},t.prototype.next=function(){return this._Create_neighbor(this.base_)},t.prototype.equals=function(t){return this.base_.equals(t.base_)},t}();e.ReverseIterator=n},function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.HashBuckets=void 0;var o=function(){function t(){this.clear(),this.max_load_factor_=s}return t.prototype.clear=function(){this.buckets_=[],this.item_size_=0;for(var t=0;t<i;++t)this.buckets_.push([])},t.prototype.rehash=function(t){var e,r,o,s;t<i&&(t=i);var a=this.buckets_;this.buckets_=[];for(var c=0;c<t;++c)this.buckets_.push([]);try{for(var u=n(a),p=u.next();!p.done;p=u.next()){var l=p.value;try{for(var f=(o=void 0,n(l)),d=f.next();!d.done;d=f.next()){var h=d.value,v=this.hash_index(h);this.buckets_[v].push(h),++this.item_size_}}catch(t){o={error:t}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}},t.prototype.reserve=function(t){this.item_size_+=t,this.item_size_>this.capacity()&&this.rehash(Math.max(this.item_size_,2*this.capacity()))},t.prototype.size=function(){return this.buckets_.length},t.prototype.capacity=function(){return this.buckets_.length*this.max_load_factor_},t.prototype.at=function(t){return this.buckets_[t]},t.prototype.load_factor=function(){return this.item_size_/this.size()},t.prototype.max_load_factor=function(t){if(void 0===t&&(t=null),null===t)return this.max_load_factor_;this.max_load_factor_=t},t.prototype.insert=function(t){var e=this.capacity();++this.item_size_>e&&this.rehash(2*e);var r=this.hash_index(t);this.buckets_[r].push(t)},t.prototype.erase=function(t){for(var e=this.hash_index(t),r=this.buckets_[e],n=0;n<r.length;++n)if(r[n]===t){r.splice(n,1),--this.item_size_;break}},t}();e.HashBuckets=o;var i=10,s=1},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.make_pair=e.Pair=void 0;var n=r(107),o=r(108),i=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.equals=function(t){return o.equal_to(this.first,t.first)&&o.equal_to(this.second,t.second)},t.prototype.less=function(t){return!1===o.equal_to(this.first,t.first)?o.less(this.first,t.first):o.less(this.second,t.second)},t.prototype.hashCode=function(){return n.hash(this.first,this.second)},t}();e.Pair=i,e.make_pair=function(t,e){return new i(t,e)}},function(t,e,r){var n=r(33),o=r(405),i=r(110),s=r(56),a=r(112),c=r(58),u=r(157),p=Object.getOwnPropertyDescriptor;e.f=n?p:function(t,e){if(t=s(t),e=a(e,!0),u)try{return p(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var n=r(33),o=r(28),i=r(158);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(32),o=r(57),i=n.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},function(t,e,r){var n=r(33),o=r(74),i=r(110);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(161),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(161),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},function(t,e,r){var n=r(32),o=r(164),i=r(58),s=r(165),a=r(166),c=r(417),u=o("wks"),p=n.Symbol,l=c?p:p&&p.withoutSetter||s;t.exports=function(t){return i(u,t)&&(a||"string"==typeof u[t])||(a&&i(p,t)?u[t]=p[t]:u[t]=l("Symbol."+t)),u[t]}},function(t,e,r){var n=r(412),o=r(413);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.9.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+n).toString(36)}},function(t,e,r){var n=r(415),o=r(167),i=r(28);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!Symbol.sham&&(n?38===o:o>37&&o<41)}))},function(t,e,r){var n,o,i=r(32),s=r(416),a=i.process,c=a&&a.versions,u=c&&c.v8;u?o=(n=u.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=n[1]),t.exports=o&&+o},function(t,e,r){var n=r(29),o=r(32),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t])||i(o[t]):n[t]&&n[t][e]||o[t]&&o[t][e]}},function(t,e,r){t.exports=r(424)},function(t,e){t.exports={}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,r){var n=r(164),o=r(165),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e,r){var n=r(156);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(28);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,r){r(176);var n,o=(n=r(348))&&n.__esModule?n:{default:n};o.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),o.default._babelPolyfill=!0},function(t,e,r){r(177),r(320),r(322),r(325),r(327),r(329),r(331),r(333),r(335),r(337),r(339),r(341),r(343),r(347)},function(t,e,r){r(178),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(259),r(260),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(97),r(283),r(133),r(284),r(134),r(285),r(286),r(287),r(288),r(135),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),t.exports=r(9)},function(t,e,r){var n=r(3),o=r(15),i=r(10),s=r(0),a=r(13),c=r(31).KEY,u=r(4),p=r(60),l=r(46),f=r(35),d=r(7),h=r(78),v=r(114),y=r(180),g=r(63),m=r(5),b=r(6),w=r(12),_=r(17),S=r(30),P=r(34),x=r(39),C=r(117),O=r(22),I=r(62),E=r(11),k=r(37),T=O.f,j=E.f,D=C.f,M=n.Symbol,A=n.JSON,F=A&&A.stringify,L=d("_hidden"),R=d("toPrimitive"),V={}.propertyIsEnumerable,B=p("symbol-registry"),N=p("symbols"),$=p("op-symbols"),z=Object.prototype,U="function"==typeof M&&!!I.f,H=n.QObject,G=!H||!H.prototype||!H.prototype.findChild,J=i&&u((function(){return 7!=x(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=T(z,e);n&&delete z[e],j(t,e,r),n&&t!==z&&j(z,e,n)}:j,W=function(t){var e=N[t]=x(M.prototype);return e._k=t,e},q=U&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},Z=function(t,e,r){return t===z&&Z($,e,r),m(t),e=S(e,!0),m(r),o(N,e)?(r.enumerable?(o(t,L)&&t[L][e]&&(t[L][e]=!1),r=x(r,{enumerable:P(0,!1)})):(o(t,L)||j(t,L,P(1,{})),t[L][e]=!0),J(t,e,r)):j(t,e,r)},K=function(t,e){m(t);for(var r,n=y(e=_(e)),o=0,i=n.length;i>o;)Z(t,r=n[o++],e[r]);return t},Q=function(t){var e=V.call(this,t=S(t,!0));return!(this===z&&o(N,t)&&!o($,t))&&(!(e||!o(this,t)||!o(N,t)||o(this,L)&&this[L][t])||e)},Y=function(t,e){if(t=_(t),e=S(e,!0),t!==z||!o(N,e)||o($,e)){var r=T(t,e);return!r||!o(N,e)||o(t,L)&&t[L][e]||(r.enumerable=!0),r}},X=function(t){for(var e,r=D(_(t)),n=[],i=0;r.length>i;)o(N,e=r[i++])||e==L||e==c||n.push(e);return n},tt=function(t){for(var e,r=t===z,n=D(r?$:_(t)),i=[],s=0;n.length>s;)!o(N,e=n[s++])||r&&!o(z,e)||i.push(N[e]);return i};U||(a((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(r){this===z&&e.call($,r),o(this,L)&&o(this[L],t)&&(this[L][t]=!1),J(this,t,P(1,r))};return i&&G&&J(z,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",(function(){return this._k})),O.f=Y,E.f=Z,r(40).f=C.f=X,r(53).f=Q,I.f=tt,i&&!r(36)&&a(z,"propertyIsEnumerable",Q,!0),h.f=function(t){return W(d(t))}),s(s.G+s.W+s.F*!U,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)d(et[rt++]);for(var nt=k(d.store),ot=0;nt.length>ot;)v(nt[ot++]);s(s.S+s.F*!U,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=M(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!U,"Object",{create:function(t,e){return void 0===e?x(t):K(x(t),e)},defineProperty:Z,defineProperties:K,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:tt});var it=u((function(){I.f(1)}));s(s.S+s.F*it,"Object",{getOwnPropertySymbols:function(t){return I.f(w(t))}}),A&&s(s.S+s.F*(!U||u((function(){var t=M();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))}))),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(b(e)||void 0!==t)&&!q(t))return g(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!q(e))return e}),n[1]=e,F.apply(A,n)}}),M.prototype[R]||r(16)(M.prototype,R,M.prototype.valueOf),l(M,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(t,e,r){t.exports=r(60)("native-function-to-string",Function.toString)},function(t,e,r){var n=r(37),o=r(62),i=r(53);t.exports=function(t){var e=n(t),r=o.f;if(r)for(var s,a=r(t),c=i.f,u=0;a.length>u;)c.call(t,s=a[u++])&&e.push(s);return e}},function(t,e,r){var n=r(0);n(n.S,"Object",{create:r(39)})},function(t,e,r){var n=r(0);n(n.S+n.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,e,r){var n=r(0);n(n.S+n.F*!r(10),"Object",{defineProperties:r(116)})},function(t,e,r){var n=r(17),o=r(22).f;r(23)("getOwnPropertyDescriptor",(function(){return function(t,e){return o(n(t),e)}}))},function(t,e,r){var n=r(12),o=r(41);r(23)("getPrototypeOf",(function(){return function(t){return o(n(t))}}))},function(t,e,r){var n=r(12),o=r(37);r(23)("keys",(function(){return function(t){return o(n(t))}}))},function(t,e,r){r(23)("getOwnPropertyNames",(function(){return r(117).f}))},function(t,e,r){var n=r(6),o=r(31).onFreeze;r(23)("freeze",(function(t){return function(e){return t&&n(e)?t(o(e)):e}}))},function(t,e,r){var n=r(6),o=r(31).onFreeze;r(23)("seal",(function(t){return function(e){return t&&n(e)?t(o(e)):e}}))},function(t,e,r){var n=r(6),o=r(31).onFreeze;r(23)("preventExtensions",(function(t){return function(e){return t&&n(e)?t(o(e)):e}}))},function(t,e,r){var n=r(6);r(23)("isFrozen",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,r){var n=r(6);r(23)("isSealed",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,r){var n=r(6);r(23)("isExtensible",(function(t){return function(e){return!!n(e)&&(!t||t(e))}}))},function(t,e,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(118)})},function(t,e,r){var n=r(0);n(n.S,"Object",{is:r(119)})},function(t,e,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(82).set})},function(t,e,r){var n=r(54),o={};o[r(7)("toStringTag")]="z",o+""!="[object z]"&&r(13)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,r){var n=r(0);n(n.P,"Function",{bind:r(120)})},function(t,e,r){var n=r(11).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||r(10)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},function(t,e,r){var n=r(6),o=r(41),i=r(7)("hasInstance"),s=Function.prototype;i in s||r(11).f(s,i,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){var n=r(0),o=r(122);n(n.G+n.F*(parseInt!=o),{parseInt:o})},function(t,e,r){var n=r(0),o=r(123);n(n.G+n.F*(parseFloat!=o),{parseFloat:o})},function(t,e,r){var n=r(3),o=r(15),i=r(25),s=r(84),a=r(30),c=r(4),u=r(40).f,p=r(22).f,l=r(11).f,f=r(47).trim,d=n.Number,h=d,v=d.prototype,y="Number"==i(r(39)(v)),g="trim"in String.prototype,m=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var r,n,o,i=(e=g?e.trim():f(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var s,c=e.slice(2),u=0,p=c.length;u<p;u++)if((s=c.charCodeAt(u))<48||s>o)return NaN;return parseInt(c,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(y?c((function(){v.valueOf.call(r)})):"Number"!=i(r))?s(new h(m(e)),r,d):m(e)};for(var b,w=r(10)?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)o(h,b=w[_])&&!o(d,b)&&l(d,b,p(h,b));d.prototype=v,v.constructor=d,r(13)(n,"Number",d)}},function(t,e,r){var n=r(0),o=r(21),i=r(124),s=r(85),a=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!",l=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*u[r],u[r]=n%1e7,n=c(n/1e7)},f=function(t){for(var e=6,r=0;--e>=0;)r+=u[e],u[e]=c(r/t),r=r%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var r=String(u[t]);e=""===e?r:e+s.call("0",7-r.length)+r}return e},h=function(t,e,r){return 0===e?r:e%2==1?h(t,e-1,r*t):h(t*t,e/2,r)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,r,n,a,c=i(this,p),u=o(t),v="",y="0";if(u<0||u>20)throw RangeError(p);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(c*h(2,69,1))-69)<0?c*h(2,-e,1):c/h(2,e,1),r*=4503599627370496,(e=52-e)>0){for(l(0,r),n=u;n>=7;)l(1e7,0),n-=7;for(l(h(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),l(1,1),f(2),y=d()}else l(0,r),l(1<<-e,0),y=d()+s.call("0",u);return y=u>0?v+((a=y.length)<=u?"0."+s.call("0",u-a)+y:y.slice(0,a-u)+"."+y.slice(a-u)):v+y}})},function(t,e,r){var n=r(0),o=r(4),i=r(124),s=1..toPrecision;n(n.P+n.F*(o((function(){return"1"!==s.call(1,void 0)}))||!o((function(){s.call({})}))),"Number",{toPrecision:function(t){var e=i(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(0),o=r(3).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{isInteger:r(125)})},function(t,e,r){var n=r(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(0),o=r(125),i=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},function(t,e,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(0),o=r(123);n(n.S+n.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,r){var n=r(0),o=r(122);n(n.S+n.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,r){var n=r(0),o=r(126),i=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+i(t-1)*i(t+1))}})},function(t,e,r){var n=r(0),o=Math.asinh;n(n.S+n.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,r){var n=r(0),o=Math.atanh;n(n.S+n.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(0),o=r(86);n(n.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(0),o=Math.exp;n(n.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,r){var n=r(0),o=r(87);n(n.S+n.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,r){var n=r(0);n(n.S,"Math",{fround:r(223)})},function(t,e,r){var n=r(86),o=Math.pow,i=o(2,-52),s=o(2,-23),a=o(2,127)*(2-s),c=o(2,-126);t.exports=Math.fround||function(t){var e,r,o=Math.abs(t),u=n(t);return o<c?u*(o/c/s+1/i-1/i)*c*s:(r=(e=(1+s/i)*o)-(e-o))>a||r!=r?u*(1/0):u*r}},function(t,e,r){var n=r(0),o=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,i=0,s=0,a=arguments.length,c=0;s<a;)c<(r=o(arguments[s++]))?(i=i*(n=c/r)*n+1,c=r):i+=r>0?(n=r/c)*n:r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,e,r){var n=r(0),o=Math.imul;n(n.S+n.F*r(4)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(t,e){var r=+t,n=+e,o=65535&r,i=65535&n;return 0|o*i+((65535&r>>>16)*i+o*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log1p:r(126)})},function(t,e,r){var n=r(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(0);n(n.S,"Math",{sign:r(86)})},function(t,e,r){var n=r(0),o=r(87),i=Math.exp;n(n.S+n.F*r(4)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(0),o=r(87),i=Math.exp;n(n.S,"Math",{tanh:function(t){var e=o(t=+t),r=o(-t);return e==1/0?1:r==1/0?-1:(e-r)/(i(t)+i(-t))}})},function(t,e,r){var n=r(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(0),o=r(38),i=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?i(e):i(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(0),o=r(17),i=r(8);n(n.S,"String",{raw:function(t){for(var e=o(t.raw),r=i(e.length),n=arguments.length,s=[],a=0;r>a;)s.push(String(e[a++])),a<n&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,r){r(47)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,r){var n=r(88)(!0);r(89)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){var n=r(0),o=r(88)(!1);n(n.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,r){var n=r(0),o=r(8),i=r(90),s="".endsWith;n(n.P+n.F*r(92)("endsWith"),"String",{endsWith:function(t){var e=i(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=o(e.length),a=void 0===r?n:Math.min(o(r),n),c=String(t);return s?s.call(e,c,a):e.slice(a-c.length,a)===c}})},function(t,e,r){var n=r(0),o=r(90);n(n.P+n.F*r(92)("includes"),"String",{includes:function(t){return!!~o(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(0);n(n.P,"String",{repeat:r(85)})},function(t,e,r){var n=r(0),o=r(8),i=r(90),s="".startsWith;n(n.P+n.F*r(92)("startsWith"),"String",{startsWith:function(t){var e=i(this,t,"startsWith"),r=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){r(14)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,r){r(14)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,r){r(14)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,r){r(14)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,r){r(14)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,r){r(14)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,r){r(14)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,r){r(14)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,r){r(14)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,r){r(14)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,r){r(14)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,r){r(14)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,r){r(14)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,r){var n=r(0),o=r(12),i=r(30);n(n.P+n.F*r(4)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=o(this),r=i(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){var n=r(0),o=r(258);n(n.P+n.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,r){var n=r(4),o=Date.prototype.getTime,i=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-50000000000001))}))||!n((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(r>99?r:"0"+s(r))+"Z"}:i},function(t,e,r){var n=Date.prototype,o=n.toString,i=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(13)(n,"toString",(function(){var t=i.call(this);return t==t?o.call(this):"Invalid Date"}))},function(t,e,r){var n=r(7)("toPrimitive"),o=Date.prototype;n in o||r(16)(o,n,r(261))},function(t,e,r){var n=r(5),o=r(30);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(n(this),"number"!=t)}},function(t,e,r){var n=r(0);n(n.S,"Array",{isArray:r(63)})},function(t,e,r){var n=r(19),o=r(0),i=r(12),s=r(128),a=r(93),c=r(8),u=r(94),p=r(95);o(o.S+o.F*!r(64)((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,o,l,f=i(t),d="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,y=void 0!==v,g=0,m=p(f);if(y&&(v=n(v,h>2?arguments[2]:void 0,2)),null==m||d==Array&&a(m))for(r=new d(e=c(f.length));e>g;g++)u(r,g,y?v(f[g],g):f[g]);else for(l=m.call(f),r=new d;!(o=l.next()).done;g++)u(r,g,y?s(l,v,[o.value,g],!0):o.value);return r.length=g,r}})},function(t,e,r){var n=r(0),o=r(94);n(n.S+n.F*r(4)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)o(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){var n=r(0),o=r(17),i=[].join;n(n.P+n.F*(r(52)!=Object||!r(18)(i)),"Array",{join:function(t){return i.call(o(this),void 0===t?",":t)}})},function(t,e,r){var n=r(0),o=r(81),i=r(25),s=r(38),a=r(8),c=[].slice;n(n.P+n.F*r(4)((function(){o&&c.call(o)})),"Array",{slice:function(t,e){var r=a(this.length),n=i(this);if(e=void 0===e?r:e,"Array"==n)return c.call(this,t,e);for(var o=s(t,r),u=s(e,r),p=a(u-o),l=new Array(p),f=0;f<p;f++)l[f]="String"==n?this.charAt(o+f):this[o+f];return l}})},function(t,e,r){var n=r(0),o=r(20),i=r(12),s=r(4),a=[].sort,c=[1,2,3];n(n.P+n.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!r(18)(a)),"Array",{sort:function(t){return void 0===t?a.call(i(this)):a.call(i(this),o(t))}})},function(t,e,r){var n=r(0),o=r(24)(0),i=r(18)([].forEach,!0);n(n.P+n.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,r){var n=r(6),o=r(63),i=r(7)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){var n=r(0),o=r(24)(1);n(n.P+n.F*!r(18)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,r){var n=r(0),o=r(24)(2);n(n.P+n.F*!r(18)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,r){var n=r(0),o=r(24)(3);n(n.P+n.F*!r(18)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,r){var n=r(0),o=r(24)(4);n(n.P+n.F*!r(18)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,r){var n=r(0),o=r(130);n(n.P+n.F*!r(18)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,r){var n=r(0),o=r(130);n(n.P+n.F*!r(18)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,r){var n=r(0),o=r(61)(!1),i=[].indexOf,s=!!i&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!r(18)(i)),"Array",{indexOf:function(t){return s?i.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,r){var n=r(0),o=r(17),i=r(21),s=r(8),a=[].lastIndexOf,c=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(c||!r(18)(a)),"Array",{lastIndexOf:function(t){if(c)return a.apply(this,arguments)||0;var e=o(this),r=s(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,i(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,r){var n=r(0);n(n.P,"Array",{copyWithin:r(131)}),r(42)("copyWithin")},function(t,e,r){var n=r(0);n(n.P,"Array",{fill:r(96)}),r(42)("fill")},function(t,e,r){var n=r(0),o=r(24)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),n(n.P+n.F*i,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(42)("find")},function(t,e,r){var n=r(0),o=r(24)(6),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),n(n.P+n.F*s,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(42)(i)},function(t,e,r){r(49)("Array")},function(t,e,r){var n=r(3),o=r(84),i=r(11).f,s=r(40).f,a=r(91),c=r(65),u=n.RegExp,p=u,l=u.prototype,f=/a/g,d=/a/g,h=new u(f)!==f;if(r(10)&&(!h||r(4)((function(){return d[r(7)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")})))){u=function(t,e){var r=this instanceof u,n=a(t),i=void 0===e;return!r&&n&&t.constructor===u&&i?t:o(h?new p(n&&!i?t.source:t,e):p((n=t instanceof u)?t.source:t,n&&i?c.call(t):e),r?this:l,u)};for(var v=function(t){t in u||i(u,t,{configurable:!0,get:function(){return p[t]},set:function(e){p[t]=e}})},y=s(p),g=0;y.length>g;)v(y[g++]);l.constructor=u,u.prototype=l,r(13)(n,"RegExp",u)}r(49)("RegExp")},function(t,e,r){r(134);var n=r(5),o=r(65),i=r(10),s=/./.toString,a=function(t){r(13)(RegExp.prototype,"toString",t,!0)};r(4)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?a((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)})):"toString"!=s.name&&a((function(){return s.call(this)}))},function(t,e,r){var n=r(5),o=r(8),i=r(99),s=r(66);r(67)("match",1,(function(t,e,r,a){return[function(r){var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=a(r,t,this);if(e.done)return e.value;var c=n(t),u=String(this);if(!c.global)return s(c,u);var p=c.unicode;c.lastIndex=0;for(var l,f=[],d=0;null!==(l=s(c,u));){var h=String(l[0]);f[d]=h,""===h&&(c.lastIndex=i(u,o(c.lastIndex),p)),d++}return 0===d?null:f}]}))},function(t,e,r){var n=r(5),o=r(12),i=r(8),s=r(21),a=r(99),c=r(66),u=Math.max,p=Math.min,l=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;r(67)("replace",2,(function(t,e,r,h){return[function(n,o){var i=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,i,o):r.call(String(i),n,o)},function(t,e){var o=h(r,t,this,e);if(o.done)return o.value;var l=n(t),f=String(this),d="function"==typeof e;d||(e=String(e));var y=l.global;if(y){var g=l.unicode;l.lastIndex=0}for(var m=[];;){var b=c(l,f);if(null===b)break;if(m.push(b),!y)break;""===String(b[0])&&(l.lastIndex=a(f,i(l.lastIndex),g))}for(var w,_="",S=0,P=0;P<m.length;P++){b=m[P];for(var x=String(b[0]),C=u(p(s(b.index),f.length),0),O=[],I=1;I<b.length;I++)O.push(void 0===(w=b[I])?w:String(w));var E=b.groups;if(d){var k=[x].concat(O,C,f);void 0!==E&&k.push(E);var T=String(e.apply(void 0,k))}else T=v(x,f,C,O,E,e);C>=S&&(_+=f.slice(S,C)+T,S=C+x.length)}return _+f.slice(S)}];function v(t,e,n,i,s,a){var c=n+t.length,u=i.length,p=d;return void 0!==s&&(s=o(s),p=f),r.call(a,p,(function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":a=s[o.slice(1,-1)];break;default:var p=+o;if(0===p)return r;if(p>u){var f=l(p/10);return 0===f?r:f<=u?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):r}a=i[p-1]}return void 0===a?"":a}))}}))},function(t,e,r){var n=r(5),o=r(119),i=r(66);r(67)("search",1,(function(t,e,r,s){return[function(r){var n=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=s(r,t,this);if(e.done)return e.value;var a=n(t),c=String(this),u=a.lastIndex;o(u,0)||(a.lastIndex=0);var p=i(a,c);return o(a.lastIndex,u)||(a.lastIndex=u),null===p?-1:p.index}]}))},function(t,e,r){var n=r(91),o=r(5),i=r(55),s=r(99),a=r(8),c=r(66),u=r(98),p=r(4),l=Math.min,f=[].push,d="length",h=!p((function(){RegExp(4294967295,"y")}));r(67)("split",2,(function(t,e,r,p){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[d]||2!="ab".split(/(?:ab)*/)[d]||4!=".".split(/(.?)(.?)/)[d]||".".split(/()()/)[d]>1||"".split(/.?/)[d]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(o,t,e);for(var i,s,a,c=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,h=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,p+"g");(i=u.call(v,o))&&!((s=v.lastIndex)>l&&(c.push(o.slice(l,i.index)),i[d]>1&&i.index<o[d]&&f.apply(c,i.slice(1)),a=i[0][d],l=s,c[d]>=h));)v.lastIndex===i.index&&v.lastIndex++;return l===o[d]?!a&&v.test("")||c.push(""):c.push(o.slice(l)),c[d]>h?c.slice(0,h):c}:"0".split(void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,n){var o=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,o,n):v.call(String(o),r,n)},function(t,e){var n=p(v,t,this,e,v!==r);if(n.done)return n.value;var u=o(t),f=String(this),d=i(u,RegExp),y=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),m=new d(h?u:"^(?:"+u.source+")",g),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===f.length)return null===c(m,f)?[f]:[];for(var w=0,_=0,S=[];_<f.length;){m.lastIndex=h?_:0;var P,x=c(m,h?f:f.slice(_));if(null===x||(P=l(a(m.lastIndex+(h?0:_)),f.length))===w)_=s(f,_,y);else{if(S.push(f.slice(w,_)),S.length===b)return S;for(var C=1;C<=x.length-1;C++)if(S.push(x[C]),S.length===b)return S;_=w=P}}return S.push(f.slice(w)),S}]}))},function(t,e,r){var n=r(3),o=r(100).set,i=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,c="process"==r(25)(s);t.exports=function(){var t,e,r,u=function(){var n,o;for(c&&(n=s.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(c)r=function(){s.nextTick(u)};else if(!i||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var p=a.resolve(void 0);r=function(){p.then(u)}}else r=function(){o.call(n,u)};else{var l=!0,f=document.createTextNode("");new i(u).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(138),o=r(43);t.exports=r(70)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(o(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,r){var n=r(138),o=r(43);t.exports=r(70)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(o(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,r){var n,o=r(3),i=r(24)(0),s=r(13),a=r(31),c=r(118),u=r(139),p=r(6),l=r(43),f=r(43),d=!o.ActiveXObject&&"ActiveXObject"in o,h=a.getWeak,v=Object.isExtensible,y=u.ufstore,g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(p(t)){var e=h(t);return!0===e?y(l(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(l(this,"WeakMap"),t,e)}},b=t.exports=r(70)("WeakMap",g,m,u,!0,!0);f&&d&&(c((n=u.getConstructor(g,"WeakMap")).prototype,m),a.NEED=!0,i(["delete","has","get","set"],(function(t){var e=b.prototype,r=e[t];s(e,t,(function(e,o){if(p(e)&&!v(e)){this._f||(this._f=new n);var i=this._f[t](e,o);return"set"==t?this:i}return r.call(this,e,o)}))})))},function(t,e,r){var n=r(139),o=r(43);r(70)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(o(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,r){var n=r(0),o=r(71),i=r(101),s=r(5),a=r(38),c=r(8),u=r(6),p=r(3).ArrayBuffer,l=r(55),f=i.ArrayBuffer,d=i.DataView,h=o.ABV&&p.isView,v=f.prototype.slice,y=o.VIEW;n(n.G+n.W+n.F*(p!==f),{ArrayBuffer:f}),n(n.S+n.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return h&&h(t)||u(t)&&y in t}}),n(n.P+n.U+n.F*r(4)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(s(this),t);for(var r=s(this).byteLength,n=a(t,r),o=a(void 0===e?r:e,r),i=new(l(this,f))(c(o-n)),u=new d(this),p=new d(i),h=0;n<o;)p.setUint8(h++,u.getUint8(n++));return i}}),r(49)("ArrayBuffer")},function(t,e,r){var n=r(0);n(n.G+n.W+n.F*!r(71).ABV,{DataView:r(101).DataView})},function(t,e,r){r(27)("Int8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Uint8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Uint8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0)},function(t,e,r){r(27)("Int16",2,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Uint16",2,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Int32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Uint32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Float32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(27)("Float64",8,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){var n=r(0),o=r(20),i=r(5),s=(r(3).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!r(4)((function(){s((function(){}))})),"Reflect",{apply:function(t,e,r){var n=o(t),c=i(r);return s?s(n,e,c):a.call(n,e,c)}})},function(t,e,r){var n=r(0),o=r(39),i=r(20),s=r(5),a=r(6),c=r(4),u=r(120),p=(r(3).Reflect||{}).construct,l=c((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),f=!c((function(){p((function(){}))}));n(n.S+n.F*(l||f),"Reflect",{construct:function(t,e){i(t),s(e);var r=arguments.length<3?t:i(arguments[2]);if(f&&!l)return p(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var c=r.prototype,d=o(a(c)?c:Object.prototype),h=Function.apply.call(t,d,e);return a(h)?h:d}})},function(t,e,r){var n=r(11),o=r(0),i=r(5),s=r(30);o(o.S+o.F*r(4)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,r){i(t),e=s(e,!0),i(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),o=r(22).f,i=r(5);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=o(i(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){var n=r(0),o=r(5),i=function(t){this._t=o(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(127)(i,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),n(n.S,"Reflect",{enumerate:function(t){return new i(t)}})},function(t,e,r){var n=r(22),o=r(41),i=r(15),s=r(0),a=r(6),c=r(5);s(s.S,"Reflect",{get:function t(e,r){var s,u,p=arguments.length<3?e:arguments[2];return c(e)===p?e[r]:(s=n.f(e,r))?i(s,"value")?s.value:void 0!==s.get?s.get.call(p):void 0:a(u=o(e))?t(u,r,p):void 0}})},function(t,e,r){var n=r(22),o=r(0),i=r(5);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(i(t),e)}})},function(t,e,r){var n=r(0),o=r(41),i=r(5);n(n.S,"Reflect",{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(0),o=r(5),i=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return o(t),!i||i(t)}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(141)})},function(t,e,r){var n=r(0),o=r(5),i=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){o(t);try{return i&&i(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(11),o=r(22),i=r(41),s=r(15),a=r(0),c=r(34),u=r(5),p=r(6);a(a.S,"Reflect",{set:function t(e,r,a){var l,f,d=arguments.length<4?e:arguments[3],h=o.f(u(e),r);if(!h){if(p(f=i(e)))return t(f,r,a,d);h=c(0)}if(s(h,"value")){if(!1===h.writable||!p(d))return!1;if(l=o.f(d,r)){if(l.get||l.set||!1===l.writable)return!1;l.value=a,n.f(d,r,l)}else n.f(d,r,c(0,a));return!0}return void 0!==h.set&&(h.set.call(d,a),!0)}})},function(t,e,r){var n=r(0),o=r(82);o&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,r){r(321),t.exports=r(9).Array.includes},function(t,e,r){var n=r(0),o=r(61)(!0);n(n.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(42)("includes")},function(t,e,r){r(323),t.exports=r(9).Array.flatMap},function(t,e,r){var n=r(0),o=r(324),i=r(12),s=r(8),a=r(20),c=r(129);n(n.P,"Array",{flatMap:function(t){var e,r,n=i(this);return a(t),e=s(n.length),r=c(n,0),o(r,n,n,e,0,1,t,arguments[1]),r}}),r(42)("flatMap")},function(t,e,r){var n=r(63),o=r(6),i=r(8),s=r(19),a=r(7)("isConcatSpreadable");t.exports=function t(e,r,c,u,p,l,f,d){for(var h,v,y=p,g=0,m=!!f&&s(f,d,3);g<u;){if(g in c){if(h=m?m(c[g],g,r):c[g],v=!1,o(h)&&(v=void 0!==(v=h[a])?!!v:n(h)),v&&l>0)y=t(e,r,h,i(h.length),y,l-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=h}y++}g++}return y}},function(t,e,r){r(326),t.exports=r(9).String.padStart},function(t,e,r){var n=r(0),o=r(142),i=r(69),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);n(n.P+n.F*s,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){r(328),t.exports=r(9).String.padEnd},function(t,e,r){var n=r(0),o=r(142),i=r(69),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);n(n.P+n.F*s,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){r(330),t.exports=r(9).String.trimLeft},function(t,e,r){r(47)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,r){r(332),t.exports=r(9).String.trimRight},function(t,e,r){r(47)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,r){r(334),t.exports=r(78).f("asyncIterator")},function(t,e,r){r(114)("asyncIterator")},function(t,e,r){r(336),t.exports=r(9).Object.getOwnPropertyDescriptors},function(t,e,r){var n=r(0),o=r(141),i=r(17),s=r(22),a=r(94);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=i(t),c=s.f,u=o(n),p={},l=0;u.length>l;)void 0!==(r=c(n,e=u[l++]))&&a(p,e,r);return p}})},function(t,e,r){r(338),t.exports=r(9).Object.values},function(t,e,r){var n=r(0),o=r(143)(!1);n(n.S,"Object",{values:function(t){return o(t)}})},function(t,e,r){r(340),t.exports=r(9).Object.entries},function(t,e,r){var n=r(0),o=r(143)(!0);n(n.S,"Object",{entries:function(t){return o(t)}})},function(t,e,r){r(135),r(342),t.exports=r(9).Promise.finally},function(t,e,r){var n=r(0),o=r(9),i=r(3),s=r(55),a=r(137);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,o.Promise||i.Promise),r="function"==typeof t;return this.then(r?function(r){return a(e,t()).then((function(){return r}))}:t,r?function(r){return a(e,t()).then((function(){throw r}))}:t)}})},function(t,e,r){r(344),r(345),r(346),t.exports=r(9)},function(t,e,r){var n=r(3),o=r(0),i=r(69),s=[].slice,a=/MSIE .\./.test(i),c=function(t){return function(e,r){var n=arguments.length>2,o=!!n&&s.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,r)}};o(o.G+o.B+o.F*a,{setTimeout:c(n.setTimeout),setInterval:c(n.setInterval)})},function(t,e,r){var n=r(0),o=r(100);n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,r){for(var n=r(97),o=r(37),i=r(13),s=r(3),a=r(16),c=r(48),u=r(7),p=u("iterator"),l=u("toStringTag"),f=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(d),v=0;v<h.length;v++){var y,g=h[v],m=d[g],b=s[g],w=b&&b.prototype;if(w&&(w[p]||a(w,p,f),w[l]||a(w,l,g),c[g]=f,m))for(y in n)w[y]||i(w,y,n[y],!0)}},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function a(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),s=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var a=b(s,r);if(a){if(a===u)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var p=c(t,e,r);if("normal"===p.type){if(n=r.done?"completed":"suspendedYield",p.arg===u)continue;return{value:p.arg,done:r.done}}"throw"===p.type&&(n="completed",r.method="throw",r.arg=p.arg)}}}(t,r,s),i}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var u={};function p(){}function l(){}function f(){}var d={};d[o]=function(){return this};var h=Object.getPrototypeOf,v=h&&h(h(P([])));v&&v!==e&&r.call(v,o)&&(d=v);var y=f.prototype=p.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t,e){var n;this._invoke=function(o,i){function s(){return new e((function(n,s){!function n(o,i,s,a){var u=c(t[o],t,i);if("throw"!==u.type){var p=u.arg,l=p.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){p.value=t,s(p)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}(o,i,n,s)}))}return n=n?n.then(s,s):s()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return l.prototype=y.constructor=f,f.constructor=l,f[s]=l.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(m.prototype),m.prototype[i]=function(){return this},t.AsyncIterator=m,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new m(a(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},g(y),y[s]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){r(349),t.exports=r(144).global},function(t,e,r){var n=r(350);n(n.G,{global:r(102)})},function(t,e,r){var n=r(102),o=r(144),i=r(351),s=r(353),a=r(360),c=function(t,e,r){var u,p,l,f=t&c.F,d=t&c.G,h=t&c.S,v=t&c.P,y=t&c.B,g=t&c.W,m=d?o:o[e]||(o[e]={}),b=m.prototype,w=d?n:h?n[e]:(n[e]||{}).prototype;for(u in d&&(r=e),r)(p=!f&&w&&void 0!==w[u])&&a(m,u)||(l=p?w[u]:r[u],m[u]=d&&"function"!=typeof w[u]?r[u]:y&&p?i(l,n):g&&w[u]==l?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):v&&"function"==typeof l?i(Function.call,l):l,v&&((m.virtual||(m.virtual={}))[u]=l,t&c.R&&b&&!b[u]&&s(b,u,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,r){var n=r(352);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(354),o=r(359);t.exports=r(104)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(355),o=r(356),i=r(358),s=Object.defineProperty;e.f=r(104)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(103);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){t.exports=!r(104)&&!r(145)((function(){return 7!=Object.defineProperty(r(357)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(103),o=r(102).document,i=n(o)&&n(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,r){var n=r(103);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){t.exports=r(362).polyfill()},function(t,e,r){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var n;n=function(){"use strict";function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,s=void 0,a=function(t,e){h[o]=t,h[o+1]=e,2===(o+=2)&&(s?s(v):w())},c="undefined"!=typeof window?window:void 0,u=c||{},p=u.MutationObserver||u.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(v,1)}}var h=new Array(1e3);function v(){for(var t=0;t<o;t+=2)(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0;o=0}var y,g,m,b,w=void 0;function _(t,e){var r=this,n=new this.constructor(x);void 0===n[P]&&A(n);var o=r._state;if(o){var i=arguments[o-1];a((function(){return D(o,n,i,r._result)}))}else T(r,n,t,e);return n}function S(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(x);return O(e,t),e}l?w=function(){return e.nextTick(v)}:p?(g=0,m=new p(v),b=document.createTextNode(""),m.observe(b,{characterData:!0}),w=function(){b.data=g=++g%2}):f?((y=new MessageChannel).port1.onmessage=v,w=function(){return y.port2.postMessage(0)}):w=void 0===c?function(){try{var t=Function("return this")().require("vertx");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(v)}:d()}catch(t){return d()}}():d();var P=Math.random().toString(36).substring(2);function x(){}function C(e,r,n){r.constructor===e.constructor&&n===_&&r.constructor.resolve===S?function(t,e){1===e._state?E(t,e._result):2===e._state?k(t,e._result):T(e,void 0,(function(e){return O(t,e)}),(function(e){return k(t,e)}))}(e,r):void 0===n?E(e,r):t(n)?function(t,e,r){a((function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,(function(r){n||(n=!0,e!==r?O(t,r):E(t,r))}),(function(e){n||(n=!0,k(t,e))}),t._label);!n&&o&&(n=!0,k(t,o))}),t)}(e,r,n):E(e,r)}function O(t,e){if(t===e)k(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(n=e),null===n||"object"!==o&&"function"!==o)E(t,e);else{var r=void 0;try{r=e.then}catch(e){return void k(t,e)}C(t,e,r)}var n,o}function I(t){t._onerror&&t._onerror(t._result),j(t)}function E(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(j,t))}function k(t,e){void 0===t._state&&(t._state=2,t._result=e,a(I,t))}function T(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+1]=r,o[i+2]=n,0===i&&t._state&&a(j,t)}function j(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?D(r,n,o,i):o(i);t._subscribers.length=0}}function D(e,r,n,o){var i=t(n),s=void 0,a=void 0,c=!0;if(i){try{s=n(o)}catch(t){c=!1,a=t}if(r===s)return void k(r,new TypeError("A promises callback cannot return that same promise."))}else s=o;void 0!==r._state||(i&&c?O(r,s):!1===c?k(r,a):1===e?E(r,s):2===e&&k(r,s))}var M=0;function A(t){t[P]=M++,t._state=void 0,t._result=void 0,t._subscribers=[]}var F=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(x),this.promise[P]||A(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&E(this.promise,this._result))):k(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===S){var o=void 0,i=void 0,s=!1;try{o=t.then}catch(t){s=!0,i=t}if(o===_&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===L){var a=new r(x);s?k(a,i):C(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;void 0===n._state&&(this._remaining--,2===t?k(n,r):this._result[e]=r),0===this._remaining&&E(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;T(t,void 0,(function(t){return r._settledAt(1,e,t)}),(function(t){return r._settledAt(2,e,t)}))},t}(),L=function(){function e(t){this[P]=M++,this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){O(t,e)}),(function(e){k(t,e)}))}catch(e){k(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return L.prototype.then=_,L.all=function(t){return new F(this,t).promise},L.race=function(t){var e=this;return n(t)?new e((function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},L.resolve=S,L.reject=function(t){var e=new this(x);return k(e,t),e},L._setScheduler=function(t){s=t},L._setAsap=function(t){a=t},L._asap=a,L.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=L},L.Promise=L,L},t.exports=n()}).call(this,r(363),r(44))},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var c,u=[],p=!1,l=-1;function f(){p&&c&&(p=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!p){var t=a(f);p=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,p=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new h(t,e)),1!==u.length||p||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){r(365),t.exports=self.fetch.bind(self)},function(t,e,r){r.r(e),r.d(e,"Headers",(function(){return h})),r.d(e,"Request",(function(){return _})),r.d(e,"Response",(function(){return P})),r.d(e,"DOMException",(function(){return C})),r.d(e,"fetch",(function(){return O}));var n="undefined"!=typeof self?self:void 0,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(t){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(t){return t&&u.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function g(t){var e=new FileReader,r=y(e);return e.readAsArrayBuffer(t),r}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:s&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:a&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():c&&s&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(t)||p(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,r,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=y(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=l(t),e=f(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},h.prototype.delete=function(t){delete this.map[l(t)]},h.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},h.prototype.set=function(t,e){this.map[l(t)]=f(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),d(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),d(t)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(t,e){var r,n,o=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function S(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function P(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},P.error=function(){var t=new P(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];P.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new P(null,{status:e,headers:{location:t}})};var C=n.DOMException;function O(t,e){return new Promise((function(r,o){var i=new _(t,e);if(i.signal&&i.signal.aborted)return o(new C("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){r(new P(o,n))}),0)},a.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){o(new C("Aborted","AbortError"))}),0)},a.open(i.method,function(t){try{return""===t&&n.location.href?n.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(s?a.responseType="blob":c&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",u)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}"function"!=typeof C&&((C=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),C.prototype.constructor=C),O.polyfill=!0,n.fetch||(n.fetch=O,n.Headers=h,n.Request=_,n.Response=P)},function(t,e,r){(function(t){Object.defineProperty(e,"__esModule",{value:!0}),r(146).is_node()&&(t.WebSocket=r(367).WebSocket)}).call(this,r(44))},function(t,e,r){(function(t){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var s=r(372),a=r(376),c=r(73),u=r(395),p=r(396),l=r(397),f=function(e){function r(t,n){var o=e.call(this)||this;return o.on_={},o.state_=r.CONNECTING,o.client_=new s.client,o.client_.on("connect",o._Handle_connect.bind(o)),o.client_.on("connectFailed",o._Handle_error.bind(o)),"string"==typeof n&&(n=[n]),o.client_.connect(t,n),o}return o(r,e),r.prototype.close=function(t,e){this.state_=r.CLOSING,void 0===t?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(t,e,!0)},r.prototype.send=function(e){if("string"==typeof e.valueOf())this.connection_.sendUTF(e);else{var r=void 0;r=e instanceof t?e:e instanceof Blob?new t(e,"blob"):e.buffer?new t(e.buffer):new t(e),this.connection_.sendBytes(r)}},Object.defineProperty(r.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onopen",{get:function(){return this.on_.open},set:function(t){this._Set_on("open",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onclose",{get:function(){return this.on_.close},set:function(t){this._Set_on("close",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onmessage",{get:function(){return this.on_.message},set:function(t){this._Set_on("message",t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onerror",{get:function(){return this.on_.error},set:function(t){this._Set_on("error",t)},enumerable:!0,configurable:!0}),r.prototype._Set_on=function(t,e){this.on_[t]&&this.removeEventListener(t,this.on_[t]),this.addEventListener(t,e),this.on_[t]=e},r.prototype._Handle_connect=function(t){this.connection_=t,this.state_=r.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var e=new c.Event("open",d);this.dispatchEvent(e)},r.prototype._Handle_close=function(t,e){var n=new u.CloseEvent("close",i({},d,{code:t,reason:e}));this.state_=r.CLOSED,this.dispatchEvent(n)},r.prototype._Handle_message=function(t){var e=new p.MessageEvent("message",i({},d,{data:t.binaryData?t.binaryData:t.utf8Data}));this.dispatchEvent(e)},r.prototype._Handle_error=function(t){var e=new l.ErrorEvent("error",i({},d,{error:t,message:t.message}));this.state_===r.CONNECTING&&(this.state_=r.CLOSED),this.dispatchEvent(e)},r}(a.EventTarget);e.WebSocket=f,function(t){t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3}(f=e.WebSocket||(e.WebSocket={})),e.WebSocket=f;var d={bubbles:!1,cancelable:!1}}).call(this,r(368).Buffer)},function(t,e,r){(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(369),o=r(370),i=r(371);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(e,r),o=(t=a(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|d(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(p(e),t=a(t,e<0?0:0|d(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function h(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(n)return N(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return E(this,e,r);case"base64":return C(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,o);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,o){var i,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var p=-1;for(i=r;i<a;i++)if(u(t,i)===u(e,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*s}else-1!==p&&(i-=i-p),p=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){for(var l=!0,f=0;f<c;f++)if(u(t,i+f)!==u(e,f)){l=!1;break}if(l)return i}return-1}function b(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function w(t,e,r,n){return z(N(e,t.length-r),t,r,n)}function _(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return _(t,e,r,n)}function P(t,e,r,n){return z($(e),t,r,n)}function x(t,e,r,n){return z(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function C(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,c,u=t[o],p=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=r)switch(l){case 1:u<128&&(p=u);break;case 2:128==(192&(i=t[o+1]))&&(c=(31&u)<<6|63&i)>127&&(p=c);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(p=c)}null===p?(p=65533,l=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return u(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return p(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},c.allocUnsafe=function(t){return l(null,t)},c.allocUnsafeSlow=function(t){return l(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var s=t[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):v.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,o){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(n,o),p=t.slice(e,r),l=0;l<a;++l)if(u[l]!==p[l]){i=u[l],s=p[l];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return P(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function k(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=B(t[i]);return o}function T(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function j(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function M(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function A(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function F(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,i){return i||F(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,i){return i||F(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var o=e-t;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},c.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||j(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):A(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);D(this,t,e,r,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);D(this,t,e,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):A(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):A(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var s=c.isBuffer(t)?t:N(new c(t,n).toString()),a=s.length;for(i=0;i<r-e;++i)this[i+e]=s[i%a]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function $(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(44))},function(t,e,r){e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=u(t),s=n[0],a=n[1],c=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),p=0,l=a>0?s-4:s;for(r=0;r<l;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],c[p++]=e>>16&255,c[p++]=e>>8&255,c[p++]=255&e;2===a&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,c[p++]=255&e);1===a&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,c[p++]=e>>8&255,c[p++]=255&e);return c},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(p(t,s,s+16383>a?a:s+16383));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function p(t,e,r){for(var o,i,s=[],a=e;a<r;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,p=-7,l=r?o-1:0,f=r?-1:1,d=t[e+l];for(l+=f,i=d&(1<<-p)-1,d>>=-p,p+=a;p>0;i=256*i+t[e+l],l+=f,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;p>0;s=256*s+t[e+l],l+=f,p-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),i-=u}return(d?-1:1)*s*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var s,a,c,u=8*i-o-1,p=(1<<u)-1,l=p>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,h=n?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=p?(a=0,s=p):s+l>=1?(a=(e*c-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[r+d]=255&a,d+=h,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;t[r+d]=255&s,d+=h,s/=256,u-=8);t[r+d-h]|=128*v}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){var n;try{n=r(373)}catch(t){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,i=r(374);function s(t,e){return e?new o(t,e):new o(t)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(t){Object.defineProperty(s,t,{get:function(){return o[t]}})})),t.exports={w3cwebsocket:o?s:null,version:i}},function(t,e){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(t,e,r){t.exports=r(375).version},function(t){t.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.31","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=0.10.0"},"dependencies":{"debug":"^2.2.0","es5-ext":"^0.10.50","nan":"^2.14.0","typedarray-to-buffer":"^3.1.5","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","faucet":"^0.0.1","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"install":"(node-gyp rebuild 2> builderror.log) || (exit 0)","test":"faucet test/unit","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0","_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.31.tgz","_integrity":"sha512-VAouplvGKPiKFDTeCCO65vYHsyay8DqoBSlzIO3fayrfOgU94lQN5a1uWVnFrMLceTJw/+fQXR5PGbUVRaHshQ==","_from":"websocket@1.0.31"}')},function(t,e,r){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(377),i=r(389),s=function(){function t(){this.listeners_=new i.HashMap,this.created_at_=new Date}return t.prototype.dispatchEvent=function(t){var e,r,o=this.listeners_.find(t.type);if(!o.equals(this.listeners_.end())){t.target=this,t.timeStamp=(new Date).getTime()-this.created_at_.getTime();try{for(var i=n(o.second),s=i.next();!s.done;s=i.next()){(0,s.value)(t)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}},t.prototype.addEventListener=function(t,e){var r=this.listeners_.find(t);r.equals(this.listeners_.end())&&(r=this.listeners_.emplace(t,new o.HashSet).first),r.second.insert(e)},t.prototype.removeEventListener=function(t,e){var r=this.listeners_.find(t);r.equals(this.listeners_.end())||(r.second.erase(e),r.second.empty()&&this.listeners_.erase(r))},t}();e.EventTarget=s},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.HashSet=void 0;var a=r(378),c=r(149),u=r(385),p=r(388),l=r(154),f=function(t){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=t.call(this,(function(t){return new u.SetElementList(t)}))||this;return c.IHashContainer.construct.apply(c.IHashContainer,s([o,e,function(t,e){o.buckets_=new p.SetHashBuckets(o,t,e)}],r)),o}return o(e,t),e.prototype.clear=function(){this.buckets_.clear(),t.prototype.clear.call(this)},e.prototype.swap=function(t){var e,r;e=i([t.data_,this.data_],2),this.data_=e[0],t.data_=e[1],u.SetElementList._Swap_associative(this.data_,t.data_),p.SetHashBuckets._Swap_source(this.buckets_,t.buckets_),r=i([t.buckets_,this.buckets_],2),this.buckets_=r[0],t.buckets_=r[1]},e.prototype.find=function(t){return this.buckets_.find(t)},e.prototype.begin=function(e){return void 0===e&&(e=null),null===e?t.prototype.begin.call(this):this.buckets_.at(e)[0]},e.prototype.end=function(e){if(void 0===e&&(e=null),null===e)return t.prototype.end.call(this);var r=this.buckets_.at(e);return r[r.length-1].next()},e.prototype.rbegin=function(t){return void 0===t&&(t=null),this.end(t).reverse()},e.prototype.rend=function(t){return void 0===t&&(t=null),this.begin(t).reverse()},e.prototype.bucket_count=function(){return this.buckets_.size()},e.prototype.bucket_size=function(t){return this.buckets_.at(t).length},e.prototype.load_factor=function(){return this.buckets_.load_factor()},e.prototype.hash_function=function(){return this.buckets_.hash_function()},e.prototype.key_eq=function(){return this.buckets_.key_eq()},e.prototype.bucket=function(t){return this.hash_function()(t)%this.buckets_.size()},e.prototype.max_load_factor=function(t){return void 0===t&&(t=null),this.buckets_.max_load_factor(t)},e.prototype.reserve=function(t){this.buckets_.rehash(Math.ceil(t*this.max_load_factor()))},e.prototype.rehash=function(t){t<=this.bucket_count()||this.buckets_.rehash(t)},e.prototype._Insert_by_key=function(t){var e=this.find(t);return!1===e.equals(this.end())?new l.Pair(e,!1):(this.data_.push(t),e=e.prev(),this._Handle_insert(e,e.next()),new l.Pair(e,!0))},e.prototype._Insert_by_hint=function(t,e){var r=this.find(e);return!0===r.equals(this.end())&&(r=this.data_.insert(t,e),this._Handle_insert(r,r.next())),r},e.prototype._Handle_insert=function(t,e){for(;!t.equals(e);t=t.next())this.buckets_.insert(t)},e.prototype._Handle_erase=function(t,e){for(;!t.equals(e);t=t.next())this.buckets_.erase(t)},e}(a.UniqueSet);e.HashSet=f,function(t){t.Iterator=u.SetElementList.Iterator,t.ReverseIterator=u.SetElementList.ReverseIterator}(f=e.HashSet||(e.HashSet={})),e.HashSet=f},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueSet=void 0;var a=r(379),c=r(72),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.count=function(t){return this.find(t).equals(this.end())?0:1},e.prototype.insert=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.prototype.insert.apply(this,s(e))},e.prototype._Insert_by_range=function(t,e){for(;!t.equals(e);t=t.next())this._Insert_by_key(t.value)},e.prototype.extract=function(t){return t instanceof this.end().constructor?this._Extract_by_iterator(t):this._Extract_by_val(t)},e.prototype._Extract_by_val=function(t){var e=this.find(t);if(!0===e.equals(this.end()))throw c.ErrorGenerator.key_nout_found(this,"extract",t);return this._Erase_by_range(e),t},e.prototype._Extract_by_iterator=function(t){return!0===t.equals(this.end())||!1===this.has(t.value)?this.end():(this._Erase_by_range(t),t)},e.prototype._Erase_by_val=function(t){var e=this.find(t);return!0===e.equals(this.end())?0:(this._Erase_by_range(e),1)},e.prototype.merge=function(t){for(var e=t.begin();!e.equals(t.end());)!1===this.has(e.value)?(this.insert(e.value),e=t.erase(e)):e=e.next()},e}(a.SetContainer);e.UniqueSet=u},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SetContainer=void 0;var i=r(105),s=r(106),a=function(t){function e(e){var r=t.call(this)||this;return r.data_=e(r),r}return o(e,t),e.prototype.assign=function(t,e){this.clear(),this.insert(t,e)},e.prototype.clear=function(){this.data_.clear()},e.prototype.begin=function(){return this.data_.begin()},e.prototype.end=function(){return this.data_.end()},e.prototype.has=function(t){return!this.find(t).equals(this.end())},e.prototype.size=function(){return this.data_.size()},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this.size();var r=new s.NativeArrayIterator(t,0),n=new s.NativeArrayIterator(t,t.length);return this._Insert_by_range(r,n),this.size()},e.prototype.insert=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length?this._Insert_by_key(t[0]):t[0].next instanceof Function&&t[1].next instanceof Function?this._Insert_by_range(t[0],t[1]):this._Insert_by_hint(t[0],t[1])},e.prototype.erase=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1!==t.length||t[0]instanceof this.end().constructor&&t[0].source()===this?1===t.length?this._Erase_by_range(t[0]):this._Erase_by_range(t[0],t[1]):this._Erase_by_val(t[0])},e.prototype._Erase_by_range=function(t,e){void 0===e&&(e=t.next());var r=this.data_.erase(t,e);return this._Handle_erase(t,e),r},e}(i.Container);e.SetContainer=a},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.ForOfAdaptor=void 0;var n=function(){function t(t,e){this.it_=t,this.last_=e}return t.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var t=this.it_;return this.it_=this.it_.next(),{done:!1,value:t.value}},t.prototype[Symbol.iterator]=function(){return this},t}();e.ForOfAdaptor=n},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Exception=void 0;var i=function(t){function e(e){var r=this.constructor,n=t.call(this,e)||this,o=r.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(n,o):n.__proto__=o,n}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),e.prototype.what=function(){return this.message},e.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},e}(Error);e.Exception=i},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.OutOfRange=void 0;var i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(r(148).LogicError);e.OutOfRange=i},function(t,e,r){var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.IAssociativeContainer=void 0,function(t){t.construct=function(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return n.length>=1&&n[0]instanceof Array?(e=function(){var e=n[0];t.push.apply(t,o(e))},r=n.slice(1)):n.length>=2&&n[0].next instanceof Function&&n[1].next instanceof Function?(e=function(){var e=n[0],r=n[1];t.assign(e,r)},r=n.slice(2)):(e=null,r=n),{ramda:e,tail:r}}}(e.IAssociativeContainer||(e.IAssociativeContainer={}))},function(t,e,r){(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e._Get_root=void 0;var n=r(146);e._Get_root=function(){return null===o&&void 0===(o=n.is_node()?t:self).__s_iUID&&(o.__s_iUID=0),o};var o=null}).call(this,r(44))},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.SetElementList=void 0;var s=r(151),a=r(109),c=r(152),u=function(t){function e(e){var r=t.call(this)||this;return r.associative_=e,r}return o(e,t),e.prototype._Create_iterator=function(t,r,n){return e.Iterator.create(this,t,r,n)},e._Swap_associative=function(t,e){var r;r=i([e.associative_,t.associative_],2),t.associative_=r[0],e.associative_=r[1]},e.prototype.associative=function(){return this.associative_},e}(s.ListContainer);e.SetElementList=u,function(t){var e=function(t){function e(e,r,n,o){var i=t.call(this,r,n,o)||this;return i.source_=e,i}return o(e,t),e.create=function(t,r,n,o){return new e(t,r,n,o)},e.prototype.reverse=function(){return new r(this)},e.prototype.source=function(){return this.source_.associative()},e}(a.ListIterator);t.Iterator=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._Create_neighbor=function(t){return new e(t)},e}(c.ReverseIterator);t.ReverseIterator=r}(u=e.SetElementList||(e.SetElementList={})),e.SetElementList=u},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Repeater=void 0;var n=function(){function t(t,e){this.index_=t,this.value_=e}return t.prototype.index=function(){return this.index_},Object.defineProperty(t.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),t.prototype.next=function(){return++this.index_,this},t.prototype.equals=function(t){return this.index_===t.index_},t}();e.Repeater=n},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.next=e.prev=e.advance=e.distance=e.size=e.empty=void 0;var n=r(147);function o(t,e){if(0===e)return t;if(t.advance instanceof Function)return t.advance(e);var r;if(e<0){if(!(t.prev instanceof Function))throw new n.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");r=function(t){return t.prev()},e=-e}else r=function(t){return t.next()};for(;e-- >0;)t=r(t);return t}e.empty=function(t){return t instanceof Array?0!==t.length:t.empty()},e.size=function(t){return t instanceof Array?t.length:t.size()},e.distance=function(t,e){if(t.index instanceof Function)return function(t,e){var r=t.index(),n=e.index();return t.base instanceof Function?r-n:n-r}(t,e);for(var r=0;!t.equals(e);t=t.next())++r;return r},e.advance=o,e.prev=function(t,e){return void 0===e&&(e=1),1===e?t.prev():o(t,-e)},e.next=function(t,e){return void 0===e&&(e=1),1===e?t.next():o(t,e)}},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.SetHashBuckets=void 0;var a=function(t){function e(e,r,n){var o=t.call(this)||this;return o.source_=e,o.hash_function_=r,o.key_eq_=n,o}return o(e,t),e._Swap_source=function(t,e){var r;r=i([e.source_,t.source_],2),t.source_=r[0],e.source_=r[1]},e.prototype.hash_function=function(){return this.hash_function_},e.prototype.key_eq=function(){return this.key_eq_},e.prototype.find=function(t){var e,r,n=this.hash_function_(t)%this.size(),o=this.at(n);try{for(var i=s(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(this.key_eq_(c.value,t))return c}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return this.source_.end()},e.prototype.hash_index=function(t){return this.hash_function_(t.value)%this.size()},e}(r(153).HashBuckets);e.SetHashBuckets=a},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.HashMap=void 0;var a=r(390),c=r(149),u=r(392),p=r(393),l=r(394),f=r(154),d=function(t){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=t.call(this,(function(t){return new u.MapElementList(t)}))||this;return c.IHashContainer.construct.apply(c.IHashContainer,s([o,e,function(t,e){o.buckets_=new p.MapHashBuckets(o,t,e)}],r)),o}return o(e,t),e.prototype.clear=function(){this.buckets_.clear(),t.prototype.clear.call(this)},e.prototype.swap=function(t){var e,r;e=i([t.data_,this.data_],2),this.data_=e[0],t.data_=e[1],u.MapElementList._Swap_associative(this.data_,t.data_),p.MapHashBuckets._Swap_source(this.buckets_,t.buckets_),r=i([t.buckets_,this.buckets_],2),this.buckets_=r[0],t.buckets_=r[1]},e.prototype.find=function(t){return this.buckets_.find(t)},e.prototype.begin=function(e){return void 0===e&&(e=null),null===e?t.prototype.begin.call(this):this.buckets_.at(e)[0]},e.prototype.end=function(e){if(void 0===e&&(e=null),null===e)return t.prototype.end.call(this);var r=this.buckets_.at(e);return r[r.length-1].next()},e.prototype.rbegin=function(t){return void 0===t&&(t=null),this.end(t).reverse()},e.prototype.rend=function(t){return void 0===t&&(t=null),this.begin(t).reverse()},e.prototype.bucket_count=function(){return this.buckets_.size()},e.prototype.bucket_size=function(t){return this.buckets_.at(t).length},e.prototype.load_factor=function(){return this.buckets_.load_factor()},e.prototype.hash_function=function(){return this.buckets_.hash_function()},e.prototype.key_eq=function(){return this.buckets_.key_eq()},e.prototype.bucket=function(t){return this.hash_function()(t)%this.buckets_.size()},e.prototype.max_load_factor=function(t){return void 0===t&&(t=null),this.buckets_.max_load_factor(t)},e.prototype.reserve=function(t){this.buckets_.reserve(t)},e.prototype.rehash=function(t){t<=this.bucket_count()||this.buckets_.rehash(t)},e.prototype.emplace=function(t,e){var r=this.find(t);return!1===r.equals(this.end())?new f.Pair(r,!1):(this.data_.push(new l.Entry(t,e)),r=r.prev(),this._Handle_insert(r,r.next()),new f.Pair(r,!0))},e.prototype.emplace_hint=function(t,e,r){var n=this.find(e);return!0===n.equals(this.end())&&(n=this.data_.insert(t,new l.Entry(e,r)),this._Handle_insert(n,n.next())),n},e.prototype._Handle_insert=function(t,e){for(;!t.equals(e);t=t.next())this.buckets_.insert(t)},e.prototype._Handle_erase=function(t,e){for(;!t.equals(e);t=t.next())this.buckets_.erase(t)},e}(a.UniqueMap);e.HashMap=d,function(t){t.Iterator=u.MapElementList.Iterator,t.ReverseIterator=u.MapElementList.ReverseIterator}(d=e.HashMap||(e.HashMap={})),e.HashMap=d},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueMap=void 0;var a=r(391),c=r(72),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.count=function(t){return this.find(t).equals(this.end())?0:1},e.prototype.get=function(t){var e=this.find(t);if(!0===e.equals(this.end()))throw c.ErrorGenerator.key_nout_found(this,"get",t);return e.second},e.prototype.set=function(t,e){this.insert_or_assign(t,e)},e.prototype.insert=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.prototype.insert.apply(this,s(e))},e.prototype._Insert_by_range=function(t,e){for(var r=t;!r.equals(e);r=r.next())this.emplace(r.value.first,r.value.second)},e.prototype.insert_or_assign=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 2===t.length?this._Insert_or_assign_with_key_value(t[0],t[1]):3===t.length?this._Insert_or_assign_with_hint(t[0],t[1],t[2]):void 0},e.prototype._Insert_or_assign_with_key_value=function(t,e){var r=this.emplace(t,e);return!1===r.second&&(r.first.second=e),r},e.prototype._Insert_or_assign_with_hint=function(t,e,r){var n=this.emplace_hint(t,e,r);return n.second!==r&&(n.second=r),n},e.prototype.extract=function(t){return t instanceof this.end().constructor?this._Extract_by_iterator(t):this._Extract_by_key(t)},e.prototype._Extract_by_key=function(t){var e=this.find(t);if(!0===e.equals(this.end()))throw c.ErrorGenerator.key_nout_found(this,"extract",t);var r=e.value;return this._Erase_by_range(e),r},e.prototype._Extract_by_iterator=function(t){return!0===t.equals(this.end())?this.end():(this._Erase_by_range(t),t)},e.prototype._Erase_by_key=function(t){var e=this.find(t);return!0===e.equals(this.end())?0:(this._Erase_by_range(e),1)},e.prototype.merge=function(t){for(var e=t.begin();!e.equals(t.end());)!1===this.has(e.first)?(this.insert(e.value),e=t.erase(e)):e=e.next()},e}(a.MapContainer);e.UniqueMap=u},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MapContainer=void 0;var i=r(105),s=r(106),a=function(t){function e(e){var r=t.call(this)||this;return r.data_=e(r),r}return o(e,t),e.prototype.assign=function(t,e){this.clear(),this.insert(t,e)},e.prototype.clear=function(){this.data_.clear()},e.prototype.begin=function(){return this.data_.begin()},e.prototype.end=function(){return this.data_.end()},e.prototype.has=function(t){return!this.find(t).equals(this.end())},e.prototype.size=function(){return this.data_.size()},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new s.NativeArrayIterator(t,0),n=new s.NativeArrayIterator(t,t.length);return this.insert(r,n),this.size()},e.prototype.insert=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length?this.emplace(t[0].first,t[0].second):t[0].next instanceof Function&&t[1].next instanceof Function?this._Insert_by_range(t[0],t[1]):this.emplace_hint(t[0],t[1].first,t[1].second)},e.prototype.erase=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1!==t.length||t[0]instanceof this.end().constructor!=!1&&t[0].source()===this?1===t.length?this._Erase_by_range(t[0]):this._Erase_by_range(t[0],t[1]):this._Erase_by_key(t[0])},e.prototype._Erase_by_range=function(t,e){void 0===e&&(e=t.next());var r=this.data_.erase(t,e);return this._Handle_erase(t,e),r},e}(i.Container);e.MapContainer=a},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.MapElementList=void 0;var s=r(151),a=r(109),c=r(152),u=function(t){function e(e){var r=t.call(this)||this;return r.associative_=e,r}return o(e,t),e.prototype._Create_iterator=function(t,r,n){return e.Iterator.create(this,t,r,n)},e._Swap_associative=function(t,e){var r;r=i([e.associative_,t.associative_],2),t.associative_=r[0],e.associative_=r[1]},e.prototype.associative=function(){return this.associative_},e}(s.ListContainer);e.MapElementList=u,function(t){var e=function(t){function e(e,r,n,o){var i=t.call(this,r,n,o)||this;return i.list_=e,i}return o(e,t),e.create=function(t,r,n,o){return new e(t,r,n,o)},e.prototype.reverse=function(){return new r(this)},e.prototype.source=function(){return this.list_.associative()},Object.defineProperty(e.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"second",{get:function(){return this.value.second},set:function(t){this.value.second=t},enumerable:!1,configurable:!0}),e}(a.ListIterator);t.Iterator=e;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._Create_neighbor=function(t){return new e(t)},Object.defineProperty(e.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"second",{get:function(){return this.base_.second},set:function(t){this.base_.second=t},enumerable:!1,configurable:!0}),e}(c.ReverseIterator);t.ReverseIterator=r}(u=e.MapElementList||(e.MapElementList={})),e.MapElementList=u},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MapHashBuckets=void 0;var a=function(t){function e(e,r,n){var o=t.call(this)||this;return o.source_=e,o.hash_function_=r,o.key_eq_=n,o}return o(e,t),e._Swap_source=function(t,e){var r;r=i([e.source_,t.source_],2),t.source_=r[0],e.source_=r[1]},e.prototype.hash_function=function(){return this.hash_function_},e.prototype.key_eq=function(){return this.key_eq_},e.prototype.find=function(t){var e,r,n=this.hash_function_(t)%this.size(),o=this.at(n);try{for(var i=s(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(this.key_eq_(c.first,t))return c}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return this.source_.end()},e.prototype.hash_index=function(t){return this.hash_function_(t.first)%this.size()},e}(r(153).HashBuckets);e.MapHashBuckets=a},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Entry=void 0;var n=r(107),o=r(108),i=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.equals=function(t){return o.equal_to(this.first,t.first)},t.prototype.less=function(t){return o.less(this.first,t.first)},t.prototype.hashCode=function(){return n.hash(this.first)},t}();e.Entry=i},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r){return t.call(this,e,r)||this}return o(e,t),e}(r(73).Event);e.CloseEvent=i},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r){return t.call(this,e,r)||this}return o(e,t),e}(r(73).Event);e.MessageEvent=i},function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r){return t.call(this,e,r)||this}return o(e,t),e}(r(73).Event);e.ErrorEvent=i},function(t,e,r){},function(t,e,r){},function(t,e,r){t.exports=r(401)},function(t,e,r){var n=r(402);t.exports=n},function(t,e,r){var n=r(403),o=Array.prototype;t.exports=function(t){var e=t.slice;return t===o||t instanceof Array&&e===o.slice?n:e}},function(t,e,r){r(404);var n=r(419);t.exports=n("Array").slice},function(t,e,r){var n=r(45),o=r(57),i=r(410),s=r(160),a=r(162),c=r(56),u=r(411),p=r(163),l=r(418)("slice"),f=p("species"),d=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!l},{slice:function(t,e){var r,n,p,l=c(this),v=a(l.length),y=s(t,v),g=s(void 0===e?v:e,v);if(i(l)&&("function"!=typeof(r=l.constructor)||r!==Array&&!i(r.prototype)?o(r)&&null===(r=r[f])&&(r=void 0):r=void 0,r===Array||void 0===r))return d.call(l,y,g);for(n=new(void 0===r?Array:r)(h(g-y,0)),p=0;y<g;y++,p++)y in l&&u(n,p,l[y]);return n.length=p,n}})},function(t,e,r){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(28),o=r(111),i="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,r){var n=r(28),o=/#|\.prototype\./,i=function(t,e){var r=a[s(t)];return r==u||r!=c&&("function"==typeof e?n(e):!!e)},s=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},function(t,e,r){var n=r(409);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){var n=r(111);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(112),o=r(74),i=r(110);t.exports=function(t,e,r){var s=n(e);s in t?o.f(t,s,i(0,r)):t[s]=r}},function(t,e){t.exports=!0},function(t,e,r){var n=r(32),o=r(414),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,r){var n=r(32),o=r(159);t.exports=function(t,e){try{o(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n=r(111),o=r(32);t.exports="process"==n(o.process)},function(t,e,r){var n=r(168);t.exports=n("navigator","userAgent")||""},function(t,e,r){var n=r(166);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,r){var n=r(28),o=r(163),i=r(167),s=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,r){var n=r(29);t.exports=function(t){return n[t+"Prototype"]}},function(t,e,r){t.exports=r(421)},function(t,e,r){var n=r(422);t.exports=n},function(t,e,r){r(423);var n=r(29).Object,o=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(o.sham=!0)},function(t,e,r){var n=r(45),o=r(28),i=r(56),s=r(155).f,a=r(33),c=o((function(){s(1)}));n({target:"Object",stat:!0,forced:!a||c,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},function(t,e,r){var n=r(425);t.exports=n},function(t,e,r){r(426);var n=r(29).Object,o=t.exports=function(t,e,r){return n.defineProperty(t,e,r)};n.defineProperty.sham&&(o.sham=!0)},function(t,e,r){var n=r(45),o=r(33);n({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:r(74).f})},function(t,e,r){t.exports=r(428)},function(t,e,r){var n=r(429);t.exports=n},function(t,e,r){r(430);var n=r(29).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(45)({target:"Object",stat:!0,sham:!r(33)},{create:r(431)})},function(t,e,r){var n,o=r(75),i=r(432),s=r(171),a=r(170),c=r(436),u=r(158),p=r(172),l=p("IE_PROTO"),f=function(){},d=function(t){return"<script>"+t+"<\/script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;h=n?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var r=s.length;r--;)delete h.prototype[s[r]];return h()};a[l]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f.prototype=o(t),r=new f,f.prototype=null,r[l]=t):r=h(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(33),o=r(74),i=r(75),s=r(433);t.exports=n?Object.defineProperties:function(t,e){i(t);for(var r,n=s(e),a=n.length,c=0;a>c;)o.f(t,r=n[c++],e[r]);return t}},function(t,e,r){var n=r(434),o=r(171);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,r){var n=r(58),o=r(56),i=r(435).indexOf,s=r(170);t.exports=function(t,e){var r,a=o(t),c=0,u=[];for(r in a)!n(s,r)&&n(a,r)&&u.push(r);for(;e.length>c;)n(a,r=e[c++])&&(~i(u,r)||u.push(r));return u}},function(t,e,r){var n=r(56),o=r(162),i=r(160),s=function(t){return function(e,r,s){var a,c=n(e),u=o(c.length),p=i(s,u);if(t&&r!=r){for(;u>p;)if((a=c[p++])!=a)return!0}else for(;u>p;p++)if((t||p in c)&&c[p]===r)return t||p||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,r){var n=r(168);t.exports=n("document","documentElement")},function(t,e,r){t.exports=r(438)},function(t,e,r){var n=r(439);t.exports=n},function(t,e,r){r(440);var n=r(29);t.exports=n.Object.getPrototypeOf},function(t,e,r){var n=r(45),o=r(28),i=r(173),s=r(441),a=r(174);n({target:"Object",stat:!0,forced:o((function(){s(1)})),sham:!a},{getPrototypeOf:function(t){return s(i(t))}})},function(t,e,r){var n=r(58),o=r(173),i=r(172),s=r(174),a=i("IE_PROTO"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=o(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,r){t.exports=r(443)},function(t,e,r){var n=r(444);t.exports=n},function(t,e,r){r(445);var n=r(29);t.exports=n.Object.setPrototypeOf},function(t,e,r){r(45)({target:"Object",stat:!0},{setPrototypeOf:r(446)})},function(t,e,r){var n=r(75),o=r(447);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return n(r),o(i),e?t.call(r,i):r.__proto__=i,r}}():void 0)},function(t,e,r){var n=r(57);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,r){t.exports=r(449)},function(t,e,r){var n=r(450);t.exports=n},function(t,e,r){r(451);var n=r(29);t.exports=n.Date.now},function(t,e,r){r(45)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,r){(function(t){function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(169));function i(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof window)return window;if("undefined"!=typeof WorkerGlobalScope)return self;if(void 0!==t)return t;if(this)return this;o.default(Object.prototype,"__global_this__",{get:function(){return this},configurable:!0});try{return __global_this__}finally{delete Object.prototype.__global_this__}}var s=i();e.default=s,e.getGlobalThis=i,e.globalThis=s}).call(this,r(44))},function(t,e){t.exports='<div id="@@componentId@@" class="app-footer"><div id="@@popoverContainerId@@" class="display-none"></div><div id="@@formContainerId@@" class="display-none"></div><a id="@@btnRunJobId@@" class="app-footer--btn-run-job"></a></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="app-header app-header--simple"><div class="app-header--start-over">@@btnStartOverIcon@@ <a id="@@btnStartOverId@@" class="app-header--btn-start-over" href="javascript:void(0)" draggable="false">@@btnStartOverLabel@@</a></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="app-popover"><a id="@@btnAddId@@" href="javascript:void(0)" class="app-popover--btn-add"><span class="app-popover--btn-add-text">+</span></a><div class="app-popover--box"><div class="app-popover--box-content"><div id="@@btnAddGDriveId@@" class="app-popover--item">@@btnAddGDriveIcon@@ <span class="app-popover--item-label">@@btnAddGDriveLabel@@</span></div><div id="@@btnAddDropBoxId@@" class="app-popover--item">@@btnAddDropBoxIcon@@ <span class="app-popover--item-label">@@btnAddDropBoxLabel@@</span></div><div id="@@btnAddLocalId@@" class="app-popover--item">@@btnAddLocalIcon@@ <span class="app-popover--item-label">@@btnAddLocalLabel@@</span></div></div><div class="app-popover--box-spacer"></div></div><span id="@@popoverLabelId@@" class="app-popover--label">@@popoverLabel@@</span></div>'},function(t,e){t.exports='<div class="app-header--order"><span class="app-header--sort-label">@@sortLabel@@</span> <a id="@@btnAskId@@" href="javascript:void(0)" class="app-header--sort-direction" draggable="false">@@ascLabel@@</a> <a id="@@btnDescId@@" href="javascript:void(0)" class="app-header--sort-direction" draggable="false">@@descLabel@@</a></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="form-group--select form-group @@formGroupCss@@"><label id="@@labelId@@" class="form-control--label" for="@@selectId@@">@@label@@</label><div class="app-select"><select id="@@selectId@@" class="form-control">@@options@@</select></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="form-group--input form-group @@formGroupCss@@"><label id="@@labelId@@" class="form-control--label" for="@@inputId@@">@@label@@</label><div class="input-wrapper"><input id="@@inputId@@" class="form-control" name="@@inputName@@" type="@@inputType@@" placeholder="@@placeholder@@" autocomplete="off"> <span id="@@prefixBtnId@@" class="form-control--icon-prefix"></span> <span id="@@resetBtnId@@" class="form-control--icon-suffix display-none">@@iconReset@@</span></div><div id="@@errorContainerId@@" class="form-group--error-container"></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="form-group--datetime form-group @@formGroupCss@@"><label id="@@labelId@@" class="form-control--label" for="@@inputId@@">@@label@@</label><div class="input-wrapper"><input id="@@inputId@@" class="form-control" name="@@inputName@@" type="text" placeholder="@@placeholder@@"><div id="@@errorContainerId@@" class="form-group--error-container"></div></div></div>'},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t,e){var r=[],o=[];return function(){if(t&&t instanceof HTMLElement&&"SELECT"===t.tagName.toUpperCase())r.push(t);else if(t&&"string"==typeof t)for(var a=document.querySelectorAll(t),c=0,u=a.length;c<u;++c)a[c]instanceof HTMLElement&&"SELECT"===a[c].tagName.toUpperCase()&&r.push(a[c]);else if(t&&t.length)for(var p=0,l=t.length;p<l;++p)t[p]instanceof HTMLElement&&"SELECT"===t[p].tagName.toUpperCase()&&r.push(t[p]);for(var f=0,d=r.length;f<d;++f)o.push(s(r[f],n({},i,e)));return o}()},r(461);var i={containerClass:"custom-select-container",openerClass:"custom-select-opener",panelClass:"custom-select-panel",optionClass:"custom-select-option",optgroupClass:"custom-select-optgroup",isSelectedClass:"is-selected",hasFocusClass:"has-focus",isDisabledClass:"is-disabled",isOpenClass:"is-open"};function s(t,e){var r=!1,n="",i=t,s=void 0,a=void 0,c=void 0,u=void 0,p=void 0,l=void 0,f=void 0,d="";function h(t){c&&c.classList.remove(e.hasFocusClass),void 0!==t?((c=t).classList.add(e.hasFocusClass),r&&(t.offsetTop<t.offsetParent.scrollTop||t.offsetTop>t.offsetParent.scrollTop+t.offsetParent.clientHeight-t.clientHeight)&&t.dispatchEvent(new CustomEvent("custom-select:focus-outside-panel",{bubbles:!0}))):c=void 0}function v(t){u&&(u.classList.remove(e.isSelectedClass),u.removeAttribute("id"),a.removeAttribute("aria-activedescendant")),void 0!==t?(t.classList.add(e.isSelectedClass),t.setAttribute("id","customSelect-"+n+"-selectedOption"),a.setAttribute("aria-activedescendant","customSelect-"+n+"-selectedOption"),u=t,a.children[0].textContent=u.customSelectOriginalOption.text):(u=void 0,a.children[0].textContent=""),h(t)}function y(t){var e=[].indexOf.call(i.options,c.customSelectOriginalOption);i.options[e+t]&&h(i.options[e+t].customSelectCstOption)}function g(t){if(t||void 0===t){var n=document.querySelector(".customSelect."+e.isOpenClass);n&&(n.customSelect.open=!1),s.classList.add(e.isOpenClass),s.classList.add(e.isOpenClass),a.setAttribute("aria-expanded","true"),u&&(p.scrollTop=u.offsetTop),s.dispatchEvent(new CustomEvent("custom-select:open")),r=!0}else s.classList.remove(e.isOpenClass),a.setAttribute("aria-expanded","false"),r=!1,h(u),s.dispatchEvent(new CustomEvent("custom-select:close"));return r}function m(t){t.target===a||a.contains(t.target)?r?g(!1):g():t.target.classList&&t.target.classList.contains(e.optionClass)&&p.contains(t.target)?(v(t.target),u.customSelectOriginalOption.selected=!0,g(!1),i.dispatchEvent(new CustomEvent("change"))):t.target===i?a!==document.activeElement&&i!==document.activeElement&&a.focus():r&&!s.contains(t.target)&&g(!1)}function b(t){t.target.classList&&t.target.classList.contains(e.optionClass)&&h(t.target)}function w(t){if(r)switch(t.keyCode){case 13:case 32:v(c),u.customSelectOriginalOption.selected=!0,i.dispatchEvent(new CustomEvent("change")),g(!1);break;case 27:g(!1);break;case 38:y(-1);break;case 40:y(1);break;default:if(t.keyCode>=48&&t.keyCode<=90){f&&clearTimeout(f),f=setTimeout((function(){d=""}),1500),d+=String.fromCharCode(t.keyCode);for(var e=0,n=i.options.length;e<n;e++)if(i.options[e].text.toUpperCase().substr(0,d.length)===d){h(i.options[e].customSelectCstOption);break}}}else 40!==t.keyCode&&38!==t.keyCode&&32!==t.keyCode||g()}function _(){var t=i.selectedIndex;v(-1===t?void 0:i.options[t].customSelectCstOption)}function S(t){var e=t.currentTarget,r=t.target;r.offsetTop<e.scrollTop?e.scrollTop=r.offsetTop:e.scrollTop=r.offsetTop+r.clientHeight-e.clientHeight}function P(){document.addEventListener("click",m),p.addEventListener("mouseover",b),p.addEventListener("custom-select:focus-outside-panel",S),i.addEventListener("change",_),s.addEventListener("keydown",w)}function x(){document.removeEventListener("click",m),p.removeEventListener("mouseover",b),p.removeEventListener("custom-select:focus-outside-panel",S),i.removeEventListener("change",_),s.removeEventListener("keydown",w)}function C(t){var r=t,n=[];if(void 0===r.length)throw new TypeError("Invalid Argument");for(var o=0,i=r.length;o<i;o++)if(r[o]instanceof HTMLElement&&"OPTGROUP"===r[o].tagName.toUpperCase()){var s=document.createElement("div");s.classList.add(e.optgroupClass),s.setAttribute("data-label",r[o].label),s.customSelectOriginalOptgroup=r[o],r[o].customSelectCstOptgroup=s;for(var a=C(r[o].children),c=0,u=a.length;c<u;c++)s.appendChild(a[c]);n.push(s)}else{if(!(r[o]instanceof HTMLElement&&"OPTION"===r[o].tagName.toUpperCase()))throw new TypeError("Invalid Argument");var p=document.createElement("div");p.classList.add(e.optionClass),p.textContent=r[o].text,p.setAttribute("data-value",r[o].value),p.setAttribute("role","option"),p.customSelectOriginalOption=r[o],r[o].customSelectCstOption=p,r[o].selected&&v(p),n.push(p)}return n}function O(t,e,r){var n=void 0;if(void 0===r||r===i)n=p;else{if(!(r instanceof HTMLElement&&"OPTGROUP"===r.tagName.toUpperCase()&&i.contains(r)))throw new TypeError("Invalid Argument");n=r.customSelectCstOptgroup}var o=t instanceof HTMLElement?[t]:t;if(e)for(var s=0,a=o.length;s<a;s++)n===p?i.appendChild(o[s]):n.customSelectOriginalOptgroup.appendChild(o[s]);for(var c=C(o),u=0,l=c.length;u<l;u++)n.appendChild(c[u]);return o}(s=document.createElement("div")).classList.add(e.containerClass,"customSelect"),(a=document.createElement("span")).className=e.openerClass,a.setAttribute("role","combobox"),a.setAttribute("aria-autocomplete","list"),a.setAttribute("aria-expanded","false"),a.innerHTML="<span>\n   "+(-1!==i.selectedIndex?i.options[i.selectedIndex].text:"")+"\n   </span>",p=document.createElement("div");for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",E=0;E<5;E++)n+=I.charAt(Math.floor(Math.random()*I.length));return p.id="customSelect-"+n+"-panel",p.className=e.panelClass,p.setAttribute("role","listbox"),a.setAttribute("aria-owns",p.id),O(i.children,!1),s.appendChild(a),i.parentNode.replaceChild(s,i),s.appendChild(i),s.appendChild(p),document.querySelector('label[for="'+i.id+'"]')?l=document.querySelector('label[for="'+i.id+'"]'):"LABEL"===s.parentNode.tagName.toUpperCase()&&(l=s.parentNode),void 0!==l&&(l.setAttribute("id","customSelect-"+n+"-label"),a.setAttribute("aria-labelledby","customSelect-"+n+"-label")),i.disabled?s.classList.add(e.isDisabledClass):(a.setAttribute("tabindex","0"),i.setAttribute("tabindex","-1"),P()),s.customSelect={get pluginOptions(){return e},get open(){return r},set open(t){g(t)},get disabled(){return i.disabled},set disabled(t){!function(t){t&&!i.disabled?(s.classList.add(e.isDisabledClass),i.disabled=!0,a.removeAttribute("tabindex"),s.dispatchEvent(new CustomEvent("custom-select:disabled")),x()):!t&&i.disabled&&(s.classList.remove(e.isDisabledClass),i.disabled=!1,a.setAttribute("tabindex","0"),s.dispatchEvent(new CustomEvent("custom-select:enabled")),P())}(t)},get value(){return i.value},set value(t){var e,r;e=t,(r=i.querySelector("option[value='"+e+"']"))||(r=o(i.options,1)[0]),r.selected=!0,v(i.options[i.selectedIndex].customSelectCstOption)},append:function(t,e){return O(t,!0,e)},insertBefore:function(t,e){return function(t,e){var r=void 0;if(e instanceof HTMLElement&&"OPTION"===e.tagName.toUpperCase()&&i.contains(e))r=e.customSelectCstOption;else{if(!(e instanceof HTMLElement&&"OPTGROUP"===e.tagName.toUpperCase()&&i.contains(e)))throw new TypeError("Invalid Argument");r=e.customSelectCstOptgroup}var n=C(t.length?t:[t]);return r.parentNode.insertBefore(n[0],r),e.parentNode.insertBefore(t.length?t[0]:t,e)}(t,e)},remove:function(t){var e=void 0;if(t instanceof HTMLElement&&"OPTION"===t.tagName.toUpperCase()&&i.contains(t))e=t.customSelectCstOption;else{if(!(t instanceof HTMLElement&&"OPTGROUP"===t.tagName.toUpperCase()&&i.contains(t)))throw new TypeError("Invalid Argument");e=t.customSelectCstOptgroup}e.parentNode.removeChild(e);var r=t.parentNode.removeChild(t);return _(),r},empty:function(){for(var t=[];i.children.length;)p.removeChild(p.children[0]),t.push(i.removeChild(i.children[0]));return v(),t},destroy:function(){for(var t=0,e=i.options.length;t<e;t++)delete i.options[t].customSelectCstOption;for(var r=i.getElementsByTagName("optgroup"),n=0,o=r.length;n<o;n++)delete r.customSelectCstOptgroup;return x(),s.parentNode.replaceChild(i,s)},opener:a,select:i,panel:p,container:s},i.customSelect=s.customSelect,s.customSelect}},function(t,e){try{var r=new window.CustomEvent("test");if(r.preventDefault(),!0!==r.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var n=function(t,e){var r,n;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},(r=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n=r.preventDefault,r.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},r};n.prototype=window.Event.prototype,window.CustomEvent=n}},function(t,e){t.exports='<div class="form-section"><div id="@@typeSelectorId@@" class="type-selector"><label class="type-selector--item"><input type="radio" name="method" value="text" checked="checked"> <span class="type-selector--label"><svg width="24" height="24"><use href="@@keyboardIconUrl@@" xlink:href="@@keyboardIconUrl@@"></use></svg> <span>@@labelType@@</span></span></label> <label class="type-selector--item"><input type="radio" name="method" value="image"> <span class="type-selector--label"><svg width="24" height="24"><use href="@@imageIconUrl@@" xlink:href="@@imageIconUrl@@"></use></svg> <span>@@labelImage@@</span></span></label></div></div><div id="@@selectContainerId@@" class="form-section"></div><div id="@@textContainerId@@" class="form-section"></div><div class="form-section"><a id="@@btnAddFileId@@" class="btn--add-file form-control display-none" href="javascript:void(0);"><svg width="24" height="24"><use href="@@plusIconUrl@@" xlink:href="@@plusIconUrl@@"></use></svg> <span>@@labelUploadImage@@</span></a></div><div class="form-section"><div id="@@fileInfoContainerId@@" class="form-control file-info--container display-none"><b id="@@fileNameId@@" class="file-info--name"></b> <a id="@@btnRemoveId@@" class="file-info--remove-file-btn" href="javascript:void(0);">@@iconClose@@</a></div></div><input class="display-none" id="@@inputFileId@@" type="file" accept="@@accept@@" multiple="false">'},function(t,e){t.exports='<div id="@@textContainerId@@" class="form-section"></div><div class="form-section"><div class="form-group file-group"><a id="@@btnAddFileId@@" class="btn--add-file form-control" href="javascript:void(0);">@@labelTryOrAdd@@</a> <span id="@@fileInfoContainerId@@" class="form-control file-info--container display-none"><a id="@@btnRemoveId@@" class="file-info--remove-file-btn" href="javascript:void(0);">@@iconClose@@ </a><b id="@@fileNameId@@" class="file-info--name"></b></span></div><span class="aim-icon-small">@@iconAimSmall@@</span></div><div id="@@selectContainerId@@" class="form-section"></div><input class="display-none" id="@@inputFileId@@" type="file" accept="@@accept@@" multiple="false">'},function(t,e){t.exports='<div id="@@selectContainerId@@" class="app-header--select-pages display-none">@@iconOk@@ <a id="@@btnToggleId@@" href="javascript:void(0)" class="app-header--select-toggle" draggable="false"></a></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="page-item"><div class="page-item--thumb"><div class="page-item--content"><div id="@@imageContainerId@@" class="page-item--image-container"><img id="@@imageId@@" class="page-item--image" width="@@imageWidth@@" height="@@imageHeight@@" alt=""><div id="@@pageBoxId@@" class="page-item--pages-box display-none"><div class="page-item--pages-counter"><div id="@@totalPagesId@@" class="page-item--total-pages-count">...</div><div class="page-item--total-pages-label">@@totalPagesLabel@@</div></div></div><div class="page-item--lock-box">@@lockBoxIcon@@</div><div id="@@iconBoxId@@" class="page-item--icon-box"></div></div></div><div id="@@tooltipId@@"><div id="@@nameId@@" class="page-item--name" title="@@name@@">@@name@@</div></div></div><div id="@@actionsLeftId@@" class="page-item--actions page-item--actions-left"><span id="@@btnUnlockId@@" class="page-item--action page-item--btn-unlock">@@btnUnlockIcon@@</span></div><div id="@@actionsRightId@@" class="page-item--actions page-item--actions-right"><span id="@@pageNumberId@@" class="page-item--action page-item--page-number display-none">0</span> <span id="@@deleteId@@" class="page-item--action page-item--btn-delete display-none">@@btnDeleteIcon@@</span> <span id="@@zoomId@@" class="page-item--action page-item--btn-zoom display-none">@@btnZoomIcon@@</span> <span id="@@rotateRightId@@" class="page-item--action page-item--btn-rotate-right display-none">@@btnRotateRightIcon@@</span> <span id="@@rotateLeftId@@" class="page-item--action page-item--btn-rotate-left display-none">@@btnRotateLeftIcon@@</span></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="rotate-pages-form"><span id="@@btnRotateLeftId@@" class="btn-rotate btn-rotate-left tooltip-element">@@btnRotateLeftIcon@@</span> <span id="@@btnRotateRightId@@" class="btn-rotate btn-rotate-right tooltip-element">@@btnRotateRightIcon@@</span> <a id="@@btnResetId@@" class="btn-reset display-none" href="javascript:void 0">@@btnResetLabel@@</a></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="app-settings"><a href="javascript:void(0)" class="app-settings--btn">@@settingsIcon@@</a></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="dialog-settings"><div class="dialog-settings--header"><div class="dialog-settings--title">@@title@@</div><div id="@@btnCloseId@@" class="dialog-settings--btn-close">×</div></div><div class="dialog-settings--body"><div id="@@formContainerId@@" class="dialog-settings--form-list"></div></div><div class="dialog-settings--footer"><a id="@@btnOkId@@" class="dialog-settings--btn-ok">@@btnOkLabel@@</a></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="error-dialog"><div class="error-dialog--header"><div class="error-dialog--candy">@@candyIcon@@</div><div id="@@btnCloseId@@" class="error-dialog--close">×</div><div class="error-dialog--title">@@title@@</div><div class="error-dialog--message">@@message@@</div></div><div class="error-dialog--body"><a id="@@btnOkId@@" class="error-dialog--btn-ok-close">@@btnOkLabel@@</a></div><div class="error-dialog--footer"><div class="error-dialog--or-try only-windows"><span class="">@@tryLabel@@</span></div><div class="windows-ads only-windows">@@tryCandyDesktopLabel@@</div></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="error-dialog error-dialog_free"><div class="error-dialog--header"><div id="@@btnCloseId@@" class="error-dialog--close">×</div><div class="error-dialog--icon">@@freeLimitIcon@@</div><div class="error-dialog--title">@@title@@</div><div class="error-dialog--message">@@message@@</div></div><div class="error-dialog--body"><a id="@@btnSignupId@@" href="@@btnSignupUrl@@" class="error-dialog--btn-ok-close">@@btnSignupLabel@@</a></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="enter-password-dialog"><div class="enter-password-dialog--header"><div id="@@btnCloseId@@" class="enter-password-dialog--btn-close">×</div><span class="enter-password-dialog--title">@@title@@</span></div><div class="enter-password-dialog--body"><div id="@@pwContainerId@@"></div></div><div class="enter-password-dialog--footer"><a id="@@btnOkId@@" class="enter-password-dialog--btn-unlock">@@btnLabelUnlock@@</a></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="unlock-file--item"><div class="unlock-file--view"><div class="unlock-file--icon">@@pdfIcon@@</div></div><div class="unlock-file--form"><div id="@@passwordContainerId@@"></div><span id="@@deleteId@@" class="display-none unlock-file--item-btn-delete"><svg width="25" height="25"><use href="@@closeIconUrl@@" xlink:href="@@closeIconUrl@@"></use></svg></span></div></div><hr class="unlock-file--separator">'},function(t,e){t.exports='<div id="@@componentId@@" class="unlock-files-dialog"><div class="unlock-files-dialog--header"><div id="@@btnCloseId@@" class="unlock-files-dialog--btn-close">×</div><div class="unlock-files-dialog--title">@@title@@</div></div><div class="unlock-files-dialog--body"><div id="@@listId@@" class="unlock-files-dialog--list"></div></div><div class="unlock-files-dialog--footer"><a id="@@btnOkId@@" class="unlock-files-dialog--btn-unlock">@@btnLabelUnlock@@</a></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="global-drop-zone"><div class="global-dropzone-box"><div class="global-dropzone-label">@@dropzoneLabel@@</div></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="drop-zone app-state--inner"><div id="@@dropZoneContentId@@" class="drop-zone--inner"><div class="drop-zone--content"><div class="drop-zone--buttons"><a id="@@btnAddLocalId@@" class="btn btn-add-local addbutton">+ @@btnAddLocalLabel@@</a><div class="drop-zone--import-buttons"><a id="@@btnAddGdriveId@@" class="btn btn-picker" title="From Google Drive"><span class="btn-icon">@@gDriveIcon@@</span> <span class="btn-text">@@gDriveLabel@@</span> </a><a id="@@btnAddDropBoxId@@" class="btn btn-picker" title="From Dropbox"><span class="btn-icon">@@dropBoxIcon@@</span> <span class="btn-text">@@dropBoxLabel@@</span></a></div></div><div class="drop-zone--text">@@dragAndDropText@@</div></div></div></div>'},function(t,e){t.exports='<div class="pending-component app-state--inner" id="@@componentId@@"><div class="lds-facebook"><div class="lds-facebook--item"></div><div class="lds-facebook--item"></div><div class="lds-facebook--item"></div></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="app-queue app-state--inner"><div class="queue-label" id="@@timerId@@">@@queueLabel@@</div><div id="@@canvasContainerId@@" class="queue-icons"></div><div class="windows-ads only-windows">@@windowsIcon@@ @@windowsMessage@@</div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="progress-view app-state--inner"><div class="progress-content"><div class="progress-percent"><span id="@@percentValueId@@">0</span>%</div><div class="progress-uploaded">@@uploadedMessage@@</div><div class="progress-bar"><div class="progress-fill" id="@@percentFillId@@"></div></div></div><div class="windows-ads only-windows">@@windowsIcon@@ @@windowsMessage@@</div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="job-animation app-state--inner"><div class="job-animation--label">@@jobLabel@@ <span id="@@progressPercentId@@"></span></div><div id="@@canvasContainerId@@" class="job-animation--container job-animation--canvas" style="display: none"></div><div id="@@iconsContainerId@@" class="job-animation--container job-animation--icons" style="display: none"><div class="job-animation-icon">@@convertFromIcon@@</div><div class="job-animation-arrows">@@arrowsIcon@@</div><div class="job-animation-icon">@@convertToIcon@@</div></div><div class="windows-ads only-windows">@@windowsIcon@@ @@windowsMessage@@</div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="zoom-dialog"><span id="@@btnCloseId@@" class="zoom-dialog--btn-close dialog--btn-close">×</span><div id="@@workCanvasContainerId@@" class="zoom-dialog--canvas-container"><div class="zoom-dialog--canvas-wrapper"><canvas id="@@workCanvasId@@" class="zoom-dialog--canvas"></canvas></div></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="file-viewer file-viewer--container app-state--inner"><div id="@@headerContainerId@@" class="file-viewer--header"></div><div id="@@viewerContainerId@@" class="file-viewer--content"></div><div id="@@footerContainerId@@" class="file-viewer--footer"></div><canvas width="@@canvasWidth@@" height="@@canvasHeight@@" id="@@workCanvasId@@" class="display-none"></canvas></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="page-item"><div class="page-item--thumb"><div class="page-item--content"><div id="@@imageContainerId@@" class="page-item--image-container"><div style="margin: 0; padding: 0; outline: none; border: none;"><img id="@@imageId@@" class="page-item--image" width="@@imageWidth@@" height="@@imageHeight@@" alt=""></div><div class="page-item--lock-box">@@lockBoxIcon@@</div></div></div></div><div id="@@actionsId@@" class="page-item--actions"><span id="@@btnUnlockId@@" class="page-item--action page-item--btn-unlock">@@btnUnlockIcon@@</span></div></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="app-footer"><div id="@@popoverContainerId@@" class="display-none"></div><div id="@@formContainerId@@" class="actions-container display-none"><a id="@@btnToDocId@@" class="btn btn-converter btn--blue" href="javascript:void(0)">@@btnToDoc@@</a> <a id="@@btnToDocXId@@" class="btn btn-converter btn--blue" href="javascript:void(0)">@@btnToDocX@@</a> <a id="@@btnToJpgId@@" class="btn btn-converter btn--blue" href="javascript:void(0)">@@btnToJpg@@</a></div><a id="@@btnNextId@@" class="btn btn-converter btn--blue display-none"></a></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="per-page-viewer per-page-viewer--container app-state--inner display-none"><div id="@@headerContainerId@@" class="per-page-viewer--header"></div><div id="@@viewerContainerId@@" class="per-page-viewer--content"></div><div id="@@footerContainerId@@" class="per-page-viewer--footer"></div><canvas width="120" height="160" id="@@workCanvasId@@" class="display-none"></canvas></div>'},function(t,e){t.exports='<div id="@@componentId@@" class="error-view--container"><div class="error-view--error-content"><div class="error-view--error-icon-container">@@iconAttention@@</div><div class="error-view--error-text-container"><p>@@message@@</p></div><div class="error-view--error-actions">@@actions@@</div></div></div>'},function(t,e){t.exports='<span class="error-view--error-link-container"><span class="error-view--icon">@@iconRotate@@</span> <a id="@@btnStartOverId@@" href="javascript:void(0)" class="error-view--link error-start-over">@@labelStartOver@@</a> </span><span class="error-view--error-link-container"><span class="error-view--icon">@@iconBug@@</span> <a href="@@errUrl@@" class="error-view--link error-report-a-bug">@@labelReportBug@@</a></span>'},function(t,e){t.exports='<span class="error-view--error-link-container"><span class="error-view--icon">@@iconRotate@@</span> <a id="@@btnStartOverId@@" href="javascript:void(0)" class="error-view--link error-start-over">@@labelStartOver@@</a></span>'},function(t,e){var r=function(t){for(var e=t.split(",")[0].split(":")[1].split(";")[0],r=atob(t.split(",")[1]),n=r.length,o=new window.ArrayBuffer(n),i=new window.Uint8Array(o),s=0;s<n;s++)i[s]=r.charCodeAt(s);return new Blob([i],{type:e})},n=void 0!==window.HTMLCanvasElement&&void 0!==window.atob&&void 0!==window.Blob&&void 0!==window.ArrayBuffer&&void 0!==window.Uint8Array;t.exports=r,t.exports.init=function(){if(t.exports.supported){var e=window.HTMLCanvasElement.prototype;!e.toBlob&&e.toDataURL&&(e.toBlob=function(t,e,n){t(r(this.toDataURL(e,n)))})}},t.exports.supported=n},function(t,e,r){r.r(e),r.d(e,"CandyApp",(function(){return Mc}));r(175),r(361),r(364),r(366),r(398),r(399);var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function o(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function i(t){return"function"==typeof t}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function c(t){setTimeout((function(){throw t}),0)}var u={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},p=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function l(t){return null!==t&&"object"==typeof t}var f=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),d=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(i(n))try{n.call(this)}catch(t){e=t instanceof f?h(t.errors):[t]}if(p(o)){s=-1;for(var a=o.length;++s<a;){var c=o[s];if(l(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof f?e=e.concat(h(t.errors)):e.push(t)}}}if(e)throw new f(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof t){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function h(t){return t.reduce((function(t,e){return t.concat(e instanceof f?e.errors:e)}),[])}var v=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),y=function(t){function e(r,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=u;break;case 1:if(!r){i.destination=u;break}if("object"==typeof r){r instanceof e?(i.syncErrorThrowable=r.syncErrorThrowable,i.destination=r,r.add(i)):(i.syncErrorThrowable=!0,i.destination=new g(i,r));break}default:i.syncErrorThrowable=!0,i.destination=new g(i,r,n,o)}return i}return o(e,t),e.prototype[v]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(d),g=function(t){function e(e,r,n,o){var s,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return i(r)?s=r:r&&(s=r.next,n=r.error,o=r.complete,r!==u&&(i((c=Object.create(r)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=n,a._complete=o,a}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;c(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(y);var m=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function b(t){return t}function w(t){return 0===t.length?b:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var _=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=function(t,e,r){if(t){if(t instanceof y)return t;if(t[v])return t[v]()}return t||e||r?new y(t,e,r):new y(u)}(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,r=e.closed,n=e.destination,o=e.isStopped;if(r||o)return!1;t=n&&n instanceof y?n:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=S(e))((function(e,n){var o;o=r.subscribe((function(e){try{t(e)}catch(t){n(t),o&&o.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[m]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:w(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=S(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function S(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var P=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),x=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(d),C=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return o(e,t),e}(y),O=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[v]=function(){return new C(this)},e.prototype.lift=function(t){var e=new I(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new P;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new P;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new P;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new P;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new P;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new x(this,t))},e.prototype.asObservable=function(){var t=new _;return t.source=this,t},e.create=function(t,e){return new I(t,e)},e}(_),I=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):d.EMPTY},e}(O),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(y),k=function(t){function e(e,r,n){var o=t.call(this)||this;return o.parent=e,o.outerValue=r,o.outerIndex=n,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(y),T=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function j(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var D=j(),M=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function A(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var F=function(t){if(t&&"function"==typeof t[m])return n=t,function(t){var e=n[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(M(t))return T(t);if(A(t))return r=t,function(t){return r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,c),t};if(t&&"function"==typeof t[D])return e=t,function(t){for(var r=e[D]();;){var n=void 0;try{n=r.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add((function(){r.return&&r.return()})),t};var e,r,n,o=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function L(t,e,r,n,o){if(void 0===o&&(o=new k(t,r,n)),!o.closed)return e instanceof _?e.subscribe(o):F(e)(o)}function R(t){return function(e){return e.lift(new B(t))}}var V,B=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var r=new N(t),n=L(r,this.notifier);return n&&!r.seenValue?(r.add(n),e.subscribe(r)):r},t}(),N=function(t){function e(e){var r=t.call(this,e)||this;return r.seenValue=!1,r}return o(e,t),e.prototype.notifyNext=function(t,e,r,n,o){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(E);!function(t){t.init="init",t.dropZone="dropZone",t.limits="limits",t.readFiles="readFiles",t.pending="pending",t.checkFiles="checkFiles",t.selectViewerState="selectViewerState",t.instantViewer="instantViewer",t.editViewer="editViewer",t.fileViewer="fileViewer",t.pageViewer="pageViewer",t.queueState="queueState",t.uploadState="uploadState",t.runJobState="runJobState",t.errorViewer="errorViewer",t.destroy="destroy"}(V||(V={}));var z=function(){function t(t){this._val=t}return Object.defineProperty(t,"empty",{get:function(){return"00000000-0000-0000-0000-000000000000"},enumerable:!0,configurable:!0}),t.isGuid=function(e){return e instanceof t},t.isEmpty=function(e){return!e||e.toString()===t.empty},t.create=function(e){return new t(e.toString())},t.createQuickGuid=function(){return t.create(t._createQuickGuid())},t.createQuickGuidAsString=function(){return t.create(t._createQuickGuid()).toString()},t.createGuid=function(){return t.create(t._createGuid())},t.createEmptyGuid=function(){return t.create(t.empty)},t._createQuickGuid=function(){return"c"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t._createGuid=function(){var t=(new Date).getTime();return"cxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:3&r|8).toString(16)}))},t.prototype.toString=function(){return this._val||""},t}(),U=function(){function t(){this.css={displayNone:"display-none",boxShadow:"box-shadow",perPageViewerSingle:"per-page-viewer--single"}}return t.prototype.cssToSelector=function(t){return"."+t},t.prototype.idToSelector=function(t){return"#"+t},t.prototype.getById=function(t){return $(this.idToSelector(t))},t.prototype.unbindRecursive=function(t){t&&(t.children().unbind(),t.unbind())},t.prototype.removeFromDom=function(t){t&&t.remove()},t.prototype.destroyComponent=function(t){if(t){var e=this.getById(t);e&&e.length&&(this.unbindRecursive(e),this.removeFromDom(e))}},t.prototype.toggleDisabled=function(t,e){e?t.attr("disabled","disabled"):t.removeAttr("disabled")},t.prototype.isDisabled=function(t){return!!t.attr("disabled")},t.prototype.getMatrixFromCss=function(t){return(t.css("transform")||"").replace(/^matrix(3d)?\((.*)\)$/,"$2").split(/, /).map((function(t){return parseFloat(t)}))},t.prototype.getImageSize=function(t){return{width:+t.attr("width"),height:+t.attr("height")}},t.prototype.setImageSize=function(t,e){t.attr("width",e.width).attr("height",e.height)},t.prototype.scrollTop=function(t){$(window).scrollTop(t)},t.prototype.scrollToStart=function(){this.scrollTop(0)},t.prototype.scrollMoreThan=function(t){return $(window).scrollTop()>t},t}(),H=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new P;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(O);function G(t,e){return function(r){return r.lift(new J(t,e))}}var J=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new W(t,this.predicate,this.thisArg))},t}(),W=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.predicate=r,o.thisArg=n,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(y),q=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return o(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return o(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(d)),Z=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),K=new(function(t){function e(r,n){void 0===n&&(n=Z.now);var o=t.call(this,r,(function(){return e.delegate&&e.delegate!==o?e.delegate.now():n()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return o(e,t),e.prototype.schedule=function(r,n,o){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,o):t.prototype.schedule.call(this,r,n,o)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(Z))(q);function Q(t,e){return void 0===e&&(e=K),function(r){return r.lift(new Y(t,e))}}var Y=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new X(t,this.dueTime,this.scheduler))},t}(),X=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.dueTime=r,o.scheduler=n,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return o(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(tt,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(y);function tt(t){t.debouncedNext()}var et,rt,nt=r(59),ot=r.n(nt),it=function(){function t(){}return t.asJson=function(t){return t?JSON.parse(JSON.stringify(t)):{}},t.asTypeRecursion=function(t){var e=this;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t)){var r=[];return t.forEach((function(t){r.push(e.asTypeRecursion(t))})),r}if(t instanceof ot.a)return new ot.a([t],t.name,{type:t.type});var n=new t.constructor;for(var o in t)t.hasOwnProperty(o)&&(n[o]=this.asTypeRecursion(t[o]));return n},t}();!function(t){t.portrait="portrait",t.landscape="landscape",t.any="any"}(et||(et={})),function(t){t.desktop="desktop",t.mobile="mobile",t.tablet="tablet",t.handset="handset"}(rt||(rt={}));var st,at={XSmall:"(max-width: 599.99px)",Small:"(min-width: 600px) and (max-width: 959.99px)",Medium:"(min-width: 960px) and (max-width: 1279.99px)",Large:"(min-width: 1280px) and (max-width: 1919.99px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.99px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.99px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",TabletPortrait:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"},ct=function(t,e,r,n){switch(void 0===n&&(n=et.any),this.name=t,this.min=e,this.max=r,this.orientation=n,this.media=at[t],this.media){case at.XSmall:case at.Small:case at.Handset:case at.HandsetPortrait:case at.HandsetLandscape:this.deviceType=rt.mobile;break;case at.Medium:case at.Tablet:case at.TabletPortrait:case at.TabletLandscape:this.deviceType=rt.tablet;break;case at.Large:case at.XLarge:case at.Web:case at.WebPortrait:case at.WebLandscape:default:this.deviceType=rt.desktop}},ut=(new ct("XSmall",1,599.99),new ct("Small",600,959.99),new ct("Medium",960,1279.99),new ct("Large",1280,1919.99),new ct("XLarge",1920,8e3),new ct("Handset",1,599.99,et.portrait),new ct("Handset",1,959.99,et.landscape),new ct("HandsetPortrait",1,599.99,et.portrait),new ct("HandsetLandscape",1,959.99,et.landscape),new ct("Tablet",600,839.99,et.portrait),new ct("Tablet",960,1279.99,et.landscape),new ct("TabletPortrait",600,839.99,et.portrait),new ct("TabletLandscape",960,1279.99,et.landscape),new ct("Web",840,8e3,et.portrait),new ct("Web",1280,8e3,et.landscape),new ct("WebPortrait",840,8e3,et.portrait),new ct("WebLandscape",1280,8e3,et.landscape),function(){return(ut=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)});!function(t){t.mobileMax="mobileMax",t.tabletMin="tabletMin",t.tabletMax="tabletMax",t.desktopMin="desktopMin"}(st||(st={}));var pt,lt=function(){function t(){}return t.prototype.maxWidth=function(t){return this.buildProp(!1,!0,t)},t.prototype.minWidth=function(t){return this.buildProp(!0,!0,t)},t.prototype.maxHeight=function(t){return this.buildProp(!1,!1,t)},t.prototype.minHeight=function(t){return this.buildProp(!0,!1,t)},t.prototype.matchMedia=function(t){return window.matchMedia(t).matches},t.prototype.buildProp=function(t,e,r){return"("+(t?"min":"max")+"-"+(e?"width":"height")+": "+r+"px)"},t}(),ft=function(){function t(){this.css={isMobile:"media--is-mobile",isTablet:"media--is-table",isDesktop:"media--is-desktop"},this.media=[],this.listeners=[],this.customMediaPoints={mobileMax:{x:599.99,y:599.99},tabletMin:{x:600,y:600},tabletMax:{x:1279.99,y:659.99},desktopMin:{x:1280,y:660}},this.change=new H(null),this.queryHelper=new lt}return Object.defineProperty(t.prototype,"change$",{get:function(){return this.change.asObservable().pipe(G((function(t){return!!t})),Q(1))},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.subscribe()},t.prototype.dispose=function(){},t.prototype.isDesktop=function(){var t=this.getSize(),e=this.customMediaPoints.desktopMin;return t.x>=e.x&&t.y>=e.y},t.prototype.isTablet=function(){var t=this.getSize(),e=this.customMediaPoints.tabletMin,r=this.customMediaPoints.tabletMax;return t.x>e.x&&t.y>e.y&&t.x<r.x&&t.y<r.y},t.prototype.isMobile=function(){var t=this.getSize(),e=this.customMediaPoints.mobileMax;return t.x<e.x||t.y<e.y},t.prototype.isDesktopByWidth=function(){var t=this.customMediaPoints.desktopMin,e=this.queryHelper.minWidth(t.x);return this.queryHelper.matchMedia(e)},t.prototype.isMobileByWidth=function(){var t=this.customMediaPoints.mobileMax,e=this.queryHelper.maxWidth(t.x);return this.queryHelper.matchMedia(e)},t.prototype.isTabletByWidth=function(){var t=this.customMediaPoints.tabletMin,e=this.customMediaPoints.tabletMax,r=this.queryHelper.minWidth(t.x)+" and "+this.queryHelper.maxWidth(e.x);return this.queryHelper.matchMedia(r)},t.prototype.rebuildMedia=function(t){var e=this;this.media&&(this.listeners.forEach((function(t){e.media.forEach((function(e){return e.removeListener(t)}))})),this.listeners.length=0,this.media.length=0),Object.keys(t).forEach((function(r){var n=t[r];n.query.split(",").map((function(t){return t.trim()})).forEach((function(t){e.customMediaPoints[r].x=n.x,e.customMediaPoints[r].y=n.y,e.media.push(e.addMedia(t,r,n))}))}))},t.prototype.widthLessThan=function(t){return this.queryHelper.matchMedia(this.queryHelper.maxWidth(t))},t.prototype.addCustomMedia=function(t,e,r){return!this.customMediaPoints[e]&&(this.customMediaPoints[e]=ut(ut({},r),{query:t}),this.addMedia(t,e,this.customMediaPoints[e]),!0)},t.prototype.handle=function(t){var e=this.getSize(),r=this.getOrientation(e),n=ut(ut({},e),{orientation:r}),o=it.asJson(ut(ut({},n),{data:t}));o.isDesktop=this.isDesktop(),o.isTablet=this.isTablet(),o.isMobile=this.isMobile(),o.isDesktopByWidth=this.isDesktopByWidth(),this.change.next(o)},t.prototype.subscribe=function(){var t=this,e=this.customMediaPoints,r=Object.assign({customMobile:"(max-width: "+e.mobileMax.x+"px),(max-height:"+e.mobileMax.y+"px)",customTabletMin:"(min-width:"+e.tabletMin.x+"px) and (min-height:"+e.tabletMin.y+"px)",customTabletMax:"(max-width:"+e.tabletMax.x+"px) and (max-height:"+e.tabletMax.y+"px)",desktopMin:"(min-width:"+e.desktopMin.x+"px) and (min-height:"+e.desktopMin.y+"px)"},at);Object.keys(r).forEach((function(n){r[n].split(",").map((function(t){return t.trim()})).forEach((function(r){return t.media.push(t.addMedia(r,n,{query:r,x:e[n]?e[n].x:void 0,y:e[n]?e[n].y:void 0}))}))}))},t.prototype.getOrientation=function(t){return t.x>t.y?et.landscape:et.portrait},t.prototype.getSize=function(){return{x:window.innerWidth,y:window.innerHeight}},t.prototype.addMedia=function(t,e,r){var n=this,o=window.matchMedia(t),i=function(t){return n.handle({data:ut(ut({},t),{point:r}),key:e})};return this.listeners.push(i),o.addListener(i),this.handle({data:{media:t,point:r},key:e}),o},t}();!function(t){t.en="en",t.de="de",t.it="it",t.fr="fr",t.es="es",t.pt="pt",t.nl="nl",t.sv="sv",t.id="id",t.zhHans="zh-Hans",t.zhTW="zh-TW",t.ja="ja",t.ko="ko",t.tr="tr",t.ru="ru",t.th="th",t.ar="ar",t.pl="pl"}(pt||(pt={}));var dt,ht,vt,yt,gt,mt,bt,wt,_t,St,Pt,xt,Ct,Ot=function(){function t(){this.translates={}}return t.prototype.setTranslates=function(t,e){t||console.error("lang was not set to instance '"+pt.en+"' will be set as Default",{lang:t,t1:e}),this.lang=t||pt.en,this.translates=e},t.prototype.get=function(t,e,r,n){var o=this.getLocale(),i=this.translates[o+"-"+t];return i&&e&&(i=i[e]),i&&r&&(i=i[r]),i&&n&&(i=i[n]),i||t},t.prototype.has=function(t){var e=this.getLocale();return!!this.translates[e+"-"+t]},t.prototype.getLocale=function(){return this.lang||navigator.language.split("-")[0]||"en"},t}();!function(t){t.png="png",t.jpg="jpg",t.jpeg="jpeg",t.bmp="bmp",t.tiff="tiff",t.tif="tif",t.gif="gif",t.jfif="jfif",t.docx="docx",t.doc="doc",t.odt="odt",t.rtf="rtf",t.ods="ods",t.xlsx="xlsx",t.xls="xls",t.xlt="xlt",t.xla="xla",t.pptx="pptx",t.ppt="ppt",t.pdf="pdf",t.epub="epub",t.djvu="djvu",t.djv="djv",t.mobi="mobi",t.fb2="fb2",t.txt="txt",t.xml="xml",t.html="html",t.htm="htm",t.chm="chm"}(dt||(dt={})),function(t){t.instant="instant",t.file="file",t.fileConverter="fileConverter",t.fileUnlock="fileUnlock",t.fileCrop="fileCrop",t.split="split",t.delete="delete",t.rotate="rotate",t.rearrange="rearrange",t.perPage="perPage",t.editPdf="editPdf"}(ht||(ht={})),function(t){t.jpgToPdf="jpg-to-pdf",t.pngToPdf="png-to-pdf",t.bmpToPdf="bmp-to-pdf",t.tiffToPdf="tiff-to-pdf",t.pdfToJpg="pdf-to-jpg",t.pdfToPng="pdf-to-png",t.pdfToBmp="pdf-to-bmp",t.pdfToTiff="pdf-to-tiff",t.mergePdf="merge-pdf",t.compressPdf="compress-pdf",t.extractText="extract-text",t.extractImages="extract-images",t.pdfOcr="pdf-ocr",t.pdfResize="resize-pdf",t.protectPdf="protect-pdf",t.editPdf="edit-pdf",t.editMetadataPdf="edit-pdf-meta",t.addPdfPageNumbers="add-page-numbers",t.addPdfHeaderAndFooter="header-footer",t.addPdfWatermark="add-watermark",t.cropPdf="crop-pdf",t.splitPdf="split-pdf",t.deletePdf="delete-pages",t.rotatePdf="rotate-pdf",t.rearrangePdf="rearrange-pdf",t.pdfConverter="pdf-converter",t.unlockPdf="unlock-pdf",t.pdfToWord="pdf-to-word",t.pdfToDocx="pdf-to-docx",t.pdfToRtf="pdf-to-rtf",t.wordToPdf="word-to-pdf",t.excelToPdf="excel-to-pdf",t.docxToPdf="docx-to-pdf",t.rtfToPdf="rtf-to-pdf",t.odtToPdf="odt-to-pdf",t.pptToPdf="ppt-to-pdf",t.htmlToPdf="html-to-pdf",t.xmlToPdf="xml-to-pdf",t.txtToPdf="txt-to-pdf",t.chmToPdf="chm-to-pdf",t.djvuToPdf="djvu-to-pdf",t.epubToPdf="epub-to-pdf",t.fb2ToPdf="fb2-to-pdf",t.mobiToPdf="mobi-to-pdf"}(vt||(vt={})),function(t){t.paperSize="paperSize",t.paperOrientation="paperOrientation",t.paperMargin="paperMargin",t.quality="quality",t.compress="compress",t.lang="lang",t.splitPdf="splitPdf",t.rotatePdf="rotatePdf",t.format="format",t.position="position"}(yt||(yt={})),function(t){t.a3="a3",t.a4="a4",t.a5="a5",t.original="original",t.usletter="usletter"}(gt||(gt={})),function(t){t.portrait="portrait",t.landscape="landscape",t.original="original"}(mt||(mt={})),function(t){t.no="no",t.small="small",t.big="big"}(bt||(bt={})),function(t){t.low="low",t.medium="medium",t.high="high"}(wt||(wt={})),function(t){t.maximum="maximum",t.recommended="recommended",t.minimum="minimum"}(_t||(_t={})),function(t){t.single="single",t.range="range",t.mergeSelected="mergeSelected",t.deleteSelected="deleteSelected"}(St||(St={})),function(t){t.all="all",t.portrait="portrait",t.landscape="landscape"}(Pt||(Pt={})),function(t){t.image="image",t.pdf="pdf",t.document="document",t.book="book",t.text="text",t.all="all"}(xt||(xt={})),function(t){t.service="service",t.object="object"}(Ct||(Ct={}));var It=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Et=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(It(arguments[e]));return t},kt=function(){function t(){if(this.services=new Map,t.instance)throw new Error("service was registrated");t.instance=this}return t.prototype.registrate=function(t,e,r){this.services.set(e,{type:e,deps:r||[],instance:null,name:t})},t.prototype.get=function(t){var e,r=this;if(this.hasService(t)){var n=this.services.get(t);if(n.instance)return n.instance;if(n.deps.length){var o=n.deps.map((function(t){return t.type===Ct.service?r.get(t.value):t.value}));n.instance=new((e=n.type).bind.apply(e,Et([void 0],o)))}else n.instance=new n.type;return n.instance}throw new Error("Service was not registrated")},t.prototype.hasService=function(t){return this.services.has(t)},t.prototype.getByName=function(t){var e=Array.from(this.services.values()).find((function(e){return e.name===t}));return e?this.get(e.type):null},t.prototype.hasServiceByName=function(t){return!!this.getByName(t)},t.start=function(e){if(t.instance)return t.instance;var r=new t;return e(r),r},t.getContainer=function(){return this.instance},t}(),Tt=function(t,e){this.code=t,this.name=e},jt=function(){function t(){}return t.create=function(){var t=kt.getContainer().getByName("TranslateService"),e=t.get("pdf-ocr-langs");return"string"==typeof e&&(console.warn("langs is not correct from server",{langs:e,translate:t}),e=[]),(e||[]).map((function(t){return new Tt(t.key,t.value)}))},t}(),Dt=function(t){this.serviceProvider=kt.getContainer().get(qi),this.helper=this.serviceProvider.domHelper,this.componentId=t||z.createQuickGuidAsString()},Mt=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),At=new _((function(t){return t.complete()}));function Ft(t){return t?function(t){return new _((function(e){return t.schedule((function(){return e.complete()}))}))}(t):At}function Lt(t){return function(e){return 0===t?Ft():e.lift(new Rt(t))}}var Rt=function(){function t(t){if(this.total=t,this.total<0)throw new Mt}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.total))},t}(),Vt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.total=r,n.count=0,n}return o(e,t),e.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},e}(y),Bt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nt=function(t){function e(e,r){var n=t.call(this,r)||this;return n.parentId=e,n.destroyEvent=new O,n}return Bt(e,t),Object.defineProperty(e.prototype,"$parent",{get:function(){return this.helper.getById(this.parentId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$component",{get:function(){return this.helper.getById(this.componentId)},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.destroyed?console.warn("component destroyed:",{component:this}):(this.template=this.createTemplate(),this.appendTemplate(),this.bind())},e.prototype.destroyComponent=function(){this.destroyEvent.next(),this.destroyEvent.complete(),this.onDestroy()},e.prototype.getOnDestroy$=function(){return this.destroyEvent.asObservable().pipe(Lt(1))},e.prototype.unbind=function(){this.helper.unbindRecursive(this.$component)},e.prototype.onDestroy=function(){this.helper.destroyComponent(this.componentId),this.template="",this.destroyed=!0},e.prototype.setTemplateValuesByModel=function(t,e){var r=t;return Object.keys(e).forEach((function(t){var n=new RegExp("@@"+t+"@@","g");r=r.replace(n,e[t])})),r},e.prototype.appendTemplate=function(){this.helper.getById(this.parentId).append(this.template)},e.prototype.createChildId=function(t,e){return(e||this.componentId)+"__"+t},e.prototype.destroyChildren=function(t){var r=this;(t||[]).forEach((function(t){r[t]instanceof e&&(r[t].destroyComponent(),r[t]=null)}))},e}(Dt),$t=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zt=function(t){function e(e){var r=t.call(this,e)||this;return r.runJob=new H(!1),r.runJob$=r.runJob.asObservable().pipe(R(r.destroyEvent),G((function(t){return!!t}))),r.ids={componentId:r.componentId,btnRunJobId:z.createQuickGuidAsString()},r}return $t(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.setFilesCount(0)},e.prototype.destroyComponent=function(){this.runJob.complete(),t.prototype.destroyComponent.call(this)},e.prototype.setRunJobDisabledState=function(t,e){void 0===e&&(e=!0),this.helper.toggleDisabled(this.$btnRunJob,t),e&&this.serviceProvider.viewerService.onRunJobDisabledChange(t)},e.prototype.setFilesCount=function(t,e){this.updateBtnLabel(this.getLabelKey(e),t)},e.prototype.setBtnLabel=function(t,e){this.updateBtnLabel(this.getLabelKey(t),e)},e.prototype.getDefaultLabelKey=function(){var t=this.serviceProvider.toolsConfigService.getConfigModel();return this.createLabelKey(t.toolName)},e.prototype.createLabelKey=function(t,e){return void 0===e&&(e="-start-processing"),t+e},e.prototype.bind=function(){var t=this,e=this.serviceProvider.viewerService;e.fileCountChange$.pipe(R(this.destroyEvent)).subscribe((function(e){return t.setFilesCount(e)})),e.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(e){return t.setRunJobDisabledState(e,!1)}))},Object.defineProperty(e.prototype,"$btnRunJob",{get:function(){return this.helper.getById(this.ids.btnRunJobId)},enumerable:!0,configurable:!0}),e.prototype.updateBtnLabel=function(t,e){var r=this.serviceProvider.Translate.get(t).replace("%s",e+""||"");this.$btnRunJob.html(r)},e.prototype.getLabelKey=function(t){return t||(t=this.getDefaultLabelKey()),this.lastLabelKey=t,t},e}(Nt),Ut=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ht=r(453),Gt=function(t){function e(e){var r=t.call(this,e)||this;return r.footerTypeCss="app-footer--simple",r.ids.formContainerId=z.createQuickGuidAsString(),r.ids.popoverContainerId=z.createQuickGuidAsString(),r}return Ut(e,t),e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.setFooterTypeCss(),this.$btnRunJob.on("click",(function(){e.helper.isDisabled(e.$btnRunJob)||e.runJob.next(!0)}))},e.prototype.createTemplate=function(){return this.setTemplateValuesByModel(Ht,this.ids)},e.prototype.setFooterTypeCss=function(){this.$component.addClass(this.footerTypeCss)},e}(zt),Jt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wt=function(t){function e(e){var r=t.call(this,e)||this;return r.ids={componentId:r.componentId,btnStartOverId:z.createQuickGuidAsString()},r}return Jt(e,t),e.prototype.setDisableState=function(t){},Object.defineProperty(e.prototype,"$btnStartOver",{get:function(){return this.helper.getById(this.ids.btnStartOverId)},enumerable:!0,configurable:!0}),e}(Nt),qt=function(){function t(){}return t.svgSymbol=function(t,e,r){var n=this.createSvgIconUrl(r);return'<svg width="'+t+'" height="'+e+'"><use href="'+n+'" xlink:href="'+n+'"></use></svg>'},t.initToolIcons=function(t){this.resourcesRoot=t||this.resourcesRoot,this.GDrive=this.svgSymbol(23,20,"GDrive"),this.Rotate=this.svgSymbol(24,23,"Rotate"),this.Close=this.svgSymbol(26,26,"Close"),this.Search=this.svgSymbol(25,25,"Search"),this.DropBox=this.svgSymbol(23,22,"DropBox"),this.Device=this.svgSymbol(23,20,"Device"),this.formatPdf=this.svgSymbol(70,88,"formatPdf"),this.arrow=this.svgSymbol(42,30,"arrow"),this.lock=this.svgSymbol(15,20,"lock"),this.unlock=this.svgSymbol(15,20,"unlock"),this.Candy=this.svgSymbol(23,24,"Candy"),this.attention=this.svgSymbol(68,61,"attention"),this.bug=this.svgSymbol(19,19,"bug"),this.rotateRight=this.svgSymbol(26,26,"rotateRight"),this.rotateLeft=this.svgSymbol(26,26,"rotateLeft"),this.okGreen=this.svgSymbol(43,56,"ok-green"),this.okGray=this.svgSymbol(17,13,"ok-gray"),this.clean=this.svgSymbol(15,15,"clean"),this.trash=this.svgSymbol(36,43,"trash"),this.defaultIcon=this.svgSymbol(50,56,"defaultIcon"),this.aimSmall=this.svgSymbol(27,27,"aim"),this.aimMedium=this.svgSymbol(77,77,"aim"),this.freeLimit=this.svgSymbol(80,80,"freeLimit"),this.gear=this.svgSymbol(24,24,"gear"),this.image=this.svgSymbol(24,24,"image"),this.keyboard=this.svgSymbol(24,24,"keyboard"),this.plus=this.svgSymbol(24,24,"plus"),this.formatIcons=Object.create(null),this.formatIcons[dt.doc]=this.svgSymbol(50,56,"doc"),this.formatIcons[dt.docx]=this.svgSymbol(50,56,"docx"),this.formatIcons[dt.rtf]=this.svgSymbol(50,56,"rtf"),this.formatIcons[dt.odt]=this.svgSymbol(50,56,"odt"),this.formatIcons[dt.ods]=this.svgSymbol(50,56,"ods"),this.formatIcons[dt.xlsx]=this.svgSymbol(50,56,"xlsx"),this.formatIcons[dt.xls]=this.svgSymbol(50,56,"xls"),this.formatIcons[dt.pptx]=this.svgSymbol(50,56,"pptx"),this.formatIcons[dt.ppt]=this.svgSymbol(50,56,"ppt"),this.formatIcons[dt.pdf]=this.svgSymbol(50,56,"pdf"),this.formatIcons[dt.tiff]=this.svgSymbol(50,56,"tiff"),this.formatIcons[dt.bmp]=this.svgSymbol(50,56,"bmp"),this.formatIcons[dt.png]=this.svgSymbol(50,56,"png"),this.formatIcons[dt.jpg]=this.svgSymbol(50,56,"jpg"),this.formatIcons[dt.epub]=this.svgSymbol(49,56,"epub"),this.formatIcons[dt.mobi]=this.svgSymbol(50,56,"mobi"),this.formatIcons[dt.fb2]=this.svgSymbol(47,56,"fb2"),this.formatIcons[dt.djvu]=this.svgSymbol(50,56,"djvu"),this.formatIcons[dt.txt]=this.svgSymbol(50,56,"txt"),this.formatIcons[dt.xml]=this.svgSymbol(50,56,"xml"),this.formatIcons[dt.html]=this.svgSymbol(50,56,"html"),this.formatIcons[dt.chm]=this.svgSymbol(47,56,"chm"),this.formatIcons[dt.xlt]=this.formatIcons[dt.xla]=this.formatIcons[dt.xls],this.formatIcons[dt.tif]=this.formatIcons[dt.tiff],this.formatIcons[dt.jpeg]=this.formatIcons[dt.jpg],this.formatIcons[dt.djv]=this.formatIcons[dt.djvu]},t.createSvgIconUrl=function(t){return this.getIconRoot()+"/icons.svg#"+t},t.getIconRoot=function(){return this.resourcesRoot+"assets"},t.getToolIcon=function(t){return this.formatIcons[t]||this.defaultIcon},t.setDimensions=function(t,e){return $(t).attr("width",e.width).attr("height",e.height).get(0).outerHTML},t.resourcesRoot="",t}(),Zt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kt=r(454),Qt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.state=r,n.hasSortable=!1,n}return Zt(e,t),e.prototype.startOver=function(){this.$btnStartOver.click()},e.prototype.bind=function(){var t=this;this.$btnStartOver.click((function(e){return e&&!e.isDefaultPrevented()&&(e.preventDefault(),t.serviceProvider.appService.onStartOver(t.state)),!1})),this.serviceProvider.appService.startOver$.subscribe()},e.prototype.createTemplate=function(){var t=this.serviceProvider.Translate,e=this.setTemplateValuesByModel(Kt,this.ids),r={btnStartOverIcon:qt.Rotate,btnStartOverLabel:t.get("component-start-over")};return this.setTemplateValuesByModel(e,r)},e}(Wt);function Yt(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new te(t,e))}}var Xt,te=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new ee(t,this.project,this.thisArg))},t}(),ee=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(y);function re(t,e,r,n){return i(r)&&(n=r,r=void 0),n?re(t,e,r).pipe(Yt((function(t){return p(t)?n.apply(void 0,t):n(t)}))):new _((function(n){!function t(e,r,n,o,i){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(r,n,i),s=function(){return a.removeEventListener(r,n,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var c=e;e.on(r,n),s=function(){return c.off(r,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(r,n),s=function(){return u.removeListener(r,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var p=0,l=e.length;p<l;p++)t(e[p],r,n,o,i)}o.add(s)}(t,e,(function(t){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(t)}),n,r)}))}!function(t){t.device="device",t.gDrive="gDrive",t.dropBox="dropBox"}(Xt||(Xt={}));var ne,oe=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=r(455),se=function(t){function e(e){var r=t.call(this,e)||this;return r.css={hover:"--hover"},r.ids={componentId:r.componentId,btnAddId:z.createQuickGuidAsString(),btnAddLocalId:z.createQuickGuidAsString(),btnAddGDriveId:z.createQuickGuidAsString(),btnAddDropBoxId:z.createQuickGuidAsString(),popoverLabelId:z.createQuickGuidAsString()},r}return oe(e,t),e.prototype.setDisabledState=function(t){this.isDisabled=t},e.prototype.bind=function(){var t=this;this.initMedia();var e=function(e,r){if(!t.isDisabled)return e.isDefaultPrevented()||(e.preventDefault(),t.toggleHover(!1),t.serviceProvider.inputService.selectFile(r)),!1},r=function(e){return re(t.helper.getById(e),"click").pipe(R(t.destroyEvent),Yt((function(t){return t})))};r(this.ids.btnAddLocalId).subscribe((function(t){return e(t,Xt.device)})),r(this.ids.btnAddDropBoxId).subscribe((function(t){return e(t,Xt.dropBox)})),r(this.ids.btnAddGDriveId).subscribe((function(t){return e(t,Xt.gDrive)}));var n=function(e){t.serviceProvider.mediaService.isDesktopByWidth()?t.helper.getById(t.ids.btnAddLocalId).click():t.toggleHover(!t.isOpened())};r(this.ids.btnAddId).subscribe((function(t){return n()})),r(this.ids.popoverLabelId).subscribe((function(t){return n()})),re($(".app-popover--box-spacer"),"click").pipe(R(this.destroyEvent),Yt((function(t){return t})),G((function(t){return!t.isDefaultPrevented()}))).subscribe((function(t){return n()}));var o=function(e){t.serviceProvider.mediaService.isDesktopByWidth()&&t.toggleHover(e)};this.$component.hover((function(){return o(!0)}),(function(){return o(!1)}))},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ie,this.ids),e=this.serviceProvider.Translate,r={popoverLabel:e.get("component-add-more-files"),btnAddGDriveIcon:qt.GDrive,btnAddGDriveLabel:e.get("tooltip-from-gdrive"),btnAddDropBoxIcon:qt.DropBox,btnAddDropBoxLabel:e.get("tooltip-from-dropbox"),btnAddLocalIcon:qt.Device,btnAddLocalLabel:e.get("tooltip-from-device")};return this.setTemplateValuesByModel(t,r)},e.prototype.toggleHover=function(t){this.$component.toggleClass(this.css.hover,t)},e.prototype.initMedia=function(){var t=this;this.serviceProvider.mediaService.change$.pipe(R(this.destroyEvent)).subscribe((function(e){t.helper.getById(t.ids.popoverLabelId).toggleClass(t.helper.css.displayNone,!e.isDesktopByWidth)}))},e.prototype.isOpened=function(){return this.$component.hasClass(this.css.hover)},e}(Nt),ae=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ce=function(t){function e(e,r){var n=t.call(this,e)||this;return n.innerComponentsFactory=r,n.components=[],n}return ae(e,t),Object.defineProperty(e.prototype,"$popover",{get:function(){return this.helper.getById(this.ids.popoverContainerId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$form",{get:function(){return this.helper.getById(this.ids.formContainerId)},enumerable:!0,configurable:!0}),e.prototype.bind=function(){t.prototype.bind.call(this);var e=this.helper.css.displayNone;this.innerComponentsFactory.popover&&(this.popover=this.innerComponentsFactory.popover(this.ids.popoverContainerId),this.popover.init(),this.onPopoverInit(),this.components.push(this.popover)),this.innerComponentsFactory.form&&(this.form=this.innerComponentsFactory.form(this.ids.formContainerId),this.form.init(),this.$form.removeClass(e),this.components.push(this.form))},e.prototype.getFormComponent=function(){if(!this.form)throw new Error("!this.form");return this.form},e.prototype.onPopoverInit=function(){this.$popover.removeClass(this.helper.css.displayNone)},e.prototype.onDestroy=function(){this.components.forEach((function(t){return t.destroyComponent()})),this.destroyChildren(["form"]),t.prototype.onDestroy.call(this)},e}(Gt),ue=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pe=function(t){function e(e){var r=t.call(this,e,{popover:function(t){return new se(t)}})||this;return r.footerTypeCss="app-footer--with-popover",r}return ue(e,t),e}(ce);!function(t){t.none="",t.asc="asc",t.desc="desc"}(ne||(ne={}));var le=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fe=r(456),de=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.ascLabel="A-Z",n.descLabel="Z-A",n.hasSortable=!0,n.sort=new O,n.sort$=n.sort.asObservable().pipe(R(n.destroyEvent)),n.viewModel={ascLabel:"",sortLabel:"",descLabel:"",btnAskId:z.createQuickGuidAsString(),btnDescId:z.createQuickGuidAsString()},n}return le(e,t),e.prototype.createTemplate=function(){var e=t.prototype.createTemplate.call(this),r=$(e),n=this.serviceProvider.Translate;this.viewModel.sortLabel=n.get("component-order-by"),this.viewModel.ascLabel=this.ascLabel,this.viewModel.descLabel=this.descLabel;var o=this.setTemplateValuesByModel(fe,Object.assign(this.viewModel));return r.prepend(o).get(0).outerHTML},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.helper.getById(this.viewModel.btnAskId).click((function(){e.sort.next(ne.asc)})),this.helper.getById(this.viewModel.btnDescId).click((function(){e.sort.next(ne.desc)}))},e.prototype.destroyComponent=function(){this.sort.complete(),t.prototype.destroyComponent.call(this)},e}(Qt),he=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ve=function(t){function e(e,r){var n=t.call(this,e,{popover:function(t){return new se(t)},form:r})||this;return n.footerTypeCss="app-footer--with-popover-and-form",n}return he(e,t),e}(ce);function ye(){}function ge(t,e,r){return function(n){return n.lift(new be(t,e,r))}}var me,be=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new we(t,this.nextOrObserver,this.error,this.complete))},t}(),we=function(t){function e(e,r,n,o){var s=t.call(this,e)||this;return s._tapNext=ye,s._tapError=ye,s._tapComplete=ye,s._tapError=n||ye,s._tapComplete=o||ye,i(r)?(s._context=s,s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||ye,s._tapError=r.error||ye,s._tapComplete=r.complete||ye),s}return o(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(y);!function(t){t.select="select",t.text="text",t.number="number",t.password="password"}(me||(me={}));var _e=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Se=r(457),Pe=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.key=r,o.opts=n,o.type=me.select,o.ids={componentId:o.componentId,selectId:o.createChildId("select"),labelId:o.createChildId("label")},o.change=new H(null),o.change$=o.change.asObservable().pipe(R(o.destroyEvent),G((function(t){return null!==t}))),o.validationChange=new O,o.validationChange$=o.validationChange.asObservable().pipe(R(o.destroyEvent)),o.valid=!0,o}return _e(e,t),e.prototype.setValueByKey=function(t){var e=this.$select.find("[data-key='"+t+"']");e.length&&this.$select.val(e.val()).trigger("change")},e.prototype.setValue=function(t){this.setValueByKey(t.key)},e.prototype.setDisableState=function(t){this.helper.toggleDisabled(this.$select,t)},e.prototype.getValue=function(){return this.$select.val()},e.prototype.destroyComponent=function(){this.change.complete(),this.validationChange.complete(),t.prototype.destroyComponent.call(this)},e.prototype.isDisabled=function(){return this.helper.isDisabled(this.$select)},e.prototype.isValid=function(){return this.valid},e.prototype.setValidation=function(t){this.valid=t,this.validationChange.next(t)},e.prototype.getOptions=function(){return this.opts.options},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Se,this.ids),e=this.opts.labelKey||"",r="";e&&(r=this.serviceProvider.Translate.get(e));var n={formGroupCss:this.opts.formGroupCss||"",options:this.createViewOptions(this.opts.options),label:r};return this.setTemplateValuesByModel(t,n)},e.prototype.bind=function(){var t=this;this.$select.off("change").on("change",(function(){var e=t.$select.find("option:selected").data("key"),r=t.opts.options.find((function(t){return t.key===e}));t.change.next(r)}))},Object.defineProperty(e.prototype,"$select",{get:function(){return this.helper.getById(this.ids.selectId)},enumerable:!0,configurable:!0}),e.prototype.createViewOptions=function(t){var e="",r=this.serviceProvider.Translate;return t.forEach((function(t){e+='<option data-key="'+t.key+'" value="'+t.value+'">'+r.get(t.text)+"</option>"})),e},e}(Nt),xe=function(){function t(){}return t.create=function(){var t;return(t={})[yt.paperSize]=this.paperSize(),t[yt.paperOrientation]=[{key:mt.portrait,text:"component-position-portrait",value:mt.portrait},{key:mt.landscape,text:"component-position-landscape",value:mt.landscape},{key:mt.original,text:"component-position-original",value:mt.original}],t[yt.paperMargin]=[{key:bt.no,text:"component-margin-no",value:0},{key:bt.small,text:"component-margin-small",value:25},{key:bt.big,text:"component-margin-big",value:50}],t[yt.quality]=[{key:wt.low,text:"component-quality-low",value:wt.low},{key:wt.medium,text:"component-quality-medium",value:wt.medium},{key:wt.high,text:"component-quality-high",value:wt.high}],t[yt.compress]=[{key:_t.recommended,text:"component-recommended",value:_t.recommended},{key:_t.maximum,text:"component-maximum",value:_t.maximum},{key:_t.minimum,text:"component-minimum",value:_t.minimum}],t[yt.lang]=jt.create().map((function(t){return{key:t.code,text:t.name,value:t.code}})),t[yt.splitPdf]=this.splitPdfMode(),t[yt.rotatePdf]=this.rotatePdfMode(),t[yt.format]=null,t[yt.position]=null,t},t.splitPdfMode=function(){return[{key:St.single,text:"component-mode1",value:St.single},{key:St.range,text:"component-mode2",value:St.range},{key:St.mergeSelected,text:"component-mode3",value:St.mergeSelected},{key:St.deleteSelected,text:"component-mode4",value:St.deleteSelected}]},t.paperSize=function(){return[{key:gt.a3,text:"component-size-a3",value:"842,1190"},{key:gt.a4,text:"component-size-a4",value:"595,842"},{key:gt.a5,text:"component-size-a5",value:"420,595"},{key:gt.original,text:"component-size-original",value:""},{key:gt.usletter,text:"component-size-usletter",value:"612,792"}]},t.rotatePdfMode=function(){return[{key:Pt.all,text:"component-all-pages",value:Pt.all},{key:Pt.portrait,text:"component-portrait-pages",value:Pt.portrait},{key:Pt.landscape,text:"component-landscape-pages",value:Pt.landscape}]},t}(),Ce=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oe=function(t){function e(e){var r=t.call(this,e)||this;return r.disabled=!1,r.css={parent:"form--list"},r.change=new O,r.change$=r.getChange$(),r}return Ce(e,t),e.prototype.init=function(){var e=this;this.createControls(),this.change$.subscribe((function(t){return e.onValueChanged(t)})),t.prototype.init.call(this)},e.prototype.destroyComponent=function(){this.change.complete(),this.change$=null,this.getControls().forEach((function(t){return t.component.destroyComponent()})),t.prototype.destroyComponent.call(this)},e.prototype.setDisableState=function(t){this.disabled=t,this.getControls().forEach((function(e){return e.component.setDisableState(t)}))},e.prototype.setValue=function(t){this.onValueChanged(t)},e.prototype.isDisabled=function(){return this.disabled},e.prototype.isValid=function(){return this.getControls().every((function(t){return t.component.isValid()}))},e.prototype.bind=function(){var t=this;this.$parent.addClass(this.css.parent),this.getControls().forEach((function(e){e.component.init(),t.bindControl(e)}))},e.prototype.getChange$=function(){return this.change.asObservable().pipe(R(this.destroyEvent),Q(100))},e.prototype.getControl=function(t){return this.getControls().find((function(e){return e.component.key===t}))},e}(Nt),Ie=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ee=function(t){function e(e){var r=t.call(this,e)||this;return r.controls=[],r.allOptions=xe.create(),r}return Ie(e,t),e.prototype.createTemplate=function(){return""},e.prototype.getControls=function(){return this.controls},e.prototype.onValueChanged=function(t){var e=this;this.serviceProvider.toolOptionService.useDefaultOption()&&Object.keys(t).forEach((function(r){e.serviceProvider.toolOptionService.setDefault(r,t[r])})),this.serviceProvider.toolOptionService.saveCurrentOptions(t)},e.prototype.createControls=function(){var t=this;this.currentOptionContainer=Object.create(null),this.serviceProvider.toolsConfigService.getToolConfig().options.forEach((function(e){var r=t.getOptions(e);if(r&&r.length){var n=e.isHiddenLabel?"":"ui-"+e.key,o=new Pe(t.parentId,e.key,{options:r,labelKey:n,formGroupCss:e.selectCss});t.controls.push({component:o,config:e})}}))},e.prototype.bindControl=function(t){var e=this,r=this.serviceProvider.toolOptionService.getDefault(t.config.key);if(r){var n=this.allOptions[t.config.key].find((function(t){return t.value.toString()===r.toString()}));t.component.setValueByKey(n.key)}else switch(t.config.key){case yt.paperSize:t.component.setValueByKey(t.config.default);break;default:t.component.setValueByKey(t.config.default)}this.currentOptionContainer[t.config.key]=t.component.getValue(),t.component.change$.pipe(R(this.destroyEvent),ge((function(r){e.currentOptionContainer[t.config.key]=r.value,e.change.next(e.currentOptionContainer)}))).subscribe()},e.prototype.getOptions=function(t){var e=this.allOptions;return t.values.map((function(r){if(e[t.key]&&e[t.key]instanceof Array){var n=e[t.key].find((function(t){return t.key===r}));if(n)return it.asTypeRecursion(n)}})).filter((function(t){return!!t}))},e}(Oe);function ke(t){return t&&"function"==typeof t.schedule}function Te(t,e){return new _((function(r){var n=new d,o=0;return n.add(e.schedule((function(){o!==t.length?(r.next(t[o++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}function je(t,e){return e?Te(t,e):new _(T(t))}var De={};function Me(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null,n=null;return ke(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&p(t[0])&&(t=t[0]),je(t,n).lift(new Ae(r))}var Ae=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Fe(t,this.resultSelector))},t}(),Fe=function(t){function e(e,r){var n=t.call(this,e)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return o(e,t),e.prototype._next=function(t){this.values.push(De),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(L(this,n,n,r))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,o){var i=this.values,s=i[r],a=this.toRespond?s===De?--this.toRespond:this.toRespond:0;i[r]=e,0===a&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(E),Le=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Re=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Ve=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Re(arguments[e]));return t},Be=function(t){function e(e){var r=t.call(this,e)||this;r.itemBgColor="#FFFFFF";var n=r.serviceProvider.viewerService.getMinMaxItemValue();return r.documentSide=n.max,r}return Le(e,t),e.prototype.destroyComponent=function(){this.$parent.removeClass(this.helper.css.displayNone),t.prototype.destroyComponent.call(this)},e.prototype.bind=function(){var e=this;Me([this.getChange$(),this.serviceProvider.viewerService.viewItemsChange$]).pipe(R(this.destroyEvent)).subscribe((function(t){var r=Re(t,2),n=r[0],o=r[1];o&&o.length&&e.changeItems(n,o)})),t.prototype.bind.call(this)},e.prototype.getChange$=function(){var e=this;return t.prototype.getChange$.call(this).pipe(Yt((function(t){return e.onChange(t)})))},e.prototype.onChange=function(t){var e=this.getControl(yt.paperOrientation);return""===t.paperSize?(e.component.setDisableState(!0),e.component.getValue()!==mt.original&&e.component.setValueByKey(mt.original)):e.component.isDisabled()&&e.component.setDisableState(!1),t},e.prototype.changeItems=function(t,e){var r=this;e.forEach((function(e){var n=e.getImageContainer(),o=n.find(".page-item--svg-container");!!o.length?(n.addClass("--svg"),o.addClass(r.helper.css.boxShadow)):n.css({"background-color":r.itemBgColor}).addClass(r.helper.css.boxShadow),e.imageChange$.pipe(Lt(1)).subscribe((function(){r.setImgSize(e.getImageContainer(),t);var n=!r.serviceProvider.toolOptionService.getPaperSize(t);r.helper.getById(e.componentId).toggleClass("page-item--original-szie",n)}))}))},e.prototype.setImgSize=function(t,e){var r=!1,n=this.serviceProvider.toolOptionService.getPaperSize(e);n||(r=!0,n=[]);var o=+e[yt.paperMargin]||0,i=0;o&&(i=+o/5);var s=Ve(n),a=t.find(".page-item--image"),c=this.helper.getImageSize(a),u=e[yt.paperOrientation],p=c.width/c.height;u===mt.landscape?s=s.reverse():u===mt.original&&(r&&(s=[c.width,c.height]),p>1&&(s=s.reverse()));var l=this.setListSize(s,r,t);this.setImageSize(l,c,a,i,p)},e.prototype.setListSize=function(t,e,r){if(e)return r.removeAttr("style"),r.css({"background-color":this.itemBgColor,"min-height":"initial","min-width":"initial"}),[];var n=Math.max.apply(Math,Ve(t))/this.documentSide,o=Re(t.map((function(t){return t/n})),2),i=o[0],s=i/o[1],a=void 0,c=void 0;return s>1?(a=i/s,c=this.documentSide):c=(a=this.documentSide)*s,r.css({width:c,height:a,"min-width":c,"min-height":a,"background-color":this.itemBgColor}),[c,a]},e.prototype.setImageSize=function(t,e,r,n,o){t&&t.length||(t=[e.width,e.height]);var i,s=[e.width,e.height],a=Re(t,2),c=a[0],u=a[1];i=c/u>1?o>1?Math.max.apply(Math,Ve(t)):Math.min.apply(Math,Ve(t)):o>=1?Math.min.apply(Math,Ve(t)):Math.max.apply(Math,Ve(t));var p=Math.max.apply(Math,Ve(s))/i,l=s.map((function(t){return t/p})),f=Re(l,2),d=f[0],h=f[1];d<=c&&h<=u||d>c&&h>u||(d>c&&h<=u?(l[0]=c,l[1]=o>1?c*o:c/o):d<=c&&h>u&&(l[1]=u,l[0]=o>1?u*o:u/o));var v=l.map((function(t){return t-3-2*n})),y=Re(v,2),g=y[0],m=y[1];r.css({width:g+"px",height:m+"px",margin:n+"px"})},e}(Ee),Ne=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$e=function(t){function e(e,r){var n=t.call(this,e,{form:r})||this;return n.footerTypeCss="app-footer--with-form",n}return Ne(e,t),e}(ce),ze=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ue=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.state=r,n.hasSortable=!1,n}return ze(e,t),e.prototype.createTemplate=function(){var e=t.prototype.createTemplate.call(this),r=this.serviceProvider.Translate.get("component-compress-instead-reduce");return e+('<div id="'+z.createQuickGuid()+'" class="preview--notification"><div class="preview--notification-content">'+r+"</div></div>")},e}(Qt),He=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ge=r(458),Je=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.key=r,o.opts=n,o.css={invalid:"is-invalid"},o.ids={componentId:o.componentId,inputId:o.createChildId("input"),labelId:o.createChildId("label"),resetBtnId:o.createChildId("btn__reset"),prefixBtnId:o.createChildId("btn__prefix"),errorContainerId:o.createChildId("error-container")},o.type=n.inputType||me.text,o.change=new O,o.change$=o.change.asObservable().pipe(R(o.destroyEvent),G((function(t){return null!==t}))),o.input=new O,o.input$=o.input.asObservable().pipe(R(o.destroyEvent)),o.validationChange=new O,o.validationChange$=o.validationChange.asObservable().pipe(R(o.destroyEvent)),o.valid=!0,o}return He(e,t),Object.defineProperty(e.prototype,"$input",{get:function(){return this.helper.getById(this.ids.inputId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$btnReset",{get:function(){return this.helper.getById(this.ids.resetBtnId)},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t){this.opts.useResetBtn&&this.setResetBtnVisible(!!t),this.$input.val(t),this.change.next(t)},e.prototype.setDisableState=function(t){this.helper.toggleDisabled(this.$input,t),this.helper.toggleDisabled(this.$btnReset,t)},e.prototype.setResetBtnVisible=function(t){this.$btnReset.toggleClass(this.helper.css.displayNone,!t)},e.prototype.setPrefixIcon=function(t){this.helper.getById(this.ids.prefixBtnId).html(t)},e.prototype.showError=function(t){this.setError(t)},e.prototype.hideError=function(){this.setError()},e.prototype.getValue=function(){return this.$input.val()},e.prototype.destroyComponent=function(){this.change.complete(),this.validationChange.complete(),t.prototype.destroyComponent.call(this)},e.prototype.isDisabled=function(){return this.helper.isDisabled(this.$input)},e.prototype.isValid=function(){return this.valid},e.prototype.setValidation=function(t){this.valid=t,this.$input.toggleClass(this.css.invalid,!t),this.$component.toggleClass(this.css.invalid,!t),this.validationChange.next(t)},e.prototype.focus=function(){this.$input.focus()},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Ge,this.ids),e=this.serviceProvider.Translate,r=this.opts.labelKey||"",n="";r&&(n=e.get(r));var o=this.opts.placeholderKey||"",i="";o&&(i=e.get(o));var s={formGroupCss:this.opts.formGroupCss||"",inputType:this.type,label:n,inputName:this.key,placeholder:i,iconReset:qt.clean};return this.opts.useResetBtn&&(s.formGroupCss+=" icon--reset"),this.opts.usePrefixIcon&&(s.formGroupCss+=" icon--prefix"),this.setTemplateValuesByModel(t,s)},e.prototype.bind=function(){var t=this,e=this.$input;this.opts.inputType===me.password&&e.attr("autocomplete","off"),e.on("change",(function(){return t.change.next(t.$input.val())})).on("input",(function(e){t.input.next({event:e,value:t.$input.val()})})),this.opts.useResetBtn&&this.$btnReset.click((function(){return t.setValue("")}))},e.prototype.setError=function(t){void 0===t&&(t=""),this.helper.getById(this.ids.errorContainerId).toggleClass(this.helper.css.displayNone,!t).html(t)},e}(Nt),We=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qe=function(t){function e(e){var r=t.call(this,e)||this;return r.controls=[],r}return We(e,t),e.prototype.init=function(){this.toolConfig=this.serviceProvider.toolsConfigService.getToolConfig(),t.prototype.init.call(this)},e.prototype.createTemplate=function(){return""},e.prototype.getControls=function(){return this.controls},e}(Oe),Ze=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ke=function(t){function e(e){var r=t.call(this,e)||this;return r.passwordCss={component:"password--form"},r.formKeys={password:"password",passwordRe:"passwordRe"},r.initialized=!1,r.model={password:"",passwordRe:"",pending:!1,valid:!1},r}return Ze(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this),this.initialized=!0,this.serviceProvider.mediaService.isMobileByWidth()||setTimeout((function(){e.controlMap[e.formKeys.password].focus()})),this.serviceProvider.mediaService.isMobile()&&this.pwReCtrl.showError(this.serviceProvider.Translate.get("m-popup-protect-pdf-error-msg")),this.serviceProvider.formValuesService.has(vt.protectPdf)&&this.setValue(Object.assign({},this.serviceProvider.formValuesService.get(vt.protectPdf)))},e.prototype.setDisableState=function(t){},e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.serviceProvider.mediaService.isDesktop()&&this.pwCtrl.$input.trigger("focus"),this.serviceProvider.viewerService.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){var r=!e.model.valid;r&&t!==r&&e.serviceProvider.viewerService.onRunJobDisabledChange(r)})),this.serviceProvider.viewerService.onRunJobDisabledChange(!0)},e.prototype.onValueChanged=function(t){t.valid=!!t.password&&!!t.passwordRe&&t.password===t.passwordRe,this.pwCtrl.setValue(t.password),this.pwReCtrl.setValue(t.passwordRe),!t.password&&!t.passwordRe||t.password&&!t.passwordRe?this.pwReCtrl.setValidation(!0):this.pwReCtrl.setValidation(t.valid),this.model=t,this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.serviceProvider.toolsConfigService.setFormValue(t)},e.prototype.createControls=function(){var t,e=this.formKeys,r=this.serviceProvider.mediaService.isMobile();this.controlMap=((t={})[e.password]=new Je(this.parentId,e.password,{formGroupCss:this.passwordCss.component,inputType:me.password,labelKey:r?"ph-password":"",placeholderKey:r?"":"ph-password"}),t[e.passwordRe]=new Je(this.parentId,e.passwordRe,{formGroupCss:this.passwordCss.component,inputType:me.password,labelKey:r?"ph-repeat-password":"",placeholderKey:r?"":"ph-repeat-password"}),t),this.controls.push({component:this.controlMap[e.password]}),this.controls.push({component:this.controlMap[e.passwordRe]})},e.prototype.bindControl=function(t){var e=this,r=t.component;console.log("bindControl",{control:t}),this.model[r.key]=r.getValue(),r.input$.pipe(R(this.destroyEvent),ge((function(t){t.event.isDefaultPrevented()||(t.event.preventDefault(),e.model[r.key]=t.value,e.change.next(e.model))}))).subscribe()},Object.defineProperty(e.prototype,"pwCtrl",{get:function(){return this.controlMap[this.formKeys.password]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pwReCtrl",{get:function(){return this.controlMap[this.formKeys.passwordRe]},enumerable:!0,configurable:!0}),e.prototype.isValidModel=function(t){return!!t&&!!t.password&&!!t.passwordRe&&t.password===this.model.passwordRe},e}(qe);function Qe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return ke(r)?(t.pop(),Te(t,r)):je(t)}function Ye(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new _((function(r){var n=new d;return n.add(e.schedule((function(){var o=t[m]();n.add(o.subscribe({next:function(t){n.add(e.schedule((function(){return r.next(t)})))},error:function(t){n.add(e.schedule((function(){return r.error(t)})))},complete:function(){n.add(e.schedule((function(){return r.complete()})))}}))}))),n}))}(t,e);if(A(t))return function(t,e){return new _((function(r){var n=new d;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){r.next(t),n.add(e.schedule((function(){return r.complete()})))})))}),(function(t){n.add(e.schedule((function(){return r.error(t)})))}))}))),n}))}(t,e);if(M(t))return Te(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _((function(r){var n,o=new d;return o.add((function(){n&&"function"==typeof n.return&&n.return()})),o.add(e.schedule((function(){n=t[D](),o.add(e.schedule((function(){if(!r.closed){var t,e;try{var o=n.next();t=o.value,e=o.done}catch(t){return void r.error(t)}e?r.complete():(r.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Xe(t,e){return e?Ye(t,e):t instanceof _?t:new _(F(t))}function tr(t,e){return"function"==typeof e?function(r){return r.pipe(tr((function(r,n){return Xe(t(r,n)).pipe(Yt((function(t,o){return e(r,t,n,o)})))})))}:function(e){return e.lift(new rr(t))}}var er,rr=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new nr(t,this.project))},t}(),nr=function(t){function e(e,r){var n=t.call(this,e)||this;return n.project=r,n.index=0,n}return o(e,t),e.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=this.innerSubscription;n&&n.unsubscribe();var o=new k(this,e,r),i=this.destination;i.add(o),this.innerSubscription=L(this,t,void 0,void 0,o),this.innerSubscription!==o&&i.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},e}(E),or=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ir=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};function sr(t){var e=t+"";return t<10&&(e="0"+t),e}!function(t){t.dash="-",t.colon=":",t.slash="/",t.dot=".",t.space=" "}(er||(er={}));var ar,cr,ur,pr,lr,fr=function(){function t(t,e,r){this.separator=r,this.year=e.year,this.month=e.month,this.days=e.days,this.inputValue=(t||"").trim()}return t.prototype.parse=function(){var t=this.getDateOrder(this.getArray()),e=t.days,r=t.month,n=t.year;if(r&&r.length>2){var o=r;r=n,n=o}if(e&&e.length>2){o=e;e=n,n=o}if(r&&+r>12){var i=e;e=r,r=i}e&&+e>31&&(e=sr(new Date(+(n||this.year),+(r||this.month),0).getDate()));r&&2===r.length&&(this.month=r),e&&2===e.length&&(this.days=e),n&&n.length<=4&&(this.year=n)},t.prototype.getArray=function(){return this.inputValue.split(this.separator).map((function(t){return t.trim()}))},t}(),dr=function(t){function e(e,r){return t.call(this,e,r,er.slash)||this}return or(e,t),e.prototype.getDateOrder=function(t){var e=ir(t,3);return{month:e[0],days:e[1],year:e[2]}},e}(fr),hr=function(t){function e(e,r){return t.call(this,e,r,er.dot)||this}return or(e,t),e.prototype.getDateOrder=function(t){var e=ir(t,3),r=e[0];return{month:e[1],days:r,year:e[2]}},e}(fr),vr=function(t){function e(e,r){return t.call(this,e,r,er.dash)||this}return or(e,t),e.prototype.getDateOrder=function(t){var e=ir(t,3),r=e[0];return{month:e[1],days:e[2],year:r}},e}(fr),yr=function(){function t(t,e){this.minutes=e.minutes,this.hours=e.hours,this.secondes=e.secondes,this.inputValue=(t||"").trim()}return t.prototype.parse=function(){if(this.inputValue&&!(this.inputValue.length<3)){var t=this.inputValue.match(/(\d{1,2}):(\d{1,2})?:?(\d{1,2})?/);if(t&&t[0]){var e=t[1],r=t[2],n=t[3];e&&(this.hours=sr(+e)),r&&(this.minutes=sr(+r)),n&&(this.secondes=sr(+n))}}},t}(),gr=function(){function t(){this.format="YYYY-MM-DD HH:MM",this.defaultValue="0000-00-00 00:00"}return t.prototype.jsonToView=function(t){if(t){var e=this.getDateTime(new Date(t));return this.formatValue(e)}},t.prototype.formatView=function(t){if(t=(t=t||"").replace(/[^\d:.\/ -]/g,"").trim()){var e=this.getDateTime(this.getNow());return this.setDTByValue(e,t),this.formatValue(e)}},t.prototype.fromViewToServer=function(t){if(!(t=(t=t||"").trim())||t===this.defaultValue)return"";var e=this.formatView(t);return e?new Date(e).toJSON():""},t.prototype.isValidDateTime=function(t){return this.isValidDate(t)&&this.isValidTime(t)},t.prototype.isValidDate=function(t){if(!t)return!1;var e=t.getFullYear(),r=t.getMonth(),n=t.getDay();return!!(e&&r&&n&&e+"".length===4)},t.prototype.isValidTime=function(t){return!!(t&&t.getHours()&&t.getMinutes())},t.prototype.getDateTime=function(t){return{year:t.getFullYear()+"",month:sr(t.getMonth()+1),days:sr(t.getDay()),hours:sr(t.getHours()),minutes:sr(t.getMinutes()),secondes:sr(t.getSeconds())}},t.prototype.getNow=function(){return new Date((new Date).setSeconds(0,0))},t.prototype.formatValue=function(t){return t.year+"-"+t.month+"-"+t.days+" "+t.hours+":"+t.minutes},t.prototype.setDTByValue=function(t,e){if(2!==e.length)if(this.containSeparator(e,er.space)){var r=ir(e.split(er.space).map((function(t){return t.trim()})),2),n=r[0],o=r[1];this.parseDate(n,t),this.parseTime(o,t)}else this.parseDate(e,t);else t.days=e},t.prototype.containSeparator=function(t,e){return t.indexOf(e)>-1},t.prototype.parseDate=function(t,e){var r;this.containSeparator(t,er.dash)?r=this.getDateParser(t,e,er.dash):this.containSeparator(t,er.dot)?r=this.getDateParser(t,e,er.dot):this.containSeparator(t,er.slash)&&(r=this.getDateParser(t,e,er.slash)),r&&(r.parse(),this.applyDate(e,r))},t.prototype.parseTime=function(t,e){var r;this.containSeparator(t,er.colon)&&(r=new yr(t,e)),r&&(r.parse(),this.applyTime(e,r))},t.prototype.getDateParser=function(t,e,r){var n;switch(r){case er.dot:n=new hr(t,e);break;case er.slash:n=new dr(t,e);break;case er.dash:n=new vr(t,e);break;default:console.error("not supported separator")}return n},t.prototype.applyDate=function(t,e){t.days=e.days,t.month=e.month,t.year=e.year},t.prototype.applyTime=function(t,e){t.minutes=e.minutes,t.hours=e.hours,t.secondes=e.secondes},t}(),mr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),br=r(459),wr=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.key=r,o.opts=n,o.DATETIME_DEFAULT_FORMAT="Y-m-d H:i",o.css={invalid:"is-invalid"},o.registerLibraries(),o.ids={componentId:o.componentId,inputId:o.createChildId("input"),labelId:o.createChildId("label"),errorContainerId:o.createChildId("error-container")},o.type=me.text,o.change=new O,o.change$=o.change.asObservable().pipe(R(o.destroyEvent),G((function(t){return null!==t}))),o.input=new O,o.input$=o.input.asObservable().pipe(R(o.destroyEvent)),o.validationChange=new O,o.validationChange$=o.validationChange.asObservable().pipe(R(o.destroyEvent)),o.valid=!0,o}return mr(e,t),Object.defineProperty(e.prototype,"flatpickr",{get:function(){return window.flatpickr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$input",{get:function(){return this.helper.getById(this.ids.inputId)},enumerable:!0,configurable:!0}),e.prototype.isDisabled=function(){return this.helper.isDisabled(this.$input)},e.prototype.setDisableState=function(t){var e,r,n,o;this.helper.toggleDisabled(this.$input,t),t?null===(r=null===(e=this.picker)||void 0===e?void 0:e.mobileInput)||void 0===r||r.setAttribute("disabled","disabled"):null===(o=null===(n=this.picker)||void 0===n?void 0:n.mobileInput)||void 0===o||o.removeAttribute("disabled")},e.prototype.isValid=function(){return this.valid},e.prototype.setValidation=function(t){this.valid=t,this.$input.toggleClass(this.css.invalid,!t),this.$component.toggleClass(this.css.invalid,!t),this.validationChange.next(t)},e.prototype.getValue=function(){return this.$input.val()},e.prototype.setValue=function(t){var e=null==t?void 0:t.trim().replace(" ","T"),r=new Date(e);if(!Number.isNaN(r.getTime())){var n=this.flatpickr.formatDate(r,this.getDatetimeFormat());this.picker.setDate(n),this.change.next(n)}},e.prototype.destroyComponent=function(){this.change.complete(),this.validationChange.complete(),t.prototype.destroyComponent.call(this)},e.prototype.bind=function(){var t=this,e=this.$input;this.serviceProvider.scriptLoaderService.loadLib("flatpickr").then((function(){var r=t.serviceProvider.toolsConfigService.getConfigModel().lang;t.picker=t.flatpickr(e.get(0),{enableTime:!0,dateFormat:t.getDatetimeFormat(),minuteIncrement:1,locale:r})})),this.serviceProvider.scriptLoaderService.loadLib("flatpickr_css").then(),this.serviceProvider.scriptLoaderService.hasLib("flatpickr_lang")&&this.serviceProvider.scriptLoaderService.loadLib("flatpickr_lang").then(),e.on("change",(function(){t.change.next(t.$input.val())})).on("input",(function(e){t.input.next({event:e,value:t.$input.val()})}))},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(br,this.ids),e=this.serviceProvider.Translate,r=this.opts.labelKey||"",n="";r&&(n=e.get(r));var o=this.opts.placeholderKey||"",i="";o&&(i=e.get(o));var s={formGroupCss:this.opts.formGroupCss||"",inputType:this.type,label:n,inputName:this.key,placeholder:i};return this.setTemplateValuesByModel(t,s)},e.prototype.registerLibraries=function(){var t;this.serviceProvider.scriptLoaderService.addScript({windowName:"flatpickr",src:"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/flatpickr.min.js"}),this.serviceProvider.scriptLoaderService.addScript({windowName:"flatpickr_css",src:"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/themes/material_blue.min.css",isCss:!0});var e=null===(t=this.serviceProvider.toolsConfigService.getConfigModel())||void 0===t?void 0:t.lang;e&&"en"!==e&&this.serviceProvider.scriptLoaderService.addScript({windowName:"flatpickr_lang",src:"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/l10n/"+e+".min.js"})},e.prototype.getDatetimeFormat=function(){return this.opts.format||this.DATETIME_DEFAULT_FORMAT},e}(Nt),_r=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sr=function(){return(Sr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Pr=function(t){function e(e){var r=t.call(this,e)||this;return r.editCss={formGroup:"edit-metadata--form-group",form:"edit-metadata--form"},r.translateLabelKeys={author:"ui-meta-author",title:"ui-meta-title",subject:"ui-meta-subject",keywords:"ui-meta-keywords",dateOfCreation:"ui-meta-created",dateOfModification:"ui-meta-modified"},r.translatePlaceholderKeys={author:"",title:"",subject:"",keywords:"",dateOfCreation:"component-meta-created-ph",dateOfModification:"component-meta-modified-ph"},r.propertyMap={Author:"author",Title:"title",Subject:"subject",Keywords:"keywords",CreationDate:"dateOfCreation",ModDate:"dateOfModification",Creator:"",IsAcroFormPresent:"",IsCollectionPresent:"",IsLinearized:"",IsXFAPresent:"",PDFFormatVersion:"",Producer:""},r.initialized=!1,r.formIds=Object.create(null),r.controlMap=Object.create(null),r.containerIds={left:r.createChildId("left"),right:r.createChildId("right")},r.keyList=["author","title","subject","keywords","dateOfCreation","dateOfModification"],r.formatter=new gr,r.css.parent+=" "+r.editCss.form,r.initIds(),r.initModel(),r}return _r(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.initialized=!0},e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.createTemplate=function(){var t=this.containerIds,e=t.left,r=t.right,n=function(t){return'<div id="'+t+'" class="edit-metadata--form-section"></div>'};return'<div class="edit-metadata--form-container">'+(n(e)+n(r))+"</div>"},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.serviceProvider.mediaService.isDesktop();var r=this.serviceProvider.viewerService;this.setDisableState(!0),r.onRunJobDisabledChange(!0),r.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){var n=!e.model.valid,o=e.model.changed;e.initialized&&!t&&!n&&o||r.onRunJobDisabledChange(!0)})),r.filesUpdated$.pipe(R(this.destroyEvent),G((function(t){return!!t&&t.length&&1===t.length})),Yt((function(t){return t[0]})),tr((function(t){return e.readMetadata(t)}))).subscribe((function(t){t?(e.setModelByMetaInfo(t),e.setValue(Object.assign({},e.model)),e.initialized=!0,e.setDisableState(!1)):console.error("metadata is not ready",{metadata:t})}))},e.prototype.onValueChanged=function(t){var e=this;this.keyList.forEach((function(r){var n=e.getControl(r).component,o=n.getValue();switch(r){case"dateOfCreation":case"dateOfModification":var i=t[r]||"";i!==o&&n.setValue(i);break;default:t[r]!==o&&n.setValue(t[r])}})),t.valid=this.isValid(),this.serviceProvider.toolsConfigService.setFormValue(t),this.model=t},e.prototype.createControls=function(){var t=this;this.keyList.forEach((function(e,r){var n=r<=2?t.containerIds.left:t.containerIds.right,o={formGroupCss:t.editCss.formGroup,inputType:me.text,labelKey:t.translateLabelKeys[e],placeholderKey:t.translatePlaceholderKeys[e]},i="dateOfCreation"===e||"dateOfModification"===e?new wr(n,e,Sr(Sr({},o),{format:"Y-m-d H:i"})):new Je(n,e,o);t.controlMap[e]=i,t.controls.push({component:i})}))},e.prototype.bindControl=function(t){var e=this,r=t.component;this.model[r.key]=r.getValue();var n=function(t){"object"==typeof t&&t.event?t.event.isDefaultPrevented()||(t.event.preventDefault(),e.model[r.key]=t.value,e.change.next(e.model)):(e.model[r.key]=t,e.change.next(e.model))};switch(r.key){case"dateOfCreation":case"dateOfModification":r.input$.pipe(R(this.destroyEvent),tr((function(t){if(!t.event.isDefaultPrevented()){var r=t.value;if(/[^ -:]/.test(r))return Qe(t).pipe(Lt(1));var n=new Date(r);return e.formatter.isValidDateTime(n)?Qe(t).pipe(Lt(1)):Qe(null)}return Qe(null)})),G((function(t){return!!t})),ge((function(t){return n(t)}))).subscribe(),r.change$.pipe(R(this.destroyEvent),ge((function(t){return n(t)}))).subscribe();break;default:r.input$.pipe(R(this.destroyEvent),ge((function(t){return n(t)}))).subscribe(),r.change$.pipe(R(this.destroyEvent),ge((function(t){return n(t)})))}},e.prototype.getControl=function(e){return t.prototype.getControl.call(this,e)},e.prototype.isValidModel=function(t){return!0},e.prototype.initIds=function(){var t=this;this.keyList.forEach((function(e){t.formIds[e]=t.createChildId(e)}))},e.prototype.initModel=function(){var t=Object.create(null);Object.keys(this.formIds).forEach((function(e){t[e]=void 0})),t.valid=!0,t.pending=!1,t.changed=!this.serviceProvider.mediaService.isMobile(),this.model=t},e.prototype.readMetadata=function(t){return Xe(this.serviceProvider.pdfService.readMetadata({url:t.storedFile.blobUrl,password:t.workFile.readPassword||t.storedFile.password||void 0})).pipe(R(this.destroyEvent),Lt(1))},e.prototype.setModelByMetaInfo=function(t){var e=this;if(!t)throw new Error("Argument exception");var r=[];Object.keys(this.propertyMap).forEach((function(t){e.propertyMap[t]&&r.push({key:t,value:e.propertyMap[t]})})),r.forEach((function(r){return e.setPropByMeta(t,r.key,r.value)}))},e.prototype.setPropByMeta=function(t,e,r){if(t[e])switch(e){case"ModDate":case"CreationDate":this.model[r]=this.serviceProvider.pdfService.pdfDataToDateTimeStr(t[e]);break;default:this.model[r]=t[e]}},e}(qe);!function(t){t.page="page",t.pageN="pagen",t.pageNOfM="pagenm"}(ar||(ar={})),function(t){t.topLeft="topLeft",t.topCenter="topCenter",t.topRight="topRight",t.middleLeft="middleLeft",t.middleCenter="middleCenter",t.middleRight="middleRight",t.bottomLeft="bottomLeft",t.bottomCenter="bottomCenter",t.bottomRight="bottomRight"}(cr||(cr={})),function(t){t.left="left",t.center="center",t.right="right"}(cr||(cr={})),function(t){t.arial="Arial",t.timesNewRoman="Times New Roman"}(ur||(ur={})),function(t){t[t.fs12=12]="fs12",t[t.fs13=13]="fs13",t[t.fs14=14]="fs14"}(pr||(pr={})),function(t){t.black="black",t.red="red",t.green="green",t.blue="blue"}(lr||(lr={}));var xr,Cr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Or=function(t){function e(e){var r=t.call(this,e)||this;return r.formCss={form:"add-page-numbers--form",formGroup:"add-page-numbers--form-group",row:"form-group--label-row",column:"form-group--label-column",number:"form-group--number"},r.translateLabelKeys={from:"ui-from-to-from",to:"ui-from-to-to",format:"ui-numbering-type",position:"ui-layout"},r.initialized=!1,r.formIds=Object.create(null),r.keyList=["from","to","format","position"],r.css.parent+=" "+r.formCss.form,r.initIds(),r.initModel(),r}return Cr(e,t),e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.bind=function(){var e=this;this.isDesktop=this.serviceProvider.mediaService.isDesktop(),t.prototype.bind.call(this);var r=this.serviceProvider.viewerService;this.setDisableState(!0),r.onRunJobDisabledChange(!0),r.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){var n=!e.model.valid;t||e.initialized&&!n||r.onRunJobDisabledChange(!0)})),r.filesUpdated$.pipe(R(this.destroyEvent),G((function(t){return!!t&&1===t.length})),Yt((function(t){return t[0]}))).subscribe((function(t){e.totalPages=t.totalPages||0,e.initialized=!0,e.model.from=1,e.model.to=e.totalPages,e.model.position=cr.bottomCenter,e.serviceProvider.formValuesService.has(vt.addPdfPageNumbers)&&Object.assign(e.model,e.serviceProvider.formValuesService.get(vt.addPdfPageNumbers)),e.setValue(Object.assign({},e.model)),e.setDisableState(!1);var n=e.controls.find((function(t){return"format"===t.component.key})).component,o=n.getOptions().find((function(t){return t.value===e.model.format}));o&&n.setValueByKey(o.key);var i=e.controls.find((function(t){return"position"===t.component.key})).component,s=i.getOptions().find((function(t){return t.key===e.model.position}));s&&i.setValueByKey(s.key),r.onRunJobDisabledChange(!1)})),this.serviceProvider.mediaService.change$.pipe(R(this.destroyEvent)).subscribe((function(t){t.isDesktopByWidth!==e.isDesktop&&(e.toggleLabelOrientation(t.isDesktopByWidth),e.isDesktop=t.isDesktopByWidth)})),this.toggleLabelOrientation(this.isDesktop)},e.prototype.onValueChanged=function(t){var e=this;this.controls.forEach((function(r){var n=r.component,o=n.getValue(),i=o.toString().trim(),s=t[n.key].toString().trim();if(i!==s)if(n.type===me.select){var a=n,c=a.getOptions(),u=e.getOption(c,o.toString());a.setValue(u)}else n.setValue(s||"")})),t.valid=this.isValid(),this.serviceProvider.toolsConfigService.setFormValue(t),this.model=t},e.prototype.createControls=function(){var t=this;this.keyList.forEach((function(e,r){switch(e){case"from":case"to":t.controls.push({component:new Je(t.parentId,e,{formGroupCss:t.formCss.formGroup+" "+t.formCss.number,inputType:me.text,labelKey:t.translateLabelKeys[e]})});break;case"format":case"position":var n=t.createOption(e);t.controls.push({component:new Pe(t.parentId,e,{formGroupCss:t.formCss.formGroup,labelKey:t.translateLabelKeys[e],options:n}),config:{key:e,values:n.map((function(t){return t.key})),default:n[0].key}})}}))},e.prototype.bindControl=function(t){var e=this,r=t.component;switch(r.key){case"from":case"to":var n=function(t){var n,o=e.toNumberVal(t);(n="from"===r.key?function(t){var r=t,n=+e.getControl("to").component.getValue().toString().trim();return t>n&&(r=n),r<1&&(r=1),r}(o):function(t){var r=e.getControl("from").component,n=e.totalPages,o=t,i=+r.getValue().toString().trim();return i>t&&(o=i),o>n&&(o=n),o}(o))!==o&&r.setValue(n.toString()),e.model[r.key]=n,e.change.next(e.model)};r.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return n(t)}));break;default:r.change$.pipe(R(this.destroyEvent)).subscribe((function(){e.model[r.key]=r.getValue(),e.change.next(e.model)})),this.model[r.key]=r.getValue()}},e.prototype.isValidModel=function(t){return!0},e.prototype.initIds=function(){var t=this;this.keyList.forEach((function(e){t.formIds[e]=t.createChildId(e)}))},e.prototype.initModel=function(){var t=Object.create(null);Object.keys(this.formIds).forEach((function(e){t[e]=void 0})),t.valid=!0,t.pending=!1,this.model=t},e.prototype.createOption=function(t){switch(t){case"format":return this.formatOptions=this.createFormatOptions();case"position":return this.positionOptions=this.createPositionOptions();default:throw new Error("not supported format")}},e.prototype.createFormatOptions=function(){return this.serviceProvider.Translate.get("page-numbering-types").map((function(t){return{key:t.key,text:t.name,value:t.value}}))},e.prototype.createPositionOptions=function(){var t=this.serviceProvider.Translate;return[{key:cr.topLeft,text:t.get("ui-top-left"),value:cr.topLeft},{key:cr.topCenter,text:t.get("ui-top-center"),value:cr.topCenter},{key:cr.topRight,text:t.get("ui-top-right"),value:cr.topRight},{key:cr.bottomLeft,text:t.get("ui-bottom-left"),value:cr.bottomLeft},{key:cr.bottomCenter,text:t.get("ui-bottom-center"),value:cr.bottomCenter},{key:cr.bottomRight,text:t.get("ui-bottom-right"),value:cr.bottomRight}]},e.prototype.toggleLabelOrientation=function(t){var e=this,r=t?this.formCss.row:this.formCss.column,n=this.isDesktop?this.formCss.row:this.formCss.column;this.getControls().forEach((function(t){var o=e.helper.getById(t.component.componentId);o.toggleClass(n,!1),o.toggleClass(r,!0)}))},e.prototype.getOption=function(t,e){return t.find((function(t){return t.value===e}))},e.prototype.toNumberVal=function(t){var e=(t||"").toString();return+(e=e.replace(/[^\d]/g,"").trim())||0},e}(qe),Ir=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Er=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},kr=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tr=function(t){function e(e,r,n){return t.call(this,e,r,n)||this}return Ir(e,t),e.prototype.bind=function(){this.initColorPicker(),this.registerColorPickerEvents(),t.prototype.bind.call(this)},e.prototype.destroyComponent=function(){this.customSelect.destroy(),t.prototype.destroyComponent.call(this)},e.prototype.initColorPicker=function(){var t,e,n,o=r(460).default;t=Er(o(this.$select.get(0),{containerClass:"color-picker-container",openerClass:"color-picker-opener",panelClass:"color-picker-panel",optionClass:"color-picker-option",optgroupClass:"color-picker-optgroup",isSelectedClass:"is-selected",hasFocusClass:"has-focus",isDisabledClass:"is-disabled",isOpenClass:"is-open"}),1),this.customSelect=t[0],this.setColorLabel(this.customSelect.select.value);try{for(var i=kr(this.customSelect.panel.children),s=i.next();!s.done;s=i.next()){var a=s.value;a.style.background=a.dataset.value}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e.prototype.registerColorPickerEvents=function(){var t=this;this.customSelect.container.addEventListener("click",(function(e){e.preventDefault(),e.target.matches(".color-picker-container")&&(t.customSelect.open=!1)})),this.change$.pipe(R(this.destroyEvent)).subscribe((function(e){t.setColorLabel(e.value),t.customSelect.value=e.value}))},e.prototype.setColorLabel=function(t){Er(this.customSelect.opener.children,1)[0].style.background=t},e}(Pe),jr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Mr=function(t){function e(e){var r=t.call(this,e)||this;return r.formIds={footer:{fontColor:"",position:"",text:""},header:{fontColor:"",position:"",text:""}},r.formCss={form:"add-pdf-header-and-footer--form",formGroup:"add-pdf-header-and-footer--form-group",row:"form-group--label-row",column:"form-group--label-column",headerSection:"add-pdf-header-and-footer--header",footerSection:"add-pdf-header-and-footer--footer",section:"add-pdf-header-and-footer--section",container:"add-pdf-header-and-footer--form-container"},r.translateLabelKeys={header:"ui-header-footer-header",footer:"ui-header-footer-footer",fontColor:"ui-header-footer-color",fontName:"ui-header-footer-font",fontSize:"ui-header-footer-font-size",position:"ui-header-footer-position",header_position:"m-popup-header-and-footer-header-position",footer_position:"m-popup-header-and-footer-footer-position"},r.initialized=!1,r.formSectionIds=Object.create(null),r.keyList=["text","position","fontColor"],r.css.parent+=" "+r.formCss.form,r.initIds(),r.initModel(),r}return jr(e,t),e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.createTemplate=function(){var t=this.formCss,e=function(e,r){return'<div id="'+e+'" class="'+t.section+" "+r+'"></div>'},r="";return r+=e(this.formSectionIds.header,t.headerSection),r+=e(this.formSectionIds.footer,t.footerSection),'<div class="'+t.container+'">'+r+"</div>"},e.prototype.bind=function(){var e=this;this.isDesktop=this.serviceProvider.mediaService.isDesktop(),t.prototype.bind.call(this);var r=this.serviceProvider.viewerService;this.setDisableState(!0),r.onRunJobDisabledChange(!0),r.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){var n=!e.model.valid;t||e.initialized&&!n||r.onRunJobDisabledChange(!0)})),r.filesUpdated$.pipe(R(this.destroyEvent),G((function(t){return!!t&&1===t.length})),Yt((function(t){return t[0]}))).subscribe((function(){if(e.initialized=!0,e.serviceProvider.formValuesService.has(vt.addPdfHeaderAndFooter)){var t=e.serviceProvider.formValuesService.get(vt.addPdfHeaderAndFooter);e.model.pending=t.pending,e.model.valid=t.valid,e.model.header.fontColor=t.header.fontColor,e.model.header.position=t.header.position,e.model.header.text=t.header.text,e.model.footer.fontColor=t.footer.fontColor,e.model.footer.position=t.footer.position,e.model.footer.text=t.footer.text}e.setValue(e.model),e.setDisableState(!1)})),this.serviceProvider.mediaService.change$.pipe(R(this.destroyEvent)).subscribe((function(t){t.isDesktopByWidth!==e.isDesktop&&(e.toggleLabelOrientation(t.isDesktopByWidth),e.isDesktop=t.isDesktopByWidth)})),this.toggleLabelOrientation(this.isDesktop)},e.prototype.onValueChanged=function(t){var e=this;this.controls.forEach((function(r){var n=r.component,o=n.getValue(),i=o.toString().trim(),s=e.getDataFromKey(n.key),a=s.section,c=s.fieldName,u=(t[a][c]||"").toString().trim();if(i!==u)if(n.type===me.select){var p=n,l=p.getOptions(),f=e.getOption(l,u||o.toString());p.setValue(f)}else n.setValue(u||"")})),t.valid=this.initialized&&this.isValidModel(t),this.initialized&&this.serviceProvider.viewerService.onRunJobDisabledChange(!t.valid),this.serviceProvider.toolsConfigService.setFormValue(t),this.model=t},e.prototype.createControls=function(){var t=this,e=this.serviceProvider.mediaService;Object.keys(this.formSectionIds).forEach((function(r){t.keyList.forEach((function(n){var o=t.createFieldKey(r,n);switch(n){case"text":t.controls.push({component:new Je(t.formSectionIds[r],o,{formGroupCss:t.formCss.formGroup,inputType:me.text,labelKey:t.translateLabelKeys[r]})});break;default:var i=t.createOption(n),s=t.translateLabelKeys[n];if(e.isMobile()){var a=r+"_"+n;t.translateLabelKeys.hasOwnProperty(a)&&(s=t.translateLabelKeys[a])}var c=void 0;c=e.isMobile()&&"fontColor"===n?new Tr(t.formSectionIds[r],o,{formGroupCss:t.formCss.formGroup,labelKey:s,options:i}):new Pe(t.formSectionIds[r],o,{formGroupCss:t.formCss.formGroup,labelKey:s,options:i}),t.controls.push({component:c,config:{key:n,values:i.map((function(t){return t.key})),default:i[0].key}})}}))}))},e.prototype.bindControl=function(t){var e=this,r=t.component,n=this.getDataFromKey(r.key);switch(n.fieldName){case"text":r.input$.pipe(R(this.destroyEvent),G((function(t){return!t.event.isDefaultPrevented()}))).subscribe((function(t){var r;t.event.preventDefault(),r=(t.value.toString()||"").trim(),e.model[n.section][n.fieldName]=r,e.change.next(e.model)}));break;default:var o=r;o.change$.pipe(R(this.destroyEvent)).subscribe((function(){e.model[n.section][n.fieldName]=o.getValue(),e.change.next(e.model)})),this.model[n.section][n.fieldName]=o.getValue(),this.change.next(this.model)}},e.prototype.isValidModel=function(t){return!!t.header.text||!!t.footer.text},e.prototype.initIds=function(){var t=this;Object.keys(this.formIds).forEach((function(e){t.formSectionIds[e]=t.createChildId(""+e),Object.keys(t.formIds[e]).forEach((function(r){t.formIds[e][r]=t.createChildId(e+"__"+r)}))}))},e.prototype.initModel=function(){var t=this,e=Object.create(null);Object.keys(this.formIds).forEach((function(r){e[r]=Object.create(null),Object.keys(t.formIds[r]).forEach((function(t){e[r][t]=void 0}))})),e.valid=!1,e.pending=!1,this.model=e},e.prototype.createOption=function(t){var e=this.serviceProvider.Translate;switch(t){case"position":return[{key:cr.left,text:e.get("ui-header-footer-position-left"),value:cr.left},{key:cr.center,text:e.get("ui-header-footer-position-center"),value:cr.center},{key:cr.right,text:e.get("ui-header-footer-position-right"),value:cr.right}];case"fontColor":return e.get("ui-header-footer-color-list").map((function(t){return{key:t.key,text:t.name,value:t.value}}));default:throw new Error("controlName doest exists")}},e.prototype.toggleLabelOrientation=function(t){var e=this,r=t?this.formCss.row:this.formCss.column,n=this.isDesktop?this.formCss.row:this.formCss.column;this.getControls().forEach((function(t){var o=e.helper.getById(t.component.componentId);o.toggleClass(n,!1),o.toggleClass(r,!0)}))},e.prototype.getOption=function(t,e){return t.find((function(t){return t.value===e}))},e.prototype.createFieldKey=function(t,e){return t+"__"+e},e.prototype.getDataFromKey=function(t){var e=Dr(t.split("__"),2);return{section:e[0],fieldName:e[1]}},e}(qe);function Ar(t,e){if(void 0===e&&(e=2),0===t)return"0 Bytes";var r=e<0?0:e,n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}!function(t){t.png="image/png",t.jpeg="image/jpeg",t.jpg="image/jpg",t.bmp="image/bmp",t.gif="image/gif",t.tiff="image/tiff",t.jfif="jpeg/jfif",t.pdf="application/pdf",t.doc="application/msword",t.docX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",t.rtf="application/rtf",t.rtfX="application/x-rtf",t.textRtf="text/richtext",t.odt="application/vnd.oasis.opendocument.text",t.ods="application/vnd.oasis.opendocument.spreadsheet",t.ppt="application/vnd.ms-powerpoint",t.pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",t.xls="application/vnd.ms-excel",t.xlt="\tapplication/vnd.ms-excel",t.xla="\tapplication/vnd.ms-excel",t.xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.djvu="image/vnd.djvu",t.djvuX="image/x-djvu",t.epub="application/epub+zip",t.fb2="application/fb2+xml",t.mobi="application/x-mobipocket-ebook",t.txt="text/plain",t.html="text/html",t.xml="text/xml",t.chm="application/vnd.ms-htmlhelp",t.rtfAll="application/rtf, application/x-rtf, text/richtext",t.djvuAll="image/vnd.djvu, image/x-djvu",t.excelAll="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.powerPoint="application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation",t.document="application/msword, application/x-rtf, application/rtf, text/richtext, application/x-soffice, application/vnd.openxmlformats-officedocument.wordprocessingml.document",t.image="image/png, image/jpeg, image/jpg, image/bmp, image/tiff"}(xr||(xr={}));var Fr,Lr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rr=function(t){function e(e){var r=t.call(this,e)||this;return r.formCss={form:"add-pdf-watermark--form",formGroup:"add-pdf-watermark--form-group",row:"form-group--label-row",column:"form-group--label-column",aimTarget:{iconContainer:"aim-icon-target--container",pageBox:"pages-box",canvasPage:"canvas-page",isMobile:"is-mobile",options:{jc:"--j-center",js:"--j-start",je:"--j-end",as:"--a-start",ac:"--a-center",ae:"--a-end"}}},r.css.parent+=" "+r.formCss.form,r.initViewModel(),r.model={pending:!1,valid:!1,position:void 0,text:void 0,file:void 0},r.onInitialized=new O,r}return Lr(e,t),Object.defineProperty(e.prototype,"$aimTarget",{get:function(){return this.helper.getById(this.aimTarget.id)},enumerable:!0,configurable:!0}),e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.createTemplate=function(){var t=this.serviceProvider.mediaService.isMobile()?r(462):r(463);return this.setTemplateValuesByModel(t,this.viewModel)},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.setDisableState(!0);var r=this.serviceProvider.viewerService;r.onRunJobDisabledChange(!0),r.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){var n=!e.model.valid;t||e.initialized&&!n||r.onRunJobDisabledChange(!0)}));var n=this.serviceProvider.mediaService;this.isMobile=n.isMobileByWidth();var o=r.viewItemReady$.pipe(R(this.destroyEvent),G((function(t){return t.pdfPage})),Lt(1)),i=new O;if(i.asObservable().pipe(R(this.destroyEvent)).subscribe((function(t){var n=r.getMinMaxItemValue();t.maxSize=n.max;var o=e.serviceProvider.pdfService.getViewPortInfo(t.pdfPage,n.max).viewport;t.component.setImage(t.zoomImageInfo.url,o.width,o.height),e.resizeAimTarget(o)})),o.pipe(R(this.destroyEvent),tr((function(t){return function(t){return t.zoomImageInfo?Qe(t.zoomImageInfo).pipe(Lt(1),Yt((function(){return t}))):e.serviceProvider.pdfService.renderZoom$(t.pdfPage,t.destroy$,e.destroyEvent).pipe(Yt((function(e){return t.zoomImageInfo=Object.assign(t.zoomImageInfo||{angle:0,dimensions:null,url:void 0},e),t})))}(t)}))).subscribe((function(t){e.initialized=!0,e.initAimTarget(t),e.setDisableState(!1),e.serviceProvider.formValuesService.has(vt.addPdfWatermark)&&Object.assign(e.model,e.serviceProvider.formValuesService.get(vt.addPdfWatermark)),e.setValue(Object.assign({},e.model));var r=e.controls.find((function(t){return"position"===t.component.key})).component,o=r.getOptions().find((function(t){return t.key===e.model.position}));o&&r.setValueByKey(o.key),e.bindFileActions();var s=n.isDesktopByWidth();e.onInitialized.next(),i.next(t),n.change$.pipe(R(e.destroyEvent)).subscribe((function(){var r=n.isMobileByWidth(),o=n.isDesktopByWidth();r!==e.isMobile&&(e.toggleLabelOrientation(r),e.isMobile=r),o!==s&&(s=o),i.next(t)}))})),this.toggleLabelOrientation(this.isMobile),this.getOnDestroy$().pipe(Lt(1)).subscribe((function(){return i.complete()})),this.serviceProvider.mediaService.isMobile()){var s=this.helper.getById(this.viewModel.typeSelectorId),a=this.model.file?"image":"text";s.find("input").val([a]),this.changeViewByType(a),re(s.get(0),"change").pipe(R(this.destroyEvent)).subscribe((function(t){a=$(t.target).val(),e.changeViewByType(a)})),this.change.asObservable().pipe(R(this.destroyEvent),G((function(){return"image"===a}))).subscribe((function(){e.changeViewByType(a)}))}},e.prototype.isValidModel=function(t){return!!t.text||!!t.file},e.prototype.onValueChanged=function(t){var e=this,r=function(){e.controls.forEach((function(r){var n=r.component,o=n.getValue(),i=o.toString().trim(),s=(t[n.key]||"").toString().trim();if(i!==s)if(n.type===me.select){var a=n,c=a.getOptions(),u=e.getOption(c,s||o.toString());a.setValue(u)}else n.setValue(s||"")})),t.valid=e.initialized&&e.isValidModel(t),e.serviceProvider.viewerService.onRunJobDisabledChange(!t.valid),e.serviceProvider.toolsConfigService.setFormValue(t,!1),e.model=t};this.initialized?r():this.onInitialized.asObservable().pipe(R(this.destroyEvent),Lt(1)).subscribe((function(){return r()}))},e.prototype.createControls=function(){var t=this.viewModel;this.controls.push({component:new Je(t.textContainerId,"text",{formGroupCss:this.formCss.formGroup,inputType:me.text,labelKey:"ui-text",placeholderKey:"ph-watermark-text"})});var e=this.createOption("position");this.controls.push({component:new Pe(t.selectContainerId,"position",{formGroupCss:this.formCss.formGroup,options:e,labelKey:"ui-layout"}),config:{key:"position",values:e.map((function(t){return t.key})),default:e[0].key}})},e.prototype.bindControl=function(t){switch(t.component.type){case me.text:this.bindInput(t);break;case me.select:this.bindSelect(t)}},e.prototype.changeViewByType=function(t){var e=this.viewModel,r=this.helper.css.displayNone;switch(t){case"text":this.helper.getById(e.selectContainerId).toggleClass(r,!1),this.helper.getById(e.textContainerId).toggleClass(r,!1),this.helper.getById(e.btnAddFileId).toggleClass(r,!0),this.helper.getById(e.fileInfoContainerId).toggleClass(r,!0),this.getControl("text").component.setDisableState(!1),this.helper.getById(this.viewModel.inputFileId).val(null),this.model.file=void 0,this.change.next(this.model);break;case"image":var n=!!this.model.file;if(this.helper.getById(e.btnAddFileId).toggleClass(r,n),this.helper.getById(e.fileInfoContainerId).toggleClass(r,!n),this.helper.getById(e.textContainerId).toggleClass(r,!0),this.helper.getById(e.selectContainerId).toggleClass(r,!n),n){var o=this.model.file,i=Ar(o.size),s=[o.name,i].join(", ");this.helper.getById(e.fileNameId).html(o.name).attr("title",s)}}},e.prototype.toggleLabelOrientation=function(t){var e=this,r=t?this.formCss.column:this.formCss.row,n=this.isMobile?this.formCss.column:this.formCss.row;this.getControls().forEach((function(t){var o=e.helper.getById(t.component.componentId);o.toggleClass(n,!1),o.toggleClass(r,!0)}))},e.prototype.bindSelect=function(t){var e=this;t.component.change$.pipe(R(this.destroyEvent)).subscribe((function(r){e.model[t.component.key]=r.value,e.initialized&&(e.onSelectChange(r),e.change.next(e.model))}))},e.prototype.onSelectChange=function(t){var e=this,r=t.value,n=this.formCss.aimTarget.options,o=Object.values(n);this.$aimTarget.removeClass(o);var i=n.jc,s=n.as;switch(r){case cr.topLeft:i=n.as,s=n.js;break;case cr.topCenter:i=n.as,s=n.jc;break;case cr.topRight:i=n.as,s=n.je;break;case cr.middleLeft:i=n.ac,s=n.js;break;case cr.middleCenter:i=n.ac,s=n.jc;break;case cr.middleRight:i=n.ac,s=n.je;break;case cr.bottomLeft:i=n.ae,s=n.js;break;case cr.bottomCenter:i=n.ae,s=n.jc;break;case cr.bottomRight:i=n.ae,s=n.je}var a=function(){var t=e.$aimTarget;t.removeClass(o),t.addClass([i,s])};this.initialized?a():this.onInitialized.asObservable().pipe(R(this.destroyEvent),Lt(1)).subscribe((function(){a()}))},e.prototype.bindInput=function(t){var e=this;t.component.input$.pipe(R(this.destroyEvent),G((function(t){return!t.event.isDefaultPrevented()}))).subscribe((function(t){t.event.preventDefault(),e.model.text=(t.value.toString()||"").trim(),e.change.next(e.model)}))},e.prototype.bindFileActions=function(){var t=this,e=this.viewModel,r=new O;this.getOnDestroy$().pipe(Lt(1)).subscribe((function(){return r.complete()})),re(this.helper.getById(e.btnAddFileId).get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(){t.helper.getById(e.inputFileId).trigger("click")})),re(this.helper.getById(e.btnRemoveId).get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(){return r.next(null)})),re(this.helper.getById(e.inputFileId).get(0),"change").pipe(R(this.destroyEvent),Yt((function(t){return t.target}))).subscribe((function(t){return r.next(t)})),r.asObservable().pipe(R(this.destroyEvent)).subscribe((function(r){if(t.initialized){var n;if(r&&r.files&&r.files.length){n=r.files[0];var o=t.serviceProvider.fileMetaDataService.getFileExtension(n.name),i=[dt.jpg,dt.jpeg,dt.bmp,dt.png];if(i.find((function(t){return t.toLowerCase()===o})))t.model.file=n;else{var s=i.map((function(t){return"."+t})).join(", ");t.serviceProvider.errorDialogService.showFormatError(s,o,!1),t.model.file=null}}else t.model.file=null;if(t.model.file){var a=Ar(n.size),c=[n.name,a].join(", ");t.helper.getById(e.fileNameId).html(n.name).attr("title",c)}!function(r){t.helper.getById(e.fileInfoContainerId).toggleClass(t.helper.css.displayNone,!r);var n=t.getControl("text").component;r&&(t.model.text="",n.setValue("")),n.setDisableState(r)}(!!t.model.file),t.change.next(t.model),t.helper.getById(e.inputFileId).val(null)}}))},e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate,e=t.get("ui-or-image"),r=[xr.jpeg,xr.jpg,xr.png,xr.bmp].join(",");this.viewModel={textContainerId:z.createQuickGuidAsString(),selectContainerId:z.createQuickGuidAsString(),btnAddFileId:z.createQuickGuidAsString(),btnRemoveId:z.createQuickGuidAsString(),fileInfoContainerId:z.createQuickGuidAsString(),inputFileId:z.createQuickGuidAsString(),accept:r,iconAimSmall:qt.aimSmall,iconClose:qt.Close,labelTryOrAdd:e,fileNameId:z.createQuickGuidAsString()},this.serviceProvider.mediaService.isMobile()&&(this.viewModel.typeSelectorId=z.createQuickGuidAsString(),this.viewModel.labelUploadImage=t.get("m-popup-add-watermark-upload-image"),this.viewModel.labelImage=t.get("m-popup-add-watermark-image"),this.viewModel.imageIconUrl=qt.createSvgIconUrl("image"),this.viewModel.labelType=t.get("m-popup-add-watermark-type"),this.viewModel.keyboardIconUrl=qt.createSvgIconUrl("keyboard"),this.viewModel.plusIconUrl=qt.createSvgIconUrl("plus"))},e.prototype.initAimTarget=function(t){var e=this.formCss.aimTarget,r=this.createChildId("monitor",t.fileId),n=this.helper.getById(r);n.length||(n=$("<span id='"+r+"' class=\""+e.iconContainer+" "+e.options.js+" "+e.options.as+' ">'+qt.aimMedium+"</span>"));var o=t.component.getImageContainer(),i=o.find("img").attr("id"),s=this.helper.getById(i);this.aimTarget={dimensions:this.helper.getImageSize(s),id:r,srcImageId:i},this.resizeAimTarget(this.aimTarget.dimensions),o.prepend(n)},e.prototype.resizeAimTarget=function(t){this.$aimTarget.css({width:t.width,height:t.height})},e.prototype.createOption=function(t){switch(t){case"position":var e=this.serviceProvider.Translate;return[{key:cr.topLeft,text:e.get("ui-top-left"),value:cr.topLeft},{key:cr.topCenter,text:e.get("ui-top-center"),value:cr.topCenter},{key:cr.topRight,text:e.get("ui-top-right"),value:cr.topRight},{key:cr.middleLeft,text:e.get("ui-middle-left"),value:cr.middleLeft},{key:cr.middleCenter,text:e.get("ui-middle-center"),value:cr.middleCenter},{key:cr.middleRight,text:e.get("ui-middle-right"),value:cr.middleRight},{key:cr.bottomLeft,text:e.get("ui-bottom-left"),value:cr.bottomLeft},{key:cr.bottomCenter,text:e.get("ui-bottom-center"),value:cr.bottomCenter},{key:cr.bottomRight,text:e.get("ui-bottom-right"),value:cr.bottomRight}];default:throw new Error("controlName doest exists")}},e.prototype.getOption=function(t,e){return t.find((function(t){return t.value===e}))},e}(qe);!function(t){t.selectAll="selectAll",t.deselectAll="deselectAll"}(Fr||(Fr={}));var Vr,Br=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nr=r(464),$r=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.splitOpts={selectText:"",deselectText:"",labelText:"",pages:0,isSelect:!1,locked:!0},n.viewModel={btnToggleId:n.createChildId("toggle"),selectContainerId:n.createChildId("container"),iconOk:qt.okGray},n}return Br(e,t),Object.defineProperty(e.prototype,"$toggle",{get:function(){return this.helper.getById(this.viewModel.btnToggleId)},enumerable:!0,configurable:!0}),e.prototype.setService=function(t){this.service=t},e.prototype.setToggleVisible=function(t){this.helper.getById(this.viewModel.selectContainerId).toggleClass(this.helper.css.displayNone,!t),this.splitOpts.locked=!t},e.prototype.setSelectState=function(t,e){void 0===e&&(e=!1);var r=!1;switch(t){case Fr.deselectAll:r=!1;break;case Fr.selectAll:r=!0}this.toggleSelect(r),e&&this.service.onSelectAllPagesChange(this.splitOpts.isSelect)},e.prototype.isSelected=function(){return this.splitOpts.isSelect},e.prototype.createTemplate=function(){var e=t.prototype.createTemplate.call(this),r=$(e),n=this.serviceProvider.Translate,o=this.splitOpts;o.selectText=n.get("component-select-all-pages"),o.deselectText=n.get("component-deselect-all-pages");var i=this.setTemplateValuesByModel(Nr,this.viewModel);return r.prepend(i).get(0).outerHTML},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this);var r=this.getService();this.$toggle.click((function(t){var n=!e.splitOpts.isSelect;r.onSelectAllPagesChange(n)})),r.selectAllPagesChange$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.toggleSelect(t)})),r.onDocumentRead$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onPageCountChange(t)}))},e.prototype.toggleSelect=function(t){var e=this.splitOpts;if(!(e.locked||e.isSelect===t&&e.labelText)){var r=t?e.deselectText:e.selectText;e.labelText=r,e.isSelect=t,this.$toggle.text(e.labelText+" ("+(e.pages||"...")+")")}},e.prototype.onPageCountChange=function(t){var e=this.splitOpts;e.locked||(e.pages=t,this.$toggle.text(e.labelText+" ("+(t||"...")+")"),this.helper.getById(this.viewModel.selectContainerId).toggleClass(this.helper.css.displayNone,!t))},e.prototype.getService=function(){if(!this.service)throw new Error("service was not set to instance");return this.service},e}(Qt),zr=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Ur=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zr(arguments[e]));return t},Hr=function(){function t(){}return t.parseValue=function(t,e){void 0===e&&(e=null);var r=[];if(!t)return e;if(!(t=this.getSaveValue(t)))return e;for(var n=t.split(",").map((function(t){return t.trim()})).map((function(t){return t.split("-").map((function(t){return+t.trim()}))})),o=0;o<n.length;o++){var i=n[o];if(i.length)if(1===i.length)r.push(i[0]);else if(2===i.length){var s=i[0],a=i[1];if(s<a)for(var c=s;c<=a;c++)r.push(c);else if(s>a)for(c=s;c>=a;c--)r.push(c);else r.push(s)}}return r},t.getSaveValue=function(t){return(t||"").replace(/[^\d,-]/gm,"").replace(/^0+-/g,"1-").replace(/,0+-/g,",1-").replace(/^0+/g,"").replace(/(,+0+)/g,",").replace(/(-+0+)/g,"-").replace(/( +0+)/g," ").replace(/-+/g,"-").replace(/-,/g,",").replace(/,+/g,",").replace(/ +/g,"")},t.replaceMaxValue=function(t,e){var r="";return t.split(",").forEach((function(t){var n="",o=zr(t.split("-").map((function(t){return+t})),2),i=o[0],s=o[1],a=!1;if(i>s){var c=s;s=i,i=c,a=!0}i>e&&(i=e),s>e&&(s=e),i&&s?n=a?s+"-"+i:i+"-"+s:i?n=i+"":s&&(n=s+""),r+=r?","+n:n})),this.getSaveValue(r)},t.lastIsSeparator=function(t){return(t=(t||"").trim()).endsWith(",")||t.endsWith("-")},t.pagesToValue=function(t){var e="";return t.forEach((function(t,r,n){if(0===r)e+=t;else{var o=n[r-1],i=n[r+1],s=n[r];i?o+1===s&&s+1===i||(e+=o+1===s&&s+1!==i?"-"+s:","+s):e+=s-o==1?"-"+s:","+s}})),e},t.pagesToObject=function(t){var e=Object.create(null);return t&&t.length?(t.forEach((function(t){e[t]=!0})),e):e},t.objToPages=function(t){return t?Object.keys(t).map((function(t){return+t})):[]},t.createAllPagesValue=function(t){if(!t)throw new Error("!totalPages");return t>1?"1-"+t:t.toString()},t.isEqualWithTotalPages=function(t,e){if(!t||!e)return!1;if(this.lastIsSeparator(t))return!1;var r=this.parseValue(t);return Ur(new Set(r)).length===e},t}(),Gr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jr=function(t){function e(e){var r=t.call(this,e)||this;return r.initialized=!1,r.keys={mode:"mode",pages:"pages"},r.formCss={form:"split-pdf--form",formGroup:"split-pdf--form-group",row:"form-group--label-row",column:"form-group--label-column"},r.formIds={mode:"",pages:""},r.formIds={mode:z.createQuickGuidAsString(),pages:z.createQuickGuidAsString()},r.model={mode:void 0,pages:"",pending:!1,valid:!1},r}return Gr(e,t),Object.defineProperty(e.prototype,"inputCtrl",{get:function(){return this.getControl(this.keys.pages).component},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.setDisableState(!0)},e.prototype.setDisableState=function(e){t.prototype.setDisableState.call(this,e)},e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.setAllPages=function(){var t=this.getAllPagesValue();this.model.pages=t,this.model.valid=this.isValidModel(this.model),this.inputCtrl.setValue(t)},e.prototype.setTotalPages=function(t){this.totalPages=t},e.prototype.resetPages=function(t){void 0===t&&(t=""),this.model.pages=t,this.model.valid=!!t,this.inputCtrl.setValue(t)},e.prototype.getValue=function(){return it.asJson(this.model)},e.prototype.setValidPages=function(t){this.inputCtrl.setValidation(t)},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.setDisableState(!0),this.serviceProvider.viewerService.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){if(t||e.initialized){var r=!e.model.valid;r&&t!==r&&e.serviceProvider.viewerService.onRunJobDisabledChange(r)}else e.serviceProvider.viewerService.onRunJobDisabledChange(!1)})),this.serviceProvider.viewerService.onRunJobDisabledChange(!0),this.serviceProvider.splitService.onDocumentRead$.pipe(R(this.destroyEvent)).subscribe((function(t){e.totalPages=t,e.initialized=!0}))},e.prototype.onValueChanged=function(t){var e=this;this.destroyed||(this.controls.forEach((function(r){var n=r.component,o=n.getValue(),i=o.toString().trim(),s=t[n.key].toString().trim();if(i!==s)if(n.type===me.select){var a=n,c=a.getOptions(),u=e.getOption(c,s.toString()||o.toString());a.setValue(u)}else n.setValue(s||"")})),this.model=t,this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.serviceProvider.toolsConfigService.setFormValue(t))},e.prototype.createControls=function(){var t=this.keys.mode,e=xe.splitPdfMode();this.controls.push({component:new Pe(this.parentId,t,{formGroupCss:this.formCss.formGroup,options:e}),config:{key:t,values:e.map((function(t){return t.key})),default:St.single}}),this.model.mode=St.single,this.controls.push({component:new Je(this.parentId,this.keys.pages,{formGroupCss:this.formCss.formGroup,inputType:me.text,labelKey:"m-popup-split-pdf-number-page",placeholderKey:"Pages, i.e. 1,2-4,8-13",useResetBtn:!0})})},e.prototype.bindControl=function(t){var e=t.component;switch(e.type){case me.select:this.bindSelect(e);break;case me.text:this.bindInput(e)}},e.prototype.bindSelect=function(t){var e=this;t.change$.pipe(R(this.destroyEvent)).subscribe((function(r){e.model[t.key]=r.value,e.onInputChange(e.model.pages,e.getControl(e.keys.pages).component)}))},e.prototype.bindInput=function(t){var e=this;t.input$.pipe(R(this.destroyEvent)).subscribe((function(r){r.event.isDefaultPrevented()||(r.event.preventDefault(),e.onInputChange(r.value,t))})),t.change$.pipe(R(this.destroyEvent)).subscribe((function(r){e.onInputChange(r,t)}))},e.prototype.onInputChange=function(t,e){if(!this.destroyed){if(e.setResetBtnVisible(!!t),!(t||"").trim())return this.model.valid=!1,this.model.pages="",this.setValidPages(this.model.valid),void this.change.next(this.getValue());if(Hr.lastIsSeparator(t))return this.model.valid=!1,this.model.pages=t,this.setValidPages(this.model.valid),void this.change.next(this.getValue());var r=Hr.replaceMaxValue(Hr.getSaveValue(t),this.totalPages);this.model.mode===St.deleteSelected?this.model.valid=!!r&&!Hr.isEqualWithTotalPages(r,this.totalPages):this.model.valid=!!r,this.model.pages=r,this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.setValidPages(this.model.valid),this.change.next(this.getValue())}},e.prototype.getOption=function(t,e){return t.find((function(t){return t.value===e}))},e.prototype.isValidModel=function(t){return t.valid},e.prototype.getAllPagesValue=function(){return Hr.createAllPagesValue(this.totalPages)},e}(qe),Wr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qr=function(t){function e(e){var r=t.call(this,e)||this;return r.initialized=!1,r.keys={pages:"pages"},r.formIds={pages:""},r.formCss={form:"delete-pages--form",formGroup:"delete-pages--form-group",row:"form-group--label-row",column:"form-group--label-column"},r.formIds={pages:z.createQuickGuidAsString()},r.model={pages:"",pending:!1,valid:!1},r}return Wr(e,t),Object.defineProperty(e.prototype,"inputCtrl",{get:function(){return this.getControl(this.keys.pages).component},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.setDisableState(!0)},e.prototype.focus=function(){this.serviceProvider.mediaService.isMobileByWidth()||this.inputCtrl.focus()},e.prototype.setDisableState=function(e){t.prototype.setDisableState.call(this,e)},e.prototype.isValid=function(){return this.initialized&&this.isValidModel(this.model)},e.prototype.setAllPages=function(){var t=this.getAllPagesValue();this.model.pages=t,this.model.valid=this.isValidModel(this.model),this.inputCtrl.setValue(t)},e.prototype.setTotalPages=function(t){this.totalPages=t},e.prototype.resetPages=function(t){void 0===t&&(t=""),this.model.pages=t,this.inputCtrl.setValue(t)},e.prototype.getValue=function(){return it.asJson(this.model)},e.prototype.setValidPages=function(t){this.inputCtrl.setValidation(t),this.serviceProvider.viewerService.onRunJobDisabledChange(!t)},e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.setDisableState(!0),this.serviceProvider.viewerService.runJobDisabledChange$.pipe(R(this.destroyEvent)).subscribe((function(t){var r=!e.model.valid;r&&t!==r&&e.serviceProvider.viewerService.onRunJobDisabledChange(r)})),this.serviceProvider.viewerService.onRunJobDisabledChange(!0),this.serviceProvider.deletePagesService.onDocumentRead$.pipe(R(this.destroyEvent)).subscribe((function(t){e.totalPages=t,e.initialized=!0,e.bindInput(e.inputCtrl),e.onValueChanged(e.model,!0)}))},e.prototype.onValueChanged=function(t,e){void 0===e&&(e=!1),this.initialized?(this.controls.forEach((function(r){var n=r.component,o=(n.getValue()||"").toString().trim(),i=(t[n.key]||"").toString().trim();(o!==i||e)&&n.setValue(i||"")})),this.model=it.asJson(t),this.serviceProvider.viewerService.onRunJobDisabledChange(!this.model.valid),this.serviceProvider.toolsConfigService.setFormValue(this.model)):this.model=it.asJson(t)},e.prototype.createControls=function(){this.controls.push({component:new Je(this.parentId,this.keys.pages,{formGroupCss:this.formCss.formGroup,inputType:me.text,labelKey:"m-popup-delete-pages-number-page",placeholderKey:"Pages, i.e. 1,2-4,8-13",useResetBtn:!0})})},e.prototype.bindControl=function(t){},e.prototype.bindInput=function(t){var e=this,r=function(r){if(!e.destroyed){if(t.setResetBtnVisible(!!r),!(r||"").trim())return e.model.valid=!1,e.model.pages="",e.setValidPages(e.model.valid),void e.change.next(e.getValue());if(Hr.lastIsSeparator(r))return e.model.valid=!1,e.model.pages=r,e.setValidPages(e.model.valid),void e.change.next(e.getValue());var n=Hr.replaceMaxValue(Hr.getSaveValue(r),e.totalPages);e.model.valid=!!n&&!Hr.isEqualWithTotalPages(n,e.totalPages),e.model.pages=n,e.setValidPages(e.model.valid),e.change.next(e.getValue())}};t.input$.pipe(R(this.destroyEvent)).subscribe((function(t){t.event.isDefaultPrevented()||(t.event.preventDefault(),r(t.value))})),t.change$.pipe(R(this.destroyEvent)).subscribe((function(t){r(t)}))},e.prototype.isValidModel=function(t){return t.valid},e.prototype.getAllPagesValue=function(){return Hr.createAllPagesValue(this.totalPages)},e}(qe),Zr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kr=function(t){function e(e){var r=t.call(this,e)||this;return r.parentId=e,r.css={show:"show"},r.ids={componentId:r.componentId},r}return Zr(e,t),e.prototype.show=function(){this.$component.addClass(this.css.show)},e.prototype.hide=function(){this.$component.removeClass(this.css.show)},e.prototype.createTemplate=function(){return this.setTemplateValuesByModel('<div id="@@componentId@@" class="page-loader--container"><div class="gif-spinner"></div></div>',this.ids)},e.prototype.bind=function(){},e}(Nt),Qr=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yr=r(465);!function(t){t.left="left",t.right="right",t.zero="zero"}(Vr||(Vr={}));var Xr,tn=function(t){function e(e,r,n){var o=t.call(this,e,r)||this;return o.defaultImageUrl=n,o.css={isRendering:"page-item--is-rendering",isLocked:"page-item--is-locked",isSelected:"page-item--is-selected",isDeletable:"page-item--is-deletable",tooltipElement:"tooltip-element"},o.defaultImageUrl||(o.defaultImageUrl=qt.getIconRoot()+"/file-item-default.svg"),o.delete=new O,o.zoom=new O,o.click=new O,o.rotate=new O,o.lock=new O,o.imageChange=new H(null),o.delete$=o.delete.pipe(R(o.destroyEvent)),o.zoom$=o.zoom.pipe(R(o.destroyEvent)),o.click$=o.click.pipe(R(o.destroyEvent)),o.rotate$=o.rotate.pipe(R(o.destroyEvent)),o.lock$=o.lock.pipe(R(o.destroyEvent)),o.imageChange$=o.imageChange.pipe(R(o.destroyEvent),G((function(t){return!!t}))),o.ids={componentId:o.componentId,totalPagesId:o.createChildId("total-pages"),pageNumberId:o.createChildId("page-number"),imageId:o.createChildId("image"),nameId:o.createChildId("name"),pageBoxId:o.createChildId("page-box"),imageContainerId:o.createChildId("image-container"),actionsLeftId:o.createChildId("actions-left"),actionsRightId:o.createChildId("actions-right"),btnUnlockId:o.createChildId("btn__unlock"),deleteId:o.createChildId("btn__delete"),zoomId:o.createChildId("btn__zoom"),rotateLeftId:o.createChildId("btn__rotate-left"),rotateRightId:o.createChildId("btn__rotate-right"),iconBoxId:o.createChildId("icon-box"),tooltipId:o.createChildId("tooltip")},o.options={isRendering:!1,isLocked:!1,isSelected:!1,showPageBox:!1,useRotate:!1,useZoom:!1,useDelete:!0,pageNumberIsVisible:!1,pageNumber:0,imgDimensions:o.getInitImageSize(),ignoreRenderingOnClick:!1},o.spinner=new Kr(o.ids.imageContainerId),o}return Qr(e,t),e.prototype.destroyComponent=function(){this.delete.complete(),this.zoom.complete(),this.click.complete(),this.rotate.complete(),this.lock.complete(),this.spinner.destroyComponent(),t.prototype.destroyComponent.call(this)},e.prototype.setImageAsSvg=function(t,e,r){var n=this.helper.getById(this.ids.imageId),o=n.attr("class"),i=$(t).attr("id",this.ids.imageId).attr("class",o),s=$("<div/>",{class:"page-item--svg-container"}).css({width:e,height:r}).append(i);n.replaceWith(s)},e.prototype.changeOrder=function(t){this.$component.css("order",t)},e.prototype.setRenderingState=function(t){this.options.isRendering=t,this.$component.toggleClass(this.css.isRendering,t),t?this.spinner.show():this.spinner.hide()},e.prototype.setLockedState=function(t){this.options.isLocked=t,this.$component.toggleClass(this.css.isLocked,t)},e.prototype.setTotalPages=function(t){this.viewModel.totalPages=t,this.helper.getById(this.ids.totalPagesId).html(t.toString())},e.prototype.setRotateImage=function(t){this.helper.getById(this.ids.imageId).css("transform","rotate("+t+"deg)")},e.prototype.setPageNumberVisibleState=function(t){this.options.pageNumberIsVisible=t,this.toggleVisible("pageNumberIsVisible",t,[this.ids.pageNumberId])},e.prototype.getElement=function(){return this.$component},e.prototype.setPageBoxVisibleState=function(t){this.toggleVisible("showPageBox",t,[this.ids.pageBoxId])},e.prototype.setZoomBtnVisibleState=function(t){this.toggleVisible("useZoom",t,[this.ids.zoomId])},e.prototype.setRotateVisibleState=function(t){this.toggleVisible("useRotate",t,[this.ids.rotateLeftId,this.ids.rotateRightId])},e.prototype.setIgnoreRenderingOnClick=function(t){this.options.ignoreRenderingOnClick=t},e.prototype.setSelected=function(t){this.options.isSelected!==t&&(this.options.isSelected=t,this.$component.toggleClass(this.css.isSelected,this.options.isSelected))},e.prototype.isSelected=function(){return this.options.isSelected},e.prototype.setIcon=function(t){this.helper.getById(this.ids.iconBoxId).html(t)},e.prototype.toggleIconCss=function(t,e){this.$component.toggleClass(t,e)},e.prototype.setImage=function(t,e,r){this.viewModel.imageUrl=t,this.options.imgDimensions.width=e,this.options.imgDimensions.height=r;var n=this.helper.getById(this.ids.imageId);n.attr("src",this.viewModel.imageUrl),this.helper.setImageSize(n,{width:e,height:r}),this.imageChange.next({imageUrl:t,width:e,height:r})},e.prototype.replaceImageWithCanvas=function(t,e,r){this.options.imgDimensions.width=e,this.options.imgDimensions.height=r;var n=this.helper.getById(this.ids.imageId);t.attr("class",n.attr("class")).attr("id",this.ids.imageId).toggleClass("page-item--canvas-image",!0),n.replaceWith(t)},e.prototype.getImageContainer=function(){return this.helper.getById(this.ids.imageContainerId)},e.prototype.setPageNumber=function(t){var e=this.helper.getById(this.ids.pageNumberId);this.options.pageNumber=t,e.toggleClass("page-item--big-number",t>98).html(t.toString());var r=this.helper.css.displayNone;t?e.removeClass(r):e.addClass(r)},e.prototype.setViewModelOptions=function(t){var e=this.viewModel||Object.create(null);Object.assign(e,t),this.viewModel=e},e.prototype.setDeleteBtnVisible=function(t){this.toggleVisible("useDelete",t,[this.ids.deleteId])},e.prototype.setPageName=function(t){this.helper.getById(this.ids.nameId).attr("title",t).html(t)},e.prototype.deleteItem=function(){this.delete.next(this.componentId)},e.prototype.bind=function(){this.spinner.init(),this.helper.getById(this.ids.imageId).attr("src",this.viewModel.imageUrl),this.spinner.show(),this.bindActions(),this.options.useDelete&&this.$component.addClass(this.css.isDeletable)},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(this.getHtmlTemplate(),this.ids);this.viewModel.imageUrl||(this.viewModel.imageUrl=this.defaultImageUrl);var e=this.createInitModel();return Object.assign(this.viewModel,e),this.setTemplateValuesByModel(t,e)},e.prototype.toggleVisible=function(t,e,r){var n=this;this.options[t]=e,r.forEach((function(t){return n.helper.getById(t).toggleClass(n.helper.css.displayNone,!e)}))},e.prototype.bindActions=function(){var t=this,e=function(t,e){return t.isDefaultPrevented()||(t.preventDefault(),e()),!1};this.helper.getById(this.ids.deleteId).on("click",(function(r){return e(r,(function(){return t.onDelete()}))})),this.helper.getById(this.ids.zoomId).on("click",(function(r){return e(r,(function(){return t.onZoom()}))})),this.$component.on("click",(function(r){return e(r,(function(){return t.onClick()}))})),this.helper.getById(this.ids.rotateLeftId).on("click",(function(r){return e(r,(function(){return t.onRotate(Vr.left)}))})),this.helper.getById(this.ids.rotateRightId).on("click",(function(r){return e(r,(function(){return t.onRotate(Vr.right)}))})),this.helper.getById(this.ids.btnUnlockId).on("click",(function(r){return e(r,(function(){return t.onUnlock()}))}))},e.prototype.onDelete=function(){this.options.isRendering||this.delete.next(this.componentId)},e.prototype.onZoom=function(){this.options.isLocked||this.options.isRendering||this.zoom.next(this.componentId)},e.prototype.onRotate=function(t){this.options.isLocked||this.options.isRendering||this.rotate.next({direction:t,itemId:this.componentId})},e.prototype.onClick=function(){this.options.isLocked?this.onUnlock():this.options.isRendering&&!this.options.ignoreRenderingOnClick||(this.options.isSelected=!this.options.isSelected,this.$component.toggleClass(this.css.isSelected,this.options.isSelected),this.click.next({isSelected:this.options.isSelected,itemId:this.componentId}))},e.prototype.onUnlock=function(){this.options.isLocked&&this.lock.next(this.componentId)},e.prototype.getInitImageSize=function(){var t=this.serviceProvider.viewerService.getMinMaxItemValue();return{width:t.min,height:t.max}},e.prototype.createInitModel=function(){var t=this.serviceProvider.Translate,e=this.serviceProvider.viewerService;return{imageUrl:this.viewModel.imageUrl,name:this.viewModel.name||"",totalPagesLabel:t.get("ui-pages"),btnUnlockIcon:qt.unlock,btnDeleteIcon:qt.Close,btnZoomIcon:qt.Search,btnRotateRightIcon:qt.rotateRight,btnRotateLeftIcon:qt.rotateLeft,lockBoxIcon:qt.setDimensions(qt.lock,{height:80,width:80}),imageWidth:""+e.defaultMinItemSize,imageHeight:""+e.defaultMaxItemSize}},e.prototype.getHtmlTemplate=function(){return Yr},e}(Nt),en=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rn=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.mesageId=z.createQuickGuidAsString(),n}return en(e,t),e.prototype.setMessage=function(t){t!==this.options.message&&(this.helper.getById(this.mesageId).html(this.createMessage(t)),this.options.message=t)},e.prototype.bind=function(){},e.prototype.createTemplate=function(){var t=this.options;if(!t||!t.message)return"";var e=this.createMessage(t.message),r="";switch(t.position){case"top":r="tooltip-component--top";break;case"bottom":r="tooltip-component--bottom";break;default:r="tooltip-component--top"}return'<div id="'+this.mesageId+'" class="tooltip-component '+r+'">'+e+"</div>"},e.prototype.createMessage=function(t){return'<div class="tooltip-message">'+t+"</div>"},e}(Nt),nn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),on=r(466),sn=function(t){function e(e){var r=t.call(this,e)||this;return r.disabled=!1,r.change=new O,r.reset=new O,r.ids={componentId:r.componentId,btnResetId:r.createChildId("reset"),btnRotateLeftId:r.createChildId("rotate-left"),btnRotateRightId:r.createChildId("rotate-right")},r}return nn(e,t),Object.defineProperty(e.prototype,"change$",{get:function(){return this.change.asObservable().pipe(R(this.destroyEvent))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reset$",{get:function(){return this.reset.asObservable().pipe(R(this.destroyEvent))},enumerable:!0,configurable:!0}),e.prototype.setComponentVisible=function(t){this.$component.toggleClass("--show",t)},e.prototype.setDisableState=function(t){var e=this,r=this.ids;[r.btnResetId,r.btnRotateRightId,r.btnRotateRightId].forEach((function(r){e.helper.toggleDisabled(e.helper.getById(r),t)})),this.disabled=t},e.prototype.setValue=function(t){},e.prototype.isDisabled=function(){return this.disabled},e.prototype.destroyComponent=function(){this.reset.complete(),this.change.complete(),t.prototype.destroyComponent.call(this)},e.prototype.allowReset=function(t){var e=this.helper.getById(this.ids.btnResetId);this.helper.toggleDisabled(e,!t),e.toggleClass(this.helper.css.displayNone,!t)},e.prototype.bind=function(){var t=this,e=this.serviceProvider.Translate,r=this.ids;new rn(r.btnRotateLeftId,{message:e.get("component-rotate-90-counterclockwise")}).init(),new rn(r.btnRotateRightId,{message:e.get("component-rotate-90-clockwise")}).init(),this.$parent.addClass("rotate-pages--form-container");var n=function(e,r){re(t.helper.getById(e).get(0),"click").pipe(R(t.destroyEvent)).subscribe((function(){t.helper.isDisabled(t.helper.getById(e))||r()}))},o=function(e,r){n(e,(function(){return t.change.next({direction:r})}))};o(r.btnRotateLeftId,Vr.left),o(r.btnRotateRightId,Vr.right),n(r.btnResetId,(function(){return t.reset.next(void 0)}))},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(on,this.ids),e={btnResetLabel:this.serviceProvider.Translate.get("component-revert-changes"),btnRotateLeftIcon:qt.rotateLeft,btnRotateRightIcon:qt.rotateRight};return this.setTemplateValuesByModel(t,e)},e}(Nt),an=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cn=function(t){function e(e,r){return t.call(this,e,r)||this}return an(e,t),e}($r);function un(t,e){return new _(e?function(r){return e.schedule(pn,0,{error:t,subscriber:r})}:function(e){return e.error(t)})}function pn(t){var e=t.error;t.subscriber.error(e)}Xr||(Xr={});var ln=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Qe(this.value);case"E":return un(this.error);case"C":return Ft()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function fn(t,e){void 0===e&&(e=K);var r,n=(r=t)instanceof Date&&!isNaN(+r)?+t-e.now():Math.abs(t);return function(t){return t.lift(new dn(n,e))}}var dn=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new hn(t,this.delay,this.scheduler))},t}(),hn=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.delay=r,o.scheduler=n,o.queue=[],o.active=!1,o.errored=!1,o}return o(e,t),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,o=t.destination;r.length>0&&r[0].time-n.now()<=0;)r.shift().notification.observe(o);if(r.length>0){var i=Math.max(0,r[0].time-n.now());this.schedule(t,i)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new vn(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(ln.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(ln.createComplete()),this.unsubscribe()},e}(y),vn=function(){return function(t,e){this.time=t,this.notification=e}}();function yn(t,e){return void 0===e&&(e=!1),function(r){return r.lift(new mn(t,e))}}var gn,mn=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new bn(t,this.predicate,this.inclusive))},t}(),bn=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.predicate=r,o.inclusive=n,o.index=0,o}return o(e,t),e.prototype._next=function(t){var e,r=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void r.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var r=this.destination;Boolean(e)?r.next(t):(this.inclusive&&r.next(t),r.complete())},e}(y),wn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_n=r(467),Sn=function(t){function e(e){var r=t.call(this,e)||this;return r.ids={componentId:r.componentId},r.click$=new O,r}return wn(e,t),Object.defineProperty(e.prototype,"clickEvent$",{get:function(){return this.click$.asObservable()},enumerable:!0,configurable:!0}),e.prototype.destroyComponent=function(){this.click$.complete(),t.prototype.destroyComponent.call(this)},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(_n,this.ids),e={settingsIcon:qt.gear};return this.setTemplateValuesByModel(t,e)},e.prototype.bind=function(){var t=this;re(this.$component.get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(){t.click$.next()}))},e}(Nt),Pn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xn=function(t){function e(e,r,n){var o=t.call(this,e,{popover:function(t){return new Sn(t)}})||this;return o.dialogComponent=r,o.formFactory=n,o.fileLoaded=!1,o.footerTypeCss="app-footer--with-modal-form",o}return Pn(e,t),e.prototype.bind=function(){var e=this;t.prototype.bind.call(this),this.popover.clickEvent$.pipe(R(this.destroyEvent),G((function(){return e.fileLoaded}))).subscribe((function(){e.serviceProvider.modalService.show((function(t){var r=new e.dialogComponent(t,e.formFactory,e.form);return e.form&&r.mustRecreateForm()&&e.form.destroyComponent(),r}))})),this.serviceProvider.modalService.onHide$.pipe(R(this.destroyEvent)).subscribe((function(){e.setRunJobDisabledState(e.calculateRunJobDisabledState())})),this.serviceProvider.viewerService.filesUpdated$.pipe(R(this.destroyEvent),fn(1),Lt(1)).subscribe((function(){e.fileLoaded=!0,e.form=e.formFactory(e.ids.formContainerId),e.form.init(),e.setRunJobDisabledState(e.calculateRunJobDisabledState())}));var r=this.serviceProvider.toolsConfigService.getToolName();this.runJob$.pipe(R(this.destroyEvent)).subscribe((function(t){t&&e.serviceProvider.formValuesService.remove(r)})),vt.addPdfWatermark===r&&this.bindForWatermark()},e.prototype.onDestroy=function(){this.form&&this.form.destroyComponent(),t.prototype.onDestroy.call(this)},e.prototype.updateBtnLabel=function(e,r){var n=e;switch(this.serviceProvider.toolsConfigService.getToolName()){case vt.editMetadataPdf:n="m-edit-pdf-meta-start-processing";break;case vt.addPdfPageNumbers:n="m-add-page-numbers-start-processing"}t.prototype.updateBtnLabel.call(this,n,r)},e.prototype.calculateRunJobDisabledState=function(){var t,e,r;if(!this.fileLoaded)return!0;var n=this.serviceProvider.toolsConfigService;if(n.isFormTool()){var o=this.form,i=null===(t=n.getToolConfig())||void 0===t?void 0:t.formConfig,s=!(o.isValid()||(null===(e=null==i?void 0:i.value)||void 0===e?void 0:e.valid));return vt.editMetadataPdf===n.getToolName()&&(s=s||!(null===(r=null==i?void 0:i.value)||void 0===r?void 0:r.changed)),s}return!1},e.prototype.bindForWatermark=function(){var t=this;this.$btnRunJob.addClass("display-none"),this.$popover.addClass("display-none");var e=$("<a></a>");e.addClass("app-footer--btn-run-job add-watermark--btn-run-job"),e.append(qt.svgSymbol(24,24,"plus")),e.append("<span>"+this.serviceProvider.Translate.get("m-popup-add-watermark-save-btn")+"</span>"),e.on("click",(function(){t.serviceProvider.modalService.show((function(e){var r=new t.dialogComponent(e,t.formFactory,t.form);return t.form&&r.mustRecreateForm()&&t.form.destroyComponent(),r}))})),this.$component.append(e);var r=!0;this.serviceProvider.modalService.onHide$.pipe(R(this.destroyEvent),yn((function(){return r}))).subscribe((function(){t.serviceProvider.formValuesService.has(vt.addPdfWatermark)&&(e.off(),e.remove(),e=null,r=!1,t.$btnRunJob.removeClass("display-none"),t.$popover.removeClass("display-none"))}))},e}(ce),Cn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),On=r(468),In=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.formFactory=r,o.isClosedBySelf=!1,o.form=n,o.ids={componentId:o.componentId,formContainerId:z.createQuickGuidAsString(),btnCloseId:z.createQuickGuidAsString(),btnOkId:z.createQuickGuidAsString()},o.dialogOptions={backdrop:!0},o}return Cn(e,t),Object.defineProperty(e.prototype,"$btnOk",{get:function(){return this.helper.getById(this.ids.btnOkId)},enumerable:!0,configurable:!0}),e.prototype.mustRecreateForm=function(){return!0},e.prototype.show=function(){},e.prototype.hide=function(){if(!this.isClosedBySelf){var t=this.getSavedOptions()||this.getOptions();t&&this.revertOptions(t)}this.mustRecreateForm()||this.helper.getById(this.form.parentId).append(this.helper.getById(this.ids.formContainerId).children()),this.unbind(),this.destroyComponent()},e.prototype.onDestroy=function(){this.mustRecreateForm()&&this.destroyChildren(["form"]),t.prototype.onDestroy.call(this)},e.prototype.createTemplate=function(){var t,e,r=this.setTemplateValuesByModel(On,this.ids),n=Object.assign({title:null===(t=this.viewModel)||void 0===t?void 0:t.title,btnOkLabel:null===(e=this.viewModel)||void 0===e?void 0:e.btnOkLabel});return this.setTemplateValuesByModel(r,n)},e.prototype.appendTemplate=function(){t.prototype.appendTemplate.call(this),this.mustRecreateForm()?(this.form=this.formFactory(this.ids.formContainerId),this.form.init()):this.helper.getById(this.ids.formContainerId).append(this.helper.getById(this.form.parentId).children())},e.prototype.bind=function(){var t=this,e=this.serviceProvider.toolsConfigService.getToolName(),r=this.getSavedOptions()||this.getOptions(),n=this.form;this.helper.toggleDisabled(this.$btnOk,!n.isValid()),n.change$.pipe(R(this.destroyEvent)).subscribe((function(){t.helper.toggleDisabled(t.$btnOk,!n.isValid())})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Escape"===t.key})),Lt(1)).subscribe((function(){r&&t.revertOptions(r),t.close()})),re(this.helper.getById(this.ids.btnCloseId),"click").pipe(R(this.destroyEvent),Lt(1)).subscribe((function(){r&&t.revertOptions(r),t.close()})),re(this.helper.getById(this.ids.btnOkId),"click").pipe(R(this.destroyEvent),Lt(1),fn(100)).subscribe((function(){var r=t.serviceProvider.toolsConfigService,n=t.serviceProvider.toolOptionService,o=t.getOptions();o?(r.isFormTool()||Object.keys(o).forEach((function(t){n.setDefault(t,o[t])})),o.hasOwnProperty("changed")&&(o.changed=!0,r.setFormValue(o),vt.editMetadataPdf===e&&t.form.setValue(o)),t.serviceProvider.formValuesService.save(e,o),t.close()):t.close()}))},e.prototype.revertOptions=function(t){this.serviceProvider.toolsConfigService.isFormTool()?this.form.setValue(t):this.serviceProvider.toolOptionService.saveCurrentOptions(t)},e.prototype.close=function(){this.isClosedBySelf=!0,this.serviceProvider.modalService.onComponentClose(this)},e.prototype.getOptions=function(){var t=this.serviceProvider.toolsConfigService;return t.isFormTool()?it.asTypeRecursion(t.getToolConfig().formConfig.value):this.serviceProvider.toolOptionService.getCurrentOptions()},e.prototype.getSavedOptions=function(){var t=this.serviceProvider.toolsConfigService.getToolName(),e=this.serviceProvider.formValuesService.get(t);return e||null},e}(Nt),En=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.formFactory=r,n.initViewModel(),n}return En(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-compress-pdf-header"),btnOkLabel:t.get("m-popup-compress-pdf-save-btn")}},e}(In),Tn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.formFactory=r,n.initViewModel(),n}return Tn(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-add-page-numbers-header"),btnOkLabel:t.get("m-popup-add-page-numbers-save-btn")}},e}(In),Dn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initViewModel(),n}return Dn(e,t),e.prototype.revertOptions=function(t){var e=this.form;e.change$.pipe(Lt(1)).subscribe((function(){e.setValue(t)})),e.setValue(t)},e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-add-watermark-header"),btnOkLabel:t.get("m-popup-add-watermark-save-btn")}},e}(In),An=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fn=function(t){function e(e,r,n){var o=t.call(this,e,null,n)||this;return o.initViewModel(),o}return An(e,t),e.prototype.mustRecreateForm=function(){return!1},e.prototype.bind=function(){this.fixFormValues(),t.prototype.bind.call(this)},e.prototype.revertOptions=function(t){this.form.setValue(t)},e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-edit-metadata-header"),btnOkLabel:t.get("m-popup-edit-metadata-save-btn")}},e.prototype.fixFormValues=function(){var t,e=this,r=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;r?this.serviceProvider.formValuesService.save(vt.editMetadataPdf,r):this.form.change$.pipe(Lt(1)).subscribe((function(){e.fixFormValues()}))},e}(In),Ln=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.formFactory=r,n.initViewModel(),n}return Ln(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-protect-pdf-header"),btnOkLabel:t.get("m-popup-protect-pdf-save-btn")}},e}(In),Vn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.formFactory=r,n.initViewModel(),n}return Vn(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.toolsConfigService.getToolName();this.viewModel={title:this.getTitleTranslation(t),btnOkLabel:this.getButtonTranslation(t)}},e.prototype.getTitleTranslation=function(t){var e=this.serviceProvider.Translate,r="m-popup-"+t+"-header";return e.has(r)||(r="Convert to PDF"),e.get(r)},e.prototype.getButtonTranslation=function(t){var e=this.serviceProvider.Translate,r="m-popup-"+t+"-save-btn";return e.has(r)||(r="Apply changes"),e.get(r)},e}(In),Nn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=function(t){function e(e,r,n){var o=t.call(this,e,null,n)||this;return o.ids.selectAllId=o.componentId+"__select-all",o.initViewModel(),o}return Nn(e,t),Object.defineProperty(e.prototype,"$selectAllCtrl",{get:function(){return this.helper.getById(this.ids.selectAllId)},enumerable:!0,configurable:!0}),e.prototype.mustRecreateForm=function(){return!1},e.prototype.onDestroy=function(){this.$selectAllCtrl.remove(),t.prototype.onDestroy.call(this)},e.prototype.bind=function(){var e,r=this;this.fixFormValues(),t.prototype.bind.call(this),this.helper.getById(this.ids.formContainerId).append(this.createSelectAllPagesControl());var n=((null===(e=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===e?void 0:e.value)||{}).mode;this.toggleSelectAllControlByMode(n),this.form.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return r.toggleSelectAllControlByMode(null==t?void 0:t.mode)}))},e.prototype.revertOptions=function(t){var e=this.form;e.change$.pipe(Lt(1)).subscribe((function(){e.setValue(t)})),e.setValue(t)},e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-split-pdf-header"),btnOkLabel:t.get("m-popup-split-pdf-save-btn")}},e.prototype.fixFormValues=function(){var t,e=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;this.serviceProvider.formValuesService.save(vt.splitPdf,e)},e.prototype.createSelectAllPagesControl=function(){var t=this,e=this.serviceProvider.Translate,r=$('<div id="'+this.ids.selectAllId+'" class="select-all-control"></div>');if($(".page-item").length>1){var n=$('<a href="javascript:void(0)">'+e.get("m-popup-split-pdf-select-all")+"</a>");r.append(n),re(n.get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(){t.serviceProvider.splitService.onSelectAllPagesChange(!0)}))}return r},e.prototype.toggleSelectAllControlByMode=function(t){St.single===t?this.$selectAllCtrl.show():this.$selectAllCtrl.hide()},e}(In),zn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Un=function(t){function e(e,r,n){var o=t.call(this,e,null,n)||this;return o.ids.selectAllId=o.componentId+"__select-all",o.initViewModel(),o}return zn(e,t),e.prototype.mustRecreateForm=function(){return!1},e.prototype.onDestroy=function(){this.helper.getById(this.ids.selectAllId).remove(),t.prototype.onDestroy.call(this)},e.prototype.bind=function(){this.fixFormValues(),t.prototype.bind.call(this),this.helper.getById(this.ids.formContainerId).append(this.createSelectAllPagesControl())},e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-delete-pages-header"),btnOkLabel:t.get("m-popup-delete-pages-save-btn")}},e.prototype.fixFormValues=function(){var t,e=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;e||(e={pages:"",pending:!1,valid:!1}),this.serviceProvider.formValuesService.save(vt.deletePdf,e)},e.prototype.createSelectAllPagesControl=function(){var t=this,e=this.serviceProvider.Translate,r=$('<div id="'+this.ids.selectAllId+'" class="select-all-control"></div>');if($(".page-item").length>1){var n=$('<a href="javascript:void(0)">'+e.get("m-popup-delete-pages-select-all")+"</a>");r.append(n),re(n.get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(){t.serviceProvider.deletePagesService.onSelectAllPagesChange(!0)}))}return r},e}(In),Hn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gn=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.initViewModel(),o}return Hn(e,t),e.prototype.mustRecreateForm=function(){return!1},e.prototype.bind=function(){this.fixFormValues(),t.prototype.bind.call(this)},e.prototype.revertOptions=function(t){var e=this.form,r=it.asJson(t);e.change$.pipe(Lt(1)).subscribe((function(){e.setValue(r)})),e.setValue(r)},e.prototype.fixFormValues=function(){var t,e=null===(t=this.serviceProvider.toolsConfigService.getToolConfig().formConfig)||void 0===t?void 0:t.value;e||(e={header:{text:"",fontColor:"#000000",position:cr.left},footer:{text:"",fontColor:"#000000",position:cr.left},valid:!1,pending:!1}),this.serviceProvider.formValuesService.save(vt.addPdfHeaderAndFooter,e)},e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-header-and-footer-header"),btnOkLabel:t.get("m-popup-header-and-footer-save-btn")}},e}(In),Jn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initViewModel(),n}return Jn(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-pdf-ocr-header"),btnOkLabel:t.get("m-popup-pdf-ocr-save-btn")}},e}(In),qn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initViewModel(),n}return qn(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-resize-pages-header"),btnOkLabel:t.get("m-popup-resize-pages-save-btn")}},e}(In),Kn=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qn=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initViewModel(),n}return Kn(e,t),e.prototype.initViewModel=function(){var t=this.serviceProvider.Translate;this.viewModel={title:t.get("m-popup-pdf-to-image-header"),btnOkLabel:t.get("m-popup-pdf-to-image-save-btn")}},e}(In),Yn=function(){function t(){}return t.create=function(){this.paperOptions={key:yt.paperOrientation,values:[mt.original,mt.portrait,mt.landscape],default:mt.original,isHiddenLabel:!0},this.paperMarginOptions={key:yt.paperMargin,values:[bt.no,bt.small,bt.big],default:bt.small,isHiddenLabel:!0},this.sortableLib={name:"Sortable",defaultPath:"https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.9.0/Sortable.min.js"},this.cropperLib={name:"Cropper",defaultPath:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.js"},this.cropperLibCss={name:"CropperCss",defaultPath:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.css"};var t=Object.create(null);return this.addImagesToPdf(t),this.addPdfToImages(t),this.addPdfTools(t),this.addPerPageTools(t),this.addDocToPdf(t),this.addPdfToDoc(t),this.addBooksToPdf(t),this.addTextToPDf(t),t},t.addImagesToPdf=function(t){var e,r=[{key:yt.paperSize,values:[gt.original,gt.a4,gt.usletter],default:gt.original,isHiddenLabel:!0},this.paperOptions,this.paperMarginOptions],n=function(t){return new ve(t,(function(t){return new Be(t)}))},o=function(t,e){return new de(t,e)};Object.assign(t,((e={})[vt.jpgToPdf]={fileType:xt.image,viewerType:ht.file,options:it.asJson(r),hideOptionsOnMobile:!0,convertToIcons:[dt.jpg,dt.pdf],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[it.asJson(this.sortableLib)],footerFactory:n,headerFactory:o},e[vt.pngToPdf]={fileType:xt.image,viewerType:ht.file,options:it.asJson(r),hideOptionsOnMobile:!0,convertToIcons:[dt.png,dt.pdf],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[it.asJson(this.sortableLib)],footerFactory:n,headerFactory:o},e[vt.bmpToPdf]={fileType:xt.image,viewerType:ht.file,options:it.asJson(r),hideOptionsOnMobile:!0,convertToIcons:[dt.bmp,dt.pdf],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[it.asJson(this.sortableLib)],footerFactory:n,headerFactory:o},e[vt.tiffToPdf]={fileType:xt.image,viewerType:ht.file,options:it.asJson(r),hideOptionsOnMobile:!0,convertToIcons:[dt.tiff,dt.pdf],showZoomUi:!1,useDefaultOption:!0,showOrderUi:!0,isOrderable:!0,advancedLibs:[it.asJson(this.sortableLib)],footerFactory:n,headerFactory:o},e))},t.addPdfToImages=function(t){var e,r=kt.getContainer().get(ft),n=[{key:yt.quality,values:[wt.low,wt.medium,wt.high],default:wt.medium,isHiddenLabel:!0}],o=function(t){return new $e(t,(function(t){return new Ee(t)}))},i=function(t,e){return new Qt(t,e)};Object.assign(t,((e={})[vt.pdfToJpg]={fileType:xt.pdf,viewerType:ht.file,options:it.asJson(n),hideOptionsOnMobile:!0,convertToIcons:[dt.pdf,dt.jpg],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(r.isMobile()){return new xn(t,Qn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:i},e[vt.pdfToPng]={fileType:xt.pdf,viewerType:ht.file,options:it.asJson(n),hideOptionsOnMobile:!0,convertToIcons:[dt.pdf,dt.png],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(r.isMobile()){return new xn(t,Qn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:i},e[vt.pdfToBmp]={fileType:xt.pdf,viewerType:ht.file,options:it.asJson(n),hideOptionsOnMobile:!0,convertToIcons:[dt.pdf,dt.bmp],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(r.isMobile()){return new xn(t,Qn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:i},e[vt.pdfToTiff]={fileType:xt.pdf,viewerType:ht.file,options:it.asJson(n),hideOptionsOnMobile:!0,convertToIcons:[dt.pdf,dt.tiff],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,rotatable:!0,footerFactory:function(t){if(r.isMobile()){return new xn(t,Qn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:i},e))},t.addPdfTools=function(t){var e,r=kt.getContainer().get(ft),n=function(t){return new Gt(t)},o=function(t){return new $e(t,(function(t){return new Ee(t)}))},i=function(t,e){return new Qt(t,e)},s=this.sortableLib;Object.assign(t,((e={})[vt.mergePdf]={fileType:xt.pdf,viewerType:ht.file,options:[],showZoomUi:!0,showOrderUi:!0,isOrderable:!0,useMergeFiles:!0,handleMimeAccept:!0,advancedLibs:[it.asJson(s)],footerFactory:function(t){return new pe(t)},headerFactory:function(t,e){return new de(t,e)}},e[vt.compressPdf]={fileType:xt.pdf,viewerType:ht.file,options:[{key:yt.compress,values:[_t.maximum,_t.recommended,_t.minimum],default:_t.recommended,isHiddenLabel:!0}],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,footerFactory:function(t){if(r.isMobile()){return new xn(t,kn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:i},e[vt.pdfOcr]={fileType:xt.pdf,viewerType:ht.file,options:[{key:yt.lang,values:jt.create().map((function(t){return t.code})),default:"eng",selectCss:"form-group--label-row",isHiddenLabel:!0}],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,footerFactory:function(t){if(r.isMobile()){return new xn(t,Wn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:i},e[vt.pdfResize]={fileType:xt.pdf,viewerType:ht.file,options:[{key:yt.paperSize,values:[gt.usletter,gt.a3,gt.a4,gt.a5],default:gt.a4,isHiddenLabel:!0}],showZoomUi:!0,useDefaultOption:!r.isMobile(),showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,footerFactory:function(t){if(r.isMobile()){return new xn(t,Zn,(function(t){return new Ee(t)}))}return o(t)},headerFactory:function(t,e){return new Ue(t,e)}},e[vt.protectPdf]={fileType:xt.pdf,viewerType:ht.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new Ke(t)};return r.isMobile()?new xn(t,Rn,e):new $e(t,e)},headerFactory:i},e[vt.editMetadataPdf]={fileType:xt.pdf,viewerType:ht.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new Pr(t)};return r.isMobile()?new xn(t,Fn,e):new $e(t,e)},headerFactory:i,requirePdfPassword:!0},e[vt.addPdfPageNumbers]={fileType:xt.pdf,viewerType:ht.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new Or(t)};return r.isMobile()?new xn(t,jn,e):new $e(t,e)},headerFactory:i,requirePdfPassword:!0},e[vt.addPdfHeaderAndFooter]={fileType:xt.pdf,viewerType:ht.file,options:[],showZoomUi:!0,useDefaultOption:!0,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new Mr(t)};return r.isMobile()?new xn(t,Gn,e):new $e(t,e)},headerFactory:i,requirePdfPassword:!0},e[vt.addPdfWatermark]={fileType:xt.pdf,viewerType:ht.file,options:[],showZoomUi:!0,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new Rr(t)};return r.isMobile()?new xn(t,Mn,e):new $e(t,e)},headerFactory:i,requirePdfPassword:!0},e[vt.cropPdf]={fileType:xt.pdf,viewerType:ht.fileCrop,options:[],showZoomUi:!1,useDefaultOption:!1,showOrderUi:!1,isOrderable:!1,useMergeFiles:!1,handleMimeAccept:!1,formConfig:Object.create(null),advancedLibs:[it.asJson(this.cropperLib),it.asJson(this.cropperLibCss)],footerFactory:n,headerFactory:i,requirePdfPassword:!0},e[vt.extractText]={fileType:xt.pdf,viewerType:ht.instant,options:[],convertToIcons:[dt.pdf,dt.txt],showZoomUi:void 0,showSelectAllBtn:!1,footerFactory:n,headerFactory:i},e[vt.extractImages]={fileType:xt.pdf,viewerType:ht.instant,options:[],showZoomUi:void 0,showSelectAllBtn:!1,footerFactory:n,headerFactory:i},e[vt.editPdf]={fileType:xt.pdf,viewerType:ht.editPdf,options:[],showZoomUi:void 0,showSelectAllBtn:!1,blockInstantUploading:!0,footerFactory:null,headerFactory:null},e))},t.addPerPageTools=function(t){var e,r=kt.getContainer().get(ft),n=function(t,e){return new Qt(t,e)};Object.assign(t,((e={})[vt.splitPdf]={fileType:xt.pdf,viewerType:ht.split,options:[],showZoomUi:!0,showOrderUi:!0,showSelectAllBtn:!0,hideDelete:!0,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new Jr(t)};return r.isMobile()?new xn(t,$n,e):new $e(t,e)},headerFactory:function(t,e){return new $r(t,e)}},e[vt.deletePdf]={fileType:xt.pdf,viewerType:ht.delete,options:[],showZoomUi:!0,showOrderUi:!0,showSelectAllBtn:!0,hideDelete:!0,formConfig:Object.create(null),footerFactory:function(t){var e=function(t){return new qr(t)};return r.isMobile()?new xn(t,Un,e):new $e(t,e)},headerFactory:function(t,e){return new cn(t,e)}},e[vt.rotatePdf]={fileType:xt.pdf,viewerType:ht.rotate,options:[],showZoomUi:!0,showOrderUi:!0,rotatable:!0,showSelectAllBtn:!0,hideDelete:!0,formConfig:Object.create(null),footerFactory:function(t){return new $e(t,(function(t){return new sn(t)}))},headerFactory:n},e[vt.rearrangePdf]={fileType:xt.pdf,viewerType:ht.rearrange,options:[],showOrderUi:!0,showZoomUi:!0,showSelectAllBtn:!0,rotatable:!0,isOrderable:!0,formConfig:Object.create(null),advancedLibs:[it.asJson(this.sortableLib)],footerFactory:function(t){return new Gt(t)},headerFactory:function(t,e){var r=new de(t,e);return r.ascLabel="1-9",r.descLabel="9-1",r}},e[vt.pdfConverter]={fileType:xt.all,viewerType:ht.fileConverter,options:[],showZoomUi:!1,showSelectAllBtn:!0,footerFactory:null,headerFactory:n,blockInstantUploading:!0},e[vt.unlockPdf]={fileType:xt.pdf,viewerType:ht.fileUnlock,options:[],showZoomUi:!0,showSelectAllBtn:!0,footerFactory:function(t){return new pe(t)},headerFactory:n},e))},t.addDocToPdf=function(t){var e,r=function(t){return new Gt(t)},n=function(t,e){return new Qt(t,e)};Object.assign(t,((e={})[vt.wordToPdf]={fileType:xt.document,viewerType:ht.instant,options:[],convertToIcons:[dt.doc,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.docxToPdf]={fileType:xt.document,viewerType:ht.instant,options:[],convertToIcons:[dt.docx,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.rtfToPdf]={fileType:xt.document,viewerType:ht.instant,options:[],convertToIcons:[dt.rtf,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.odtToPdf]={fileType:xt.document,viewerType:ht.instant,options:[],convertToIcons:[dt.odt,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.pptToPdf]={fileType:xt.document,viewerType:ht.instant,options:[],convertToIcons:[dt.ppt,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.excelToPdf]={fileType:xt.document,viewerType:ht.instant,options:[],convertToIcons:[dt.xls,dt.pdf],showZoomUi:!1,handleMimeAccept:!0,footerFactory:r,headerFactory:n},e))},t.addPdfToDoc=function(t){var e,r=function(t){return new Gt(t)},n=function(t,e){return new Qt(t,e)};Object.assign(t,((e={})[vt.pdfToDocx]={fileType:xt.pdf,viewerType:ht.instant,options:[],convertToIcons:[dt.pdf,dt.docx],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:r,headerFactory:n},e[vt.pdfToRtf]={fileType:xt.pdf,viewerType:ht.instant,options:[],convertToIcons:[dt.pdf,dt.rtf],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:r,headerFactory:n},e[vt.pdfToWord]={fileType:xt.pdf,viewerType:ht.instant,options:[],convertToIcons:[dt.pdf,dt.doc],showZoomUi:!0,showOrderUi:!1,isOrderable:!1,footerFactory:r,headerFactory:n},e))},t.addBooksToPdf=function(t){var e,r=kt.getContainer().get(ft),n=[{key:yt.paperSize,values:[gt.usletter,gt.a3,gt.a4,gt.a5],default:gt.a4,isHiddenLabel:!0},Object.assign({},it.asJson(this.paperMarginOptions),{default:bt.small})],o=function(t){var e=function(t){return new Ee(t)};return r.isMobile()?new xn(t,Bn,e):new $e(t,e)},i=function(t,e){return new Qt(t,e)};Object.assign(t,((e={})[vt.djvuToPdf]={fileType:xt.book,viewerType:ht.file,options:it.asJson(n),convertToIcons:[dt.djvu,dt.pdf],showZoomUi:!1,useDefaultOption:!r.isMobile(),handleMimeAccept:!0,footerFactory:o,headerFactory:i},e[vt.epubToPdf]={fileType:xt.book,viewerType:ht.file,options:it.asJson(n),convertToIcons:[dt.epub,dt.pdf],showZoomUi:!1,useDefaultOption:!r.isMobile(),handleMimeAccept:!0,footerFactory:o,headerFactory:i},e[vt.fb2ToPdf]={fileType:xt.book,viewerType:ht.file,options:it.asJson(n),convertToIcons:[dt.fb2,dt.pdf],showZoomUi:!1,useDefaultOption:!r.isMobile(),handleMimeAccept:!0,footerFactory:o,headerFactory:i},e[vt.mobiToPdf]={fileType:xt.book,viewerType:ht.file,options:it.asJson(n),convertToIcons:[dt.mobi,dt.pdf],showZoomUi:!1,useDefaultOption:!r.isMobile(),handleMimeAccept:!0,footerFactory:o,headerFactory:i},e))},t.addTextToPDf=function(t){var e,r=function(t){return new Gt(t)},n=function(t,e){return new Qt(t,e)};Object.assign(t,((e={})[vt.txtToPdf]={fileType:xt.text,viewerType:ht.instant,options:[],showZoomUi:!1,convertToIcons:[dt.txt,dt.pdf],footerFactory:r,headerFactory:n},e[vt.htmlToPdf]={fileType:xt.text,viewerType:ht.instant,options:[],convertToIcons:[dt.html,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.xmlToPdf]={fileType:xt.text,viewerType:ht.instant,options:[],convertToIcons:[dt.xml,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e[vt.chmToPdf]={fileType:xt.text,viewerType:ht.instant,options:[],convertToIcons:[dt.chm,dt.pdf],showZoomUi:!1,footerFactory:r,headerFactory:n},e))},t}();!function(t){t.free="free",t.pro="pro"}(gn||(gn={}));var Xn,to=function(){function t(t){this.config=t}return t.prototype.getUserType=function(){return this.isProUser()?gn.pro:gn.free},t.prototype.isProUser=function(){return this.isPro(this.config.f_id)},t.prototype.isPro=function(t){if(!t)return!1;var e=t.length,r=+t[e-2],n=t.substring(0,e-2)+t[e-1];return parseFloat("."+parseInt(n,r+1))>=.99},t}(),eo=function(){function t(t){this.serviceProvider=t}return Object.defineProperty(t.prototype,"toolConfig",{get:function(){return this._tools[this._configModel.toolName]},enumerable:!0,configurable:!0}),t.prototype.setConfigModel=function(t){this._configModel=t,this._tools=Yn.create()},t.prototype.getConfigModel=function(){return this._configModel},t.prototype.getToolConfig=function(){return this.toolConfig},t.prototype.getQueSecond=function(){var t=this.getConfigModel();return parseInt(String(t.m_id+"").replace("-1","2"),3)-1001},t.prototype.useMergeFiles=function(t){return this.serviceProvider.fileMetaDataService.getFileExtension(t)!==dt.pdf&&(this.toolConfig.useMergeFiles||!1)},t.prototype.isFormTool=function(){return!!this.toolConfig.formConfig||!1},t.prototype.getToolName=function(){return this._configModel.toolName},t.prototype.getLocalizedUrl=function(t,e){void 0===e&&(e=pt.en);var r=this.getConfigModel().lang;return r?r===e?"/"+t:"/"+r+"/"+t:t},t.prototype.useInstantViewer=function(){var t=this.getToolConfig();switch(t.viewerType){case ht.fileConverter:return!1}var e=this.getConfigModel(),r=!!t.options.length,n=1===e.maxFilesCount,o=!!t.formConfig;return!r&&n&&!o},t.prototype.useFileViewer=function(){var t=this.getToolConfig();switch(t.viewerType){case ht.file:case ht.fileCrop:case ht.fileConverter:case ht.fileUnlock:return!0;case ht.instant:return 1!==this.getConfigModel().maxFilesCount&&(t.viewerType=ht.file,!0)}return!1},t.prototype.usePerPageViewer=function(){switch(this.getToolConfig().viewerType){case ht.perPage:case ht.split:case ht.delete:case ht.rotate:case ht.rearrange:return!0}return!1},t.prototype.useEditor=function(){return this.getToolConfig().viewerType==ht.editPdf},t.prototype.allowMultipleFiles=function(){return this.getConfigModel().maxFilesCount>1},t.prototype.isPdf=function(t){switch(t){case dt.pdf:return!0;default:return!1}},t.prototype.isAllowSize=function(t,e){return t.maxFileSize>e},t.prototype.useIconForPagePreview=function(t){switch(t){case dt.pdf:case dt.png:case dt.jpg:case dt.jpeg:case dt.bmp:case dt.gif:case dt.jfif:return!1;default:return!0}},t.prototype.getAcceptedErrorFormats=function(){return this.getConfigModel().fileExtensions.map((function(t){return(t||"").trim().toUpperCase()})).join(", ")},t.prototype.getMaxFilesSize=function(){return this.getMaxFilesSizeByCfg(this.getConfigModel().maxFileSize)},t.prototype.getMaxFilesSizeByCfg=function(t){return 4*t},t.prototype.showZoomUi=function(t){var e=this.toolConfig.showZoomUi;if(e)switch(t){case dt.tif:case dt.tiff:e=!1}return e},t.prototype.showPageCounter=function(){switch(this.getToolName()){case vt.addPdfPageNumbers:return!0;default:return 1!==this.getConfigModel().maxFilesCount}},t.prototype.isSingleFileTool=function(){return 1===this.getConfigModel().maxFilesCount},t.prototype.isRotatable=function(){return this.toolConfig.rotatable||!1},t.prototype.setFormValue=function(t,e){void 0===e&&(e=!0);var r=this.toolConfig.formConfig;t&&t.valid?r.value=e?it.asJson(t):t:r.value=void 0},t.prototype.isEditor=function(){return this._configModel.toolName===vt.editPdf},t.prototype.isProUser=function(){return new to(this.getConfigModel()).isProUser()},t}(),ro=function(){function t(){this.changeState=new H(null),this.changeState$=this.changeState.asObservable().pipe(G((function(t){return!!t})))}return t.prototype.next=function(t){this.changeState.next(t)},t.prototype.getCurrentState=function(){var t=this.changeState.getValue();if(t)return t.targetState},t}(),no=function(){function t(){}return t.prototype.isFileEventData=function(t){return t&&t.isStoreFilesArray},t.prototype.create=function(t){return{files:t,isStoreFilesArray:!0}},t.prototype.eventDataToArray=function(t){if(this.isFileEventData(t))return t.files;throw new Error("StoreFilesHelper:Incorrect data type")},t}(),oo=function(){function t(){}return t.prototype.isFileEventData=function(t){return t&&t.isWorkFileArray},t.prototype.create=function(t){return{files:t,isWorkFileArray:!0}},t.prototype.eventDataToArray=function(t){if(this.isFileEventData(t))return t.files;throw new Error("WorkFilesHelper:Incorrect data type")},t}(),io=function(){function t(){}return t.prototype.isProgressEventData=function(t){return t&&t.isProgress},t.prototype.create=function(t){return{progress$:t,isProgress:!0}},t.prototype.toData=function(t){if(this.isProgressEventData(t))return t;throw new Error("ProgressFilesHelper:Incorrect data type")},t}(),so=function(){function t(){this.storeFiles=new no,this.workFiles=new oo,this.progressHelper=new io}return t.prototype.createStoreFilesData=function(t){return this.storeFiles.create(t)},t.prototype.isStoreFilesEventData=function(t){return this.storeFiles.isFileEventData(t)},t.prototype.eventDataToStoreFilesArray=function(t){return this.storeFiles.eventDataToArray(t)},t.prototype.createWorkFilesEventData=function(t){return this.workFiles.create(t)},t.prototype.isWorkFileEventData=function(t){return this.workFiles.isFileEventData(t)},t.prototype.eventDataToWorkFileArray=function(t){return this.workFiles.eventDataToArray(t)},t.prototype.isProgressEventData=function(t){return this.progressHelper.isProgressEventData(t)},t.prototype.createProgressEventData=function(t){return this.progressHelper.create(t)},t.prototype.progressEventToData=function(t){return this.progressHelper.toData(t)},t}(),ao=function(){function t(){this.fileEventHelper=new so,this.stateServiceImpl=new ro}return Object.defineProperty(t.prototype,"changeState$",{get:function(){return this.stateServiceImpl.changeState$},enumerable:!0,configurable:!0}),t.prototype.next=function(t){return this.stateServiceImpl.next(t)},t.prototype.getCurrentState=function(){return this.stateServiceImpl.getCurrentState()},t.prototype.createStoreFilesData=function(t){return this.fileEventHelper.createStoreFilesData(t)},t.prototype.isStoreFilesEventData=function(t){return this.fileEventHelper.isStoreFilesEventData(t)},t.prototype.eventDataToStoreFilesArray=function(t){return this.fileEventHelper.eventDataToStoreFilesArray(t)},t.prototype.createWorkFilesEventData=function(t){return this.fileEventHelper.createWorkFilesEventData(t)},t.prototype.isWorkFileEventData=function(t){return this.fileEventHelper.isWorkFileEventData(t)},t.prototype.eventDataToWorkFileArray=function(t){return this.fileEventHelper.eventDataToWorkFileArray(t)},t.prototype.isProgressEventData=function(t){return this.fileEventHelper.isProgressEventData(t)},t.prototype.createProgressEventData=function(t){return this.fileEventHelper.createProgressEventData(t)},t.prototype.progressEventToData=function(t){return this.fileEventHelper.progressEventToData(t)},t}();!function(t){t.maxFileSize="maxFileSize",t.minFileSize="minFileSize",t.extensionIsInvalid="extensionIsInvalid",t.isEmpty="isEmpty",t.maxFilesCount="maxFilesCount",t.maxFilesSize="maxFilesSize",t.expectedError="expectedError",t.notImplemented="not_implemented"}(Xn||(Xn={}));var co=function(t,e,r,n){void 0===r&&(r=0),this.blobUrl=e,this.order=r,this.guid=n||z.createQuickGuidAsString(),this.size=t.size,this.type=t.type,this.ext=t.ext,this.name=t.name,this.hashedName=this.guid+"."+this.ext,this.previewUrl=t.previewUrl,this.headers=t.headers,this.password=t.password},uo=function(){function t(t){this.serviceProvider=t}return t.prototype.readFile=function(t){var e=this;return t instanceof Blob?new _((function(r){var n=window.URL.createObjectURL(t),o=e.toMeta(t),i=new co(o,n,0);i.blob=t,r.next(i)})):t.url?new _((function(r){var n=e.toMeta(t),o=new co(n,n.url,0);r.next(o)})):un("Incorrect file")},t.prototype.readBlob=function(t){return t.blob?Qe(t):this.serviceProvider.fileTransferService.download(t).pipe(Yt((function(){return t})))},t.prototype.toMeta=function(t){var e=t;return{name:e.name,previewUrl:e.previewUrl||void 0,size:t.size,type:t.type,ext:e.ext||this.getExt(e.name),url:e.url,headers:e.headers||void 0,password:e.password}},t.prototype.getExt=function(t){return(t||"").split(".").slice(-1)[0].toLowerCase()},t.prototype.prepareFiles=function(t,e){var r=this,n=[],o=e.fileExtensions.map((function(t){return(t||"").toLowerCase()}))||[],i=t.map((function(t){return r.prepareFile(e,t,n,o)})),s=i.filter((function(t){return t.allow})).map((function(t){return t.item}));return{errors:n,input:t,prepared:i,output:s}},t.prototype.prepareFile=function(t,e,r,n){var o=e.ext;if(!o)throw new Error("!ext");var i=n.includes(o);return i?e.size<=0?(r.push({item:e,type:Xn.minFileSize}),i=!1):this.serviceProvider.toolsConfigService.isAllowSize(t,e.size)||(r.push({item:e,type:Xn.maxFileSize}),i=!1):r.push({item:e,type:Xn.extensionIsInvalid}),{item:e,allow:i}},t}(),po=function(){function t(){this.change=new H(null),this.create=new H(null),this.onHide=new H(null)}return Object.defineProperty(t.prototype,"onChange$",{get:function(){return this.change.asObservable().pipe(G((function(t){return!!t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCreate$",{get:function(){return this.create.asObservable().pipe(G((function(t){return!!t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onHide$",{get:function(){return this.onHide.asObservable().pipe(G((function(t){return!!t})))},enumerable:!0,configurable:!0}),t.prototype.onComponentCreated=function(t){this.create.next(t)},t.prototype.onComponentClose=function(t){this.onHide.next(t)},t.prototype.show=function(t){this.change.next({show:!0,createComponent:t})},t.prototype.hide=function(){this.change.next({show:!1,createComponent:null})},t}(),lo=function(t,e){this.key=t,this.value=e},fo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ho=(function(t){function e(e,r){return t.call(this,e,r)||this}fo(e,t)}(lo),function(){function t(){this.clean()}return t.prototype.add=function(t,e){this._store[t]=e},t.prototype.remove=function(t){delete this._store[t]},t.prototype.clean=function(){this._store=Object.create(null)},t.prototype.getStore=function(){var t=this;return this._store||this.clean(),Object.keys(this._store).map((function(e){return t._store[e]}))},t.prototype.getItem=function(t){return this._store[t]},t.prototype.hasItem=function(t){return!!this._store[t]},t.prototype.getKeys=function(){return Object.keys(this._store)},t.prototype.getKV=function(){var t=this;return Object.keys(this._store).map((function(e){return new lo(e,t._store[e])}))},t}()),vo=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yo=function(t){function e(){return t.call(this)||this}return vo(e,t),e}(ho),go=function(){function t(){this.store=new yo}return t.prototype.add=function(t,e){this.store.add(t,e)},t.prototype.clean=function(){this.store.clean()},t.prototype.getStore=function(){return this.store.getStore()},t.prototype.remove=function(t){this.store.remove(t)},t}();function mo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var r=t[0];if(p(r))return bo(r,null);if(l(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return bo(n.map((function(t){return r[t]})),n)}}if("function"==typeof t[t.length-1]){var o=t.pop();return bo(t=1===t.length&&p(t[0])?t[0]:t,null).pipe(Yt((function(t){return o.apply(void 0,t)})))}return bo(t,null)}function bo(t,e){return new _((function(r){var n=t.length;if(0!==n)for(var o=new Array(n),i=0,s=0,a=function(a){var c=Xe(t[a]),u=!1;r.add(c.subscribe({next:function(t){u||(u=!0,s++),o[a]=t},error:function(t){return r.error(t)},complete:function(){++i!==n&&u||(s===n&&r.next(e?e.reduce((function(t,e,r){return t[e]=o[r],t}),{}):o),r.complete())}}))},c=0;c<n;c++)a(c);else r.complete()}))}function wo(){return function(t){return t.lift(new _o(t))}}var _o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new So(t,r),o=e.subscribe(n);return n.closed||(n.connection=r.connect()),o},t}(),So=function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},e}(y),Po=function(t){function e(e,r){var n=t.call(this)||this;return n.source=e,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new d).add(this.source.subscribe(new Co(this.getSubject(),this))),t.closed&&(this._connection=null,t=d.EMPTY)),t},e.prototype.refCount=function(){return wo()(this)},e}(_),xo=function(){var t=Po.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),Co=function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(C);var Oo=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var r=this.selector,n=this.subjectFactory(),o=r(n).subscribe(t);return o.add(e.subscribe(n)),o},t}();function Io(){return new O}function Eo(){return function(t){return wo()((e=Io,function(t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof r)return t.lift(new Oo(n,r));var o=Object.create(t,xo);return o.source=t,o.subjectFactory=n,o})(t));var e,r}}var ko,To=function(){function t(){}return t.prototype.isStarted=function(){return this.started},t.prototype.isFinished=function(){return this.finished},t.prototype.start=function(){this.started||(this.startTime=Date.now(),this.started=!0)},t.prototype.finish=function(){this.finished||(this.endTime=Date.now(),this.deltaTime=this.endTime-this.startTime,this.finished=!0)},t.prototype.format=function(t){return void 0===t&&(t=1),{start:this.startTime/t,end:this.endTime/t,delta:this.deltaTime/t}},t.prototype.reset=function(){this.startTime=void 0,this.endTime=void 0,this.deltaTime=void 0,this.started=!1,this.finished=!1},t}(),jo=function(t){return t.reduce((function(t,e){return t+e}),0)};!function(t){t.chrome="Chrome",t.firefox="Firefox",t.opera="Opera ",t.safari="Safari",t.ie="IE",t.edge="Edge",t.none="none"}(ko||(ko={}));var Do,Mo=function(){function t(){}return Object.defineProperty(t,"currentBrowser",{get:function(){return this.browserInfo||(this.browserInfo=this.getCurrentBrowser()),this.browserInfo},enumerable:!0,configurable:!0}),t.isIE=function(){return this.is(ko.ie)},t.isEdge=function(){return this.is(ko.edge)},t.isChrome=function(){return this.is(ko.chrome)},t.isFirefox=function(){return this.is(ko.firefox)},t.isSafari=function(){return this.is(ko.safari)},t.isOpera=function(){return this.is(ko.opera)},t.is=function(t){return this.currentBrowser.name===t},t.getMajorVersion=function(){return+(this.browserInfo.version||"0").split(".").shift()},t.getCurrentBrowser=function(){var t,e=this.getBrowserName(),r=navigator.userAgent;return r.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i)&&null!=(t=r.match(/version\/([\.\d]+)/i))&&(t=t[1]),{name:e,version:t}},t.getBrowserName=function(){var t=function(t){return t.test(window.navigator.userAgent)};switch(!0){case t(/edge/i):return ko.edge;case t(/opr/i)&&(!!window.opr||!!window.opera):return ko.opera;case t(/chrome/i)&&!!window.chrome:return ko.chrome;case t(/trident/i):return ko.ie;case t(/firefox/i):return ko.firefox;case t(/safari/i):return ko.safari;default:return ko.none}},t}(),Ao=function(){function t(){}return t.needConvertToBlob=function(){return!!Mo.isIE()||!!(Mo.isEdge()&&Mo.getMajorVersion()<80)},t.convertToBlobObject=function(t,e,r){var n=new Blob([t],{type:r}),o=t;return n.lastModifiedDate=o.lastModifiedDate||Date(),n.lastModified=o.lastModified||Date.now(),n.webkitRelativePath=o.webkitRelativePath||"",n.name=e,n},t.convertToFile=function(t,e,r){return new ot.a([t],e,{type:r,lastModified:t.lastModified||Date.now()})},t.convert=function(t,e,r){return this.needConvertToBlob()?this.convertToBlobObject(t,e,r):this.convertToFile(t,e,r)},t}(),Fo=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Lo=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ro=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Vo=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ro(arguments[e]));return t};!function(t){t.init="init",t.start="start",t.progress="progress",t.completed="completed",t.error="error"}(Do||(Do={}));var Bo,No=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.total=t,this.loaded=e,this.percent=0,t&&e&&(this.percent=100*e/t,this.completed=t===e)},$o=function(){function t(t){this.serviceProvider=t,this.recreateSubjects(),this.progressStore=new yo,this.activeTransStore=new yo,this.uploadTimer=new To}return Object.defineProperty(t.prototype,"progressEvent$",{get:function(){return this.progressEvent.asObservable().pipe(G((function(t){return!!t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastValue",{get:function(){return this.progressEvent.getValue()},enumerable:!0,configurable:!0}),t.prototype.upload=function(t,e,r){var n=this,o=new FormData,i={transactionId:r||z.createQuickGuidAsString(),fileIds:t.map((function(t){return t.guid})),progress:new No,status:Do.init};this.activeTransStore.add(i.transactionId,i);var s=t.map((function(t){var e=Ao.convert(t.blob,t.hashedName,t.blob.type);return o.append("upload[]",e,e.name),{file:t.hashedName,originName:t.name}})),a={job:e.toolName,files:s,session_id:e.sessionId};o.append("payload",JSON.stringify(a)),o.append("method","upload");var c=!1;return this.uploadTimer.isStarted()||this.uploadTimer.start(),$.ajax({type:"POST",url:e.endpoint,data:o,processData:!1,contentType:!1,success:function(r){c=!0;var o=Object.assign({},i,{status:Do.completed,data:r});if(!e.webSocket&&r.websocket&&(e.webSocket=r.websocket),n.progressEvent.next(o),!n.uploadTimer.isFinished()){n.uploadTimer.finish();var s=n.uploadTimer.format(),a=jo(t.map((function(t){return t.size})))/1024,u=s.delta/1e3,p=Math.round(a/u);n.serviceProvider.ga.sendSpeed(p)}n.activeTransStore.remove(i.transactionId)},error:function(t){n.uploadTimer.isStarted()&&!n.uploadTimer.isFinished()&&n.uploadTimer.reset(),i=Object.assign({},i,{status:Do.error,error:t}),n.progressEvent.error(i),n.abort.next(i.transactionId),c=!0,n.serviceProvider.ga.onRequestFail({success:!1,error:i})},xhr:function(){var t=new window.XMLHttpRequest;return n.abort.asObservable().pipe(yn((function(){return!c})),G((function(t){return t===i.transactionId})),Lt(1)).subscribe((function(){return t.abort()})),t.upload.addEventListener("progress",(function(t){if(t.lengthComputable){var e=new No(t.total,t.loaded);(i=Object.assign({},i,{status:Do.progress,progress:e})).fileIds.forEach((function(t){n.progressStore.add(t,{fileId:t,progress:e,transactionId:i.transactionId})})),n.activeTransStore.add(i.transactionId,i),n.progressEvent.next(i)}}),!1),t}}),this.progressEvent.next(Object.assign({},i,{status:Do.start})),i.transactionId},t.prototype.download=function(t){if(t.blob instanceof Blob)return Qe(!0);if(t.waitBlobUrl$ instanceof _)return t.waitBlobUrl$;var e={method:"GET"};t.headers&&(e.headers=it.asJson(t.headers));var r=new _((function(r){fetch(t.blobUrl,e).then((function(t){return t.blob()})).then((function(e){t.blob=Ao.convert(e,t.name,t.type),t.blobUrl=window.URL.createObjectURL(t.blob),r.next(!0)}))})).pipe(Lt(1),Eo());return t.waitBlobUrl$=r,r},t.prototype.downloadByUrl=function(t,e,r,n){return Fo(this,void 0,void 0,(function(){return Lo(this,(function(e){switch(e.label){case 0:return[4,$.ajax({url:t,method:"GET",xhrFields:{responseType:"blob"}}).then((function(t){return Ao.convert(t,n,r)}))];case 1:return[2,e.sent()]}}))}))},t.prototype.hasFilesForDownload=function(t){return!!t.find((function(t){return!(t.blob instanceof Blob)}))},t.prototype.downloadList=function(t){var e=this;if(!this.hasFilesForDownload(t))return Qe(!0);var r=t.filter((function(t){return!(t.blob instanceof Blob)}));return r.length?mo(r.map((function(t){return e.download(t)}))).pipe(Yt((function(){return!0}))):Qe(!0)},t.prototype.getStoredProgress=function(t){var e=this,r=0,n=0,o=t.map((function(t){return e.progressStore.getItem(t)})).filter((function(t){return!!t})),i=o.map((function(t){return t.transactionId}));return Vo(new Set(i)).forEach((function(t){var e=o.find((function(e){return e.transactionId===t}));e&&(r+=e.progress.total,n+=e.progress.loaded)})),new No(r,n)},t.prototype.cleanStores=function(){var t=this;this.activeTransStore.getStore().forEach((function(e){t.abort.next(e.transactionId)})),this.recreateSubjects()},t.prototype.cancelTransaction=function(t){var e=this;this.abort.next(t);var r=this.activeTransStore.getItem(t);r&&r.fileIds.forEach((function(t){e.progressStore.remove(t)}))},t.prototype.recreateSubjects=function(){this.abort&&this.abort.complete(),this.progressEvent&&this.abort.complete(),this.abort=new O,this.progressEvent=new H(null)},t}();!function(t){t.ok="ok",t.waiting="waiting",t.errored="errored",t.passwordError="passwordError",t.expectedErrorInvalidPassword="expected-error-invalid-password",t.expectedError="expectedError",t.processing="processing",t.isEmptyData="isEmptyData",t.parseError="parseError",t.finished="finished",t.filesWasNotSended="filesWasNotSended"}(Bo||(Bo={}));var zo=function(){function t(){this.receiveMessage=new H(null),this.error=new H(null),this.close=new H(null),this.start=new H(null)}return Object.defineProperty(t.prototype,"receiveMessage$",{get:function(){return this.toObservable(this.receiveMessage).pipe(G((function(t){return null!==t})),G((function(t){if(t&&t.data&&"string"==typeof t.data)try{if(JSON.parse(t.data).keepAlive)return!1}catch(t){return!0}return!0})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"error$",{get:function(){return this.toObservable(this.error).pipe(G((function(t){return null!==t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"close$",{get:function(){return this.toObservable(this.close).pipe(G((function(t){return null!==t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start$",{get:function(){return this.toObservable(this.start).pipe(G((function(t){return null!==t})))},enumerable:!0,configurable:!0}),t.prototype.startConnection=function(t){this.registrate(t)},t.prototype.send=function(t){var e=this;return this.start$.pipe(Yt((function(){e.connection.send(t)})))},t.prototype.clean=function(){this.connection&&(this.connection.close(),this.connection=null),this.receiveMessage.closed||this.receiveMessage.complete(),this.error.closed||this.error.complete(),this.close.closed||this.close.complete(),this.start.closed||this.start.complete(),this.receiveMessage=new H(null),this.error=new H(null),this.close=new H(null),this.start=new H(null)},t.prototype.toObservable=function(t){return t.asObservable().pipe(G((function(t){return!!t})))},t.prototype.registrate=function(t){var e=this;return t.webSocket||this.error.next({sessionId:this.sessionId,error:{data:{message:"registrate:websocket url did not set in to instance",status:Bo.errored,type:"isEmptyWebSocketUrl"}}}),this.connection||(this.sessionId=t.webSocket.split("/").pop(),this.connection=new WebSocket(t.webSocket,"protocolOne"),this.connection.onopen=function(t){e.start.next({event:t,sessionId:e.sessionId})},this.connection.onmessage=function(t){e.receiveMessage.next(t)},this.connection.onerror=function(t){console.log("connection.onerror",{e:t}),e.error.next({sessionId:e.sessionId,error:t})},this.connection.onclose=function(t){e.close.next({event:t,sessionId:e.sessionId})}),this.connection},t}(),Uo=function(){function t(t){this.serviceProvider=t}return t.prototype.runJob=function(t){this.serviceProvider.ga.onProcessingStart();var e=this.serviceProvider.toolsConfigService.getConfigModel(),r=new FormData,n=this.prepareFilesToTransfer(t,r),o={job:e.toolName,files:n,session_id:e.sessionId,options:void 0,fromConverter:!!e.fromConverter};if(this.serviceProvider.toolsConfigService.getToolName()===vt.protectPdf){var i="protect-pdf";if(n[0][i]){var s=n[0][i];n.forEach((function(t){return delete t[i]})),o[i]=s}}return this.serviceProvider.toolOptionService.hasCurrentOptions()&&(o.options=this.serviceProvider.toolOptionService.getOptionsDto()),r.append("payload",JSON.stringify(o)),r.append("method","runJob"),Xe($.ajax({type:"POST",url:e.endpoint,data:r,processData:!1,contentType:!1}))},t.prototype.prepareFilesToTransfer=function(t,e){var r=this,n=[];return this.handleForm(t,e),t.forEach((function(t){var e={file:t.exportName};r.appendFileVariables(e,t),n.push(e)})),n},t.prototype.appendFileVariables=function(t,e){e.readPassword&&(t["pdf-password"]=e.readPassword),this.serviceProvider.toolsConfigService.useMergeFiles(e.fileName)&&(t["img-to-pdf"]=!0),e.options?(e.options.angle&&(t.rotate=e.options.angle),e.options.editMetadata&&(t["edit-metadata"]=it.asJson(e.options.editMetadata)),e.options.addPdfPageNumbers&&(t["add-pdf-page-numbers"]=it.asJson(e.options.addPdfPageNumbers)),e.options.addPdfHeaderAndFooter&&(t["add-pdf-header-and-footer"]=it.asJson(e.options.addPdfHeaderAndFooter)),e.options.addPdfWatermark&&(t["add-pdf-watermark"]=e.options.addPdfWatermark),e.options.cropPdf&&(t["crop-pdf"]=e.options.cropPdf),e.options.deletePdf&&(t["delete-pdf"]=e.options.deletePdf),e.options.rotatePdf&&(t["rotate-pdf"]=e.options.rotatePdf),e.options.splitPdf&&(t["split-pdf"]=e.options.splitPdf),e.options.rearrange&&(t.rearrange=e.options.rearrange.pages),e.options.protectPdf&&(t["protect-pdf"]=e.options.protectPdf.password)):e.options=Object.create(null)},t.prototype.handleForm=function(t,e){if(this.serviceProvider.toolsConfigService.isFormTool())switch(this.serviceProvider.toolsConfigService.getToolName()){case vt.protectPdf:this.handleProtectPdfForm(t);break;case vt.editMetadataPdf:this.handleEditMetadataForm(t);break;case vt.addPdfPageNumbers:this.handleAddPdfPageNumbersForm(t);break;case vt.addPdfHeaderAndFooter:this.handleAddPdfHeaderAndFooterForm(t);break;case vt.addPdfWatermark:this.handleAddPdfWatermarkForm(t,e);break;case vt.cropPdf:this.handleCropPdfForm(t);break;case vt.splitPdf:this.handleSplitPdfForm(t);break;case vt.deletePdf:this.handleDeletePdfForm(t);break;case vt.rotatePdf:this.handleRotatePdfForm(t)}},t.prototype.handleProtectPdfForm=function(t){this.handleFormValue(t,(function(t,e){t.options.protectPdf={password:e.password}}))},t.prototype.handleEditMetadataForm=function(t){this.handleFormValue(t,(function(t,e){t.options.editMetadata={author:e.author,dateOfCreation:e.dateOfCreation,dateOfModification:e.dateOfModification,keywords:e.keywords,subject:e.subject,title:e.title}}))},t.prototype.handleAddPdfPageNumbersForm=function(t){this.handleFormValue(t,(function(t,e){t.options.addPdfPageNumbers={from:e.from,to:e.to,format:e.format,position:e.position}}))},t.prototype.handleAddPdfHeaderAndFooterForm=function(t){this.handleFormValue(t,(function(t,e){t.options.addPdfHeaderAndFooter={footer:it.asJson(e.footer),header:it.asJson(e.header)}}))},t.prototype.handleAddPdfWatermarkForm=function(t,e){this.handleFormValue(t,(function(t,r){var n;r.file&&e&&(n={lastModified:r.file.lastModified,name:r.file.name,size:r.file.size,type:r.file.type},e.append("upload[]",r.file)),t.options.addPdfWatermark={file:n,position:r.position,text:r.text}}))},t.prototype.handleCropPdfForm=function(t){this.handleFormValue(t,(function(t,e){t.options.cropPdf={top:e.top,right:e.right,bottom:e.bottom,left:e.left}}))},t.prototype.handleSplitPdfForm=function(t){this.handleFormValue(t,(function(t,e){t.options.splitPdf={mode:e.mode,pages:e.pages}}))},t.prototype.handleDeletePdfForm=function(t){this.handleFormValue(t,(function(t,e){t.options.deletePdf={pages:e.pages}}))},t.prototype.handleRotatePdfForm=function(t){this.handleFormValue(t,(function(t,e){t.options.rotatePdf={pages:it.asJson(e.pages)}}))},t.prototype.handleFormValue=function(t,e){var r=this.serviceProvider.toolsConfigService.getToolConfig().formConfig.value;r&&r.valid&&(t||[]).forEach((function(t){return e(t,r)}))},t}(),Ho=function(){function t(){this.store=Object.create(null)}return t.prototype.init=function(t){var e=this;t&&t.length&&t.forEach((function(t){return e.addScript(t)}))},t.prototype.loadLib=function(t){var e=this.store[t];if(e)return e.load()},t.prototype.loadChain=function(t){var e=this;return new Promise((function(r){var n=t.map((function(t){return e.getLibItem(t)})).filter((function(t){return!!t}));if(n&&n.length){var o=function(t){return n[t]?n[t].load().then((function(){var e=++t;return o(e)})):r(n.map((function(t){return t?window[t.id]:void 0})))};return o(0)}r(null)}))},t.prototype.addScript=function(t){if(!this.hasLib(t.windowName)){var e={href:t.src,id:t.windowName,loaded:!1,load:function(){return new Promise((function(r,n){if(t.disableLoading&&r(e),e.loaded)return t.isCss?r(t.windowName):r(window[t.windowName]);setTimeout((function(){var o,i;if(t.isCss){var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href",t.src),s.setAttribute("id",t.windowName),s.onload=function(){r(t.windowName),e.loaded=!0},s.onerror=function(t){e.loaded=!1,n(t)},null===(o=document.getElementById(t.windowName))||void 0===o||o.remove(),document.head.appendChild(s)}else{var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",t.src),a.setAttribute("id",t.windowName),a.onload=function(){r(window[t.windowName]),e.loaded=!0},a.onerror=function(t){e.loaded=!1,n(t)},null===(i=document.getElementById(t.windowName))||void 0===i||i.remove(),document.body.appendChild(a)}}),1)}))}};this.store[t.windowName]=e}},t.prototype.hasLib=function(t){return!!this.getLibItem(t)},t.prototype.createDefaultLibs=function(t){return void 0===t&&(t="2.2.228"),[{windowName:"pdfjsLib",src:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/"+t+"/pdf.min.js"},{windowName:"pdfWorkerSrc",src:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/"+t+"/pdf.worker.min.js",disableLoading:!1},{windowName:"Sortable",src:"https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.9.0/Sortable.min.js"},{windowName:"Cropper",src:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.js"},{windowName:"CropperCss",src:"https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.6/cropper.min.css",isCss:!0}]},t.prototype.getLibUrl=function(t){var e=this.getLibItem(t);return e?e.href:null},t.prototype.getLibItem=function(t){return this.store[t]},t}();function Go(t){return function(e){var r=new Jo(t),n=e.lift(r);return r.caught=n}}var Jo=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Wo(t,this.selector,this.caught))},t}(),Wo=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.selector=r,o.caught=n,o}return o(e,t),e.prototype.error=function(e){if(!this.isStopped){var r=void 0;try{r=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var n=new k(this,void 0,void 0);this.add(n);var o=L(this,r,void 0,void 0,n);o!==n&&this.add(o)}},e}(E),qo=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Zo=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ko=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Qo=function(){function t(t){this.serviceProvider=t}return t.prototype.getPdfLib=function(){var t=this;if(!this.pdfLib){var e=this.serviceProvider.scriptLoaderService,r=this.serviceProvider.toolsConfigService.isEditor(),n=["pdfjsLib","pdfjsViewer"];r&&e.addScript({windowName:"pdfjsViewer",src:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf_viewer.js"}),this.pdfLib=e.loadChain(n).then((function(n){var o=Ko(n,2),i={pdfjsLib:o[0],pdfjsViewer:o[1],_cMapsUrl:""};i.pdfjsLib.verbosity=i.pdfjsLib.VerbosityLevel.ERRORS;i.pdfjsLib.AnnotationLayer.imageResourcesPath="/assets/",r&&(i.pdfjsViewer.AnnotationLayerBuilder.imageResourcesPath="/assets/"),i.pdfjsLib.GlobalWorkerOptions.workerSrc||(i.pdfjsLib.GlobalWorkerOptions.workerSrc=e.getLibUrl("pdfWorkerSrc"));var s=i.pdfjsLib.version;return i._cMapsUrl="https://unpkg.com/pdfjs-dist@"+s+"/cmaps/",t.pdfLibRef=i,i}))}return this.pdfLib},t.prototype.isValidPassword=function(t){var e=this;return Xe(this.getDocument(t)).pipe(Lt(1),Yt((function(){return!0})),Go((function(t){return e.isPasswordError(t)?Qe(!1):un(t)})))},t.prototype.getDocument=function(t){return qo(this,void 0,void 0,(function(){return Zo(this,(function(e){return[2,this.getPdfLib().then((function(e){return e.pdfjsLib.getDocument(t).promise}))]}))}))},t.prototype.getFirstPageInfo=function(t){return this.getPageInfo(t,1)},t.prototype.getPageInfo=function(t,e){var r=this;return Xe(this.getPdfLib()).pipe(Lt(1),tr((function(n){return Xe(n.pdfjsLib.getDocument(t).promise).pipe(Lt(1),tr((function(t){return Xe(r.getPDFPageLoadingTask(t,e)).pipe(Lt(1),Yt((function(e){return{pdfRef:n,doc:t,page:e}})))})))})))},t.prototype.createImageUrl=function(t,e,r,n,o){return void 0===o&&(o="image/png"),Xe(t.render(e).promise).pipe(Lt(1),tr((function(){return r.drawImage(n,0,0),new _((function(t){n.toBlob((function(e){var r=window.URL.createObjectURL(e);t.next(r)}),o,1)}))})))},t.prototype.drawCanvas=function(t,e){return Xe(t.render(e).promise).pipe(Lt(1),Yt((function(){return!0})))},t.prototype.getViewPortByScale=function(t,e){return t.getViewport({scale:e})},t.prototype.isPasswordError=function(t){return t&&t.name&&"PasswordException"===t.name},t.prototype.getPDFPageLoadingTask=function(t,e){return qo(this,void 0,void 0,(function(){return Zo(this,(function(r){switch(r.label){case 0:return[4,t.getPage(e)];case 1:return[2,r.sent()]}}))}))},t.prototype.readMetadata=function(t){return qo(this,void 0,void 0,(function(){return Zo(this,(function(e){switch(e.label){case 0:return[4,this.getDocument(t).then((function(t){return t.getMetadata()})).then((function(t){return t&&t.info?t.info:null}))];case 1:return[2,e.sent()]}}))}))},t.prototype.getViewPortInfo=function(t,e){var r=t.getViewport({scale:1}),n={width:r.width,height:r.height},o=this.serviceProvider.fileRenderService.getScale(n,e),i=t.getViewport({scale:o});return{documentSize:n,currentSize:{width:i.width,height:i.height},viewport:i}},t.prototype.pdfDataToDateTimeStr=function(t){var e=this.removeStr(t,0,2);e=this.removeStr(e,14,7);var r=[];r.push(e.substr(0,4)),r.push("-"),r.push(e.substr(4,2)),r.push("-"),r.push(e.substr(6,2)),r.push("T"),r.push(e.substr(8,2)),r.push(":"),r.push(e.substr(10,2)),r.push(":"),r.push(e.substr(12,2)),r.push(".000Z");var n=r.join("");return new Date(n).toJSON()},t.prototype.renderZoom$=function(t,e,r){var n=$("<canvas>"),o=t.getViewport({scale:1}),i=n.get(0);i.width=o.width,i.height=o.height;var s=i.getContext("2d"),a={canvasContext:s,viewport:o,intent:"print"};return this.serviceProvider.pdfService.createImageUrl(t,a,s,i).pipe(R(r),R(e),Lt(1),Yt((function(t){return{url:t,dimensions:{width:o.width,height:o.height}}})))},t.prototype.removeStr=function(t,e,r){return t.substr(0,e)+t.substr(e+r)},t}(),Yo=function(){function t(t){this.serviceProvider=t}return t.prototype.storeToWork=function(t,e){return void 0===e&&(e=0),{guid:t.guid,options:{angle:0},order:e,blob:t.blob,fileType:this.serviceProvider.fileMetaDataService.getFileTypeByExt(t.ext),fileName:t.name,exportName:t.hashedName}},t}(),Xo=function(){function t(){}return t.prototype.renderImage$=function(t,e){var r=this;return new _((function(n){var o=new Image;o.src=t,o.onload=function(){var i={width:o.width,height:o.height},s=r.getScale(i,e),a={width:o.width*s,height:o.height*s};n.next({documentSize:i,currentSize:a,blobUrl:t})}}))},t.prototype.getScale=function(t,e){return t.height>t.width?e/t.height:e/t.width},t}();function ti(t){return function(e){return e.lift(new ri(t))}}var ei,ri=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new ni(t,this.callback))},t}(),ni=function(t){function e(e,r){var n=t.call(this,e)||this;return n.add(new d(r)),n}return o(e,t),e}(y),oi=function(){function t(t){this.serviceProvider=t,this.locked=!1}return t.prototype.isLocked=function(){return this.locked},t.prototype.handleFiles=function(t,e,r,n){var o=this.serviceProvider.toolsConfigService,i=this.serviceProvider.localPickerService,s=n||o.getConfigModel(),a=this.checkFiles(t,s),c=s.maxFilesCount,u=o.getMaxFilesSizeByCfg(s.maxFileSize),p=a.error;return(a=i.filterMaxFilesSize(a,e,u)).error&&!p&&(p=a.error),(a=i.filterTotalCount(a,r,c)).error&&!p&&(p=a.error),a.error=p,a},t.prototype.filterMaxFilesSize=function(t,e,r){var n=e,o=[];return t.readyFiles.forEach((function(e){r>=n+e.size?(n+=e.size,o.push(e)):t.error={type:Xn.maxFilesSize,item:e}})),t.readyFiles=o,t},t.prototype.filterTotalCount=function(t,e,r){if(t.readyFiles.length+e>r){var n=r-e;n<0&&(n=0),t.readyFiles.length=n,t.error={type:Xn.maxFilesCount,item:null}}return t},t.prototype.checkFiles=function(t,e){var r;if(!this.serviceProvider.stateService.isStoreFilesEventData(t))throw new Error("!is not file data");var n=this.serviceProvider.fileReaderService.prepareFiles(t.files,e||this.serviceProvider.toolsConfigService.getConfigModel()),o=n.errors,i=n.output,s={data:n,error:null,readyFiles:i};if(o.length){var a=((r={})[Xn.extensionIsInvalid]=[],r[Xn.minFileSize]=[],r[Xn.maxFileSize]=[],r);o.forEach((function(t){a[t.type].push(t.item)})),a[Xn.extensionIsInvalid].length?s.error={item:a[Xn.extensionIsInvalid][0],type:Xn.extensionIsInvalid}:a[Xn.minFileSize].length?s.error={item:a[Xn.minFileSize][0],type:Xn.minFileSize}:a[Xn.maxFileSize].length&&(s.error={item:a[Xn.maxFileSize][0],type:Xn.maxFileSize})}else i.length||(s.error={item:null,type:Xn.isEmpty});return s},t.prototype.createStoreFilesData=function(t){var e=this;return mo(t.map((function(t){return e.serviceProvider.fileReaderService.readFile(t).pipe(Lt(1))}))).pipe(Yt((function(t){var r=(t||[]).map((function(t,e){return t.order=e,t}));return e.serviceProvider.stateService.createStoreFilesData(r)})),Lt(1))},t}(),ii=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),si=function(t){function e(e){return t.call(this,e)||this}return ii(e,t),e.prototype.showPicker=function(){throw new Error("Method not implemented.")},e.prototype.readFiles=function(t){return this.pickFiles(Array.from(t))},e.prototype.pickFiles=function(t){var e=this;return this.locked?un("LocalPickerService:locked"):(this.locked=!0,this.createStoreFilesData(t).pipe(ti((function(){e.locked=!1}))))},e}(oi),ai=function(){function t(t){this.serviceProvider=t,this.libName="Sortable"}return t.prototype.initSortable$=function(t,e){var r=this,n=this.config;if(!this.useSortableByCfg(n))return Qe(null);var o=this.getDefaultLib(n);return o?this.getSortableLib(o.defaultPath).pipe(Yt((function(n){return r.initSortableRoot(t,n,e)}))):Qe(null)},t.prototype.useSortable=function(){var t=this.config;return this.useSortableByCfg(t)||!!this.getDefaultLib(t)},t.prototype.sortArray=function(t,e,r){var n=this;return t.sort((function(t,o){return n.sortFn(t,o,e,r)})),t},t.prototype.toIndexMap=function(t,e){var r=Object.create(null);return t.forEach((function(t,n){r[e(t)]=n})),r},t.prototype.sortDomElementsBySortedItems=function(t,e,r,n){var o=this.toIndexMap(t,e),i=this.serviceProvider.domHelper.getById(r),s=i.children(n);this.sortArray(s,(function(t){return o[t.id]}),!0),s.appendTo(i)},t.prototype.sortFn=function(t,e,r,n){var o=r(t),i=r(e);return o<i?n?-1:1:o>i?n?1:-1:0},t.prototype.getDefaultLib=function(t){var e=this;return this.useSortableByCfg(t)?t.advancedLibs.find((function(t){return t.name===e.libName})):null},t.prototype.useSortableByCfg=function(t){return!!t.advancedLibs&&!!t.advancedLibs.length},Object.defineProperty(t.prototype,"config",{get:function(){return this.serviceProvider.toolsConfigService.getToolConfig()},enumerable:!0,configurable:!0}),t.prototype.getSortableLib=function(t){var e=this.serviceProvider.scriptLoaderService;return e.hasLib(this.libName)||e.addScript({src:t,windowName:this.libName}),Xe(e.loadLib(this.libName))},t.prototype.initSortableRoot=function(t,e,r){r||(r=Object.create(null));var n=Object.assign(this.createDefaultConfig(),r);return new e(t.get(0),n)},t.prototype.createDefaultConfig=function(){return{animation:200,easing:"cubic-bezier(1, 0, 0, 1)",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",filter:".page-item--actions",forceFallback:Mo.isSafari(),draggable:".page-item"}},t}(),ci=r(76);!function(t){t.error="error",t.info="info"}(ei||(ei={}));var ui=function(){function t(){this.clientVersion=ci.a}return t.fromData=function(e){var r=new t,n=it.asJson(e);return Object.assign(r,n),r},t}();var pi,li=function(){function t(t){this.serviceProvider=t,this.fileApiName="Files-3-0"}return t.prototype.onFirstFileAddToTool=function(t){if(t){var e=t.filter((function(t){return!!t}));if(e.length){var r="",n=0;if(e.length>1)r="multi",n=e.map((function(t){return t.size||0})).reduce((function(t,e){return t+e}));else{var o=e[0];r=this.serviceProvider.toolsConfigService.getToolName(),n=o.size}ga("send","event",this.fileApiName,"upload",r,n),console.info("ga:onFirstFileAddToTool",{type:r,size:n})}}},t.prototype.onExtensionIsInvalid=function(t){var e=this.serviceProvider.toolsConfigService.getToolName(),r="inv-ext-"+e;console.info("ga:onExtensionIsInvalid",{name:e,loadedExt:t}),ga("send","event",this.fileApiName,r,t)},t.prototype.onRequestFail=function(t){var e=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onRequestFail",{toolName:e});ga("send","event",this.fileApiName,"failed",e),this.sendLog(ei.error,{method:"onRequestFail",action:"failed",toolName:e},t)},t.prototype.onProcessingStart=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onProcessingStart",{name:t}),ga("send","event",this.fileApiName,"startprocess",t)},t.prototype.onFileSizeIsInvalid=function(t){var e=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onFileSizeIsInvalid",{name:e}),ga("send","event",this.fileApiName,"upload-inv-size",e,t.size)},t.prototype.onMaxFilesCountLimited=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onMaxFilesCountLimited",{name:t}),ga("send","event",this.fileApiName,"upload-inv-files-number",t)},t.prototype.onMaxFilesSizeLimited=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onMaxFilesSizeLimited",{name:t}),ga("send","event",this.fileApiName,"upload-inv-total-size",t)},t.prototype.onMaxPagesLimited=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onMaxPagesLimited",{name:t}),ga("send","event",this.fileApiName,"upload-inv-pages-number",t)},t.prototype.onInvalidJob=function(t){var e=this.serviceProvider.toolsConfigService.getToolName();ga("send","event",this.fileApiName,"invalid-job",name,""),console.info("ga:onInvalidJob",{errorData:t}),this.sendLog(ei.info,{method:"onInvalidJob",action:"invalid-job",toolName:e},t)},t.prototype.onLimitOperations=function(){var t=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:onLimitOperations",{name:t}),ga("send","event",this.fileApiName,"limit-main",t)},t.prototype.sendSpeed=function(t){var e=this.serviceProvider.toolsConfigService.getToolName();console.info("ga:sendSpeed",{name:e,kbPerSecond:t}),ga("send","event",this.fileApiName,"upload-speed",e,t)},t.prototype.sendLog=function(t,e,r){var n=ui.fromData({type:t,data:e,error:r}),o=this.serviceProvider.toolsConfigService.getConfigModel();console.info("sendLog",{cfg:o,type:t,data:e,error:r}),function(t,e){e&&e.loggerEndpoint&&"string"==typeof e.loggerEndpoint&&fetch(e.loggerEndpoint,{method:"POST",mode:"no-cors",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)})}(n,o)},t.prototype.getSaveMeta=function(t){return{name:t.name,size:t.size,type:t.type,ext:t.ext}},t}(),fi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),di=r(469),hi=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.onClose=new O,n.ids={componentId:n.componentId,btnCloseId:z.createQuickGuidAsString(),btnOkId:z.createQuickGuidAsString()},n}return fi(e,t),Object.defineProperty(e.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"close$",{get:function(){return this.onClose.asObservable()},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this.serviceProvider.Translate;this.model={title:this.options.title,message:this.options.body,btnOkLabel:e.get("component-ok-close"),candyIcon:qt.Candy,tryLabel:e.get("component-or-try"),tryCandyDesktopLabel:e.get("component-try-candy-desktop")},t.prototype.init.call(this),this.toggleModelCss(!!this.options.modalCss)},e.prototype.show=function(){this.toggleModelCss(!!this.options.modalCss)},e.prototype.hide=function(){this.unbind(),this.destroyComponent()},e.prototype.destroyComponent=function(){this.toggleModelCss(!1),t.prototype.destroyComponent.call(this)},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(di,this.ids);return this.setTemplateValuesByModel(t,this.model)},e.prototype.bind=function(){var t=this;this.$btnClose.on("click",(function(){return t.close()})),this.helper.getById(this.ids.btnOkId).on("click",(function(){return t.close()})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Escape"===t.key})),Lt(1)).subscribe((function(){return t.close()}))},e.prototype.close=function(){this.options.okCallback instanceof Function&&this.options.okCallback(),this.toggleModelCss(!1),this.onClose.next()},e.prototype.toggleModelCss=function(t){this.options.modalCss&&this.$component.toggleClass(this.options.modalCss,t)},e}(Nt),vi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yi=r(470),gi=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.onClose=new O,n.ids={componentId:n.componentId,btnCloseId:z.createQuickGuidAsString(),btnSignupId:z.createQuickGuidAsString()},n}return vi(e,t),Object.defineProperty(e.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"close$",{get:function(){return this.onClose.asObservable()},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this.serviceProvider.Translate,r=this.serviceProvider.toolsConfigService;this.model={freeLimitIcon:qt.freeLimit,title:this.options.title,message:this.options.body,btnSignupLabel:e.get("signup-button-text"),btnSignupUrl:r.getLocalizedUrl("pricing.html")},t.prototype.init.call(this),this.toggleModelCss(!!this.options.modalCss)},e.prototype.show=function(){this.toggleModelCss(!!this.options.modalCss)},e.prototype.hide=function(){this.unbind(),this.destroyComponent()},e.prototype.destroyComponent=function(){this.toggleModelCss(!1),t.prototype.destroyComponent.call(this)},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(yi,this.ids);return this.setTemplateValuesByModel(t,this.model)},e.prototype.bind=function(){var t=this;this.$btnClose.on("click",(function(){return t.close()})),this.helper.getById(this.ids.btnSignupId).on("click",(function(){return t.close()})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Escape"===t.key})),Lt(1)).subscribe((function(){return t.close()}))},e.prototype.close=function(){this.options.okCallback instanceof Function&&this.options.okCallback(),this.toggleModelCss(!1),this.onClose.next()},e.prototype.toggleModelCss=function(t){this.options.modalCss&&this.$component.toggleClass(this.options.modalCss,t)},e}(Nt),mi=function(){function t(t,e){this.options=e,this.onDestroy=new O,this.innerComponent=this.factory(t,e)}return t.prototype.init=function(){var t=this;this.innerComponent.init(),this.innerComponent.close$.pipe(R(this.onDestroy)).subscribe((function(){kt.getContainer().get(po).onComponentClose(t)}))},t.prototype.show=function(){this.innerComponent.show()},t.prototype.hide=function(){this.innerComponent.hide()},t.prototype.destroyComponent=function(){this.innerComponent.destroyComponent(),this.innerComponent=null},t.prototype.factory=function(t,e){var r=kt.getContainer().get(eo);return this.isDependsOnUserTypeError()&&!r.isProUser()?new gi(t,e):new hi(t,e)},t.prototype.isDependsOnUserTypeError=function(){switch(this.options.type){case Xn.maxFileSize:case Xn.maxFilesSize:return!0;default:return!1}},t}(),bi=function(){function t(t){this.serviceProvider=t}return Object.defineProperty(t.prototype,"ga",{get:function(){return this.serviceProvider.ga},enumerable:!0,configurable:!0}),t.prototype.open=function(t){return this.serviceProvider.modalService.show((function(e){return new mi(e,t)})),this.serviceProvider.modalService.onCreate$.pipe(Lt(1))},t.prototype.showFormatError=function(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=function(){});var o=this.serviceProvider.Translate;return r&&this.ga.onExtensionIsInvalid(e),this.open({title:o.get("component-invalid-format"),body:o.get("component-please-use-format")+" <b>"+t+"</b>",modalCss:"--format-error",okCallback:function(){return n()}})},t.prototype.showMinFileSizeError=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=function(){});var n=this.serviceProvider.Translate;return e&&this.ga.onFileSizeIsInvalid(t),this.open({title:n.get("component-small-files-cant-be-processed"),body:n.get("component-files-small-than"),okCallback:function(){return r()},type:Xn.minFileSize})},t.prototype.showMaxFileSizeError=function(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=function(){});var o=this.serviceProvider.Translate,i=e/1048576;r&&this.ga.onFileSizeIsInvalid(t);var s=this.serviceProvider.toolsConfigService.isProUser()?"component-files-large-than":"component-free-files-large-than";return this.open({title:o.get("component-large-files-cant-be-processed"),body:o.get(s).replace("%s",i.toFixed(0)),okCallback:function(){return n()},type:Xn.maxFileSize})},t.prototype.showMaxFilesCountError=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=function(){});var n=this.serviceProvider.Translate;return e&&this.ga.onMaxFilesCountLimited(),this.open({title:n.get("component-files-number-per-task"),body:n.get("component-only-files-count").replace("%",t.toString()),okCallback:function(){return r()}})},t.prototype.showMaxFilesSizeError=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=function(){});var n=this.serviceProvider.Translate,o=t/1048576;e&&this.ga.onMaxFilesSizeLimited();var i=this.serviceProvider.toolsConfigService.isProUser()?"component-total-size-limit-info":"component-free-total-size-limit-info";return this.open({title:n.get("component-total-size-limit-title"),body:n.get(i).replace("%s",o.toFixed(0)),okCallback:function(){return r()},type:Xn.maxFilesSize})},t.prototype.showMaxPagesError=function(t,e,r,n){void 0===n&&(n=!0),n&&this.ga.onMaxPagesLimited();var o=this.serviceProvider.Translate,i="error-too-many-pages-title",s="error-too-many-pages-body",a="Too many pages",c="<div> The document @@documentName@@ has been limited by pages. <br> Max pages per document:@@currentPages@@, current:@@maxPages@@ </div>";o.has(i)&&(a=o.get(i)),o.has(s)&&(c=o.get(s));var u={documentName:t,currentPages:r,maxPages:e};return Object.keys(u).forEach((function(t){var e=new RegExp("%\\("+t+"\\)","g");c=c.replace(e,u[t])})),this.open({title:a,body:c,okCallback:function(){}})},t.prototype.handleError=function(t,e,r,n){void 0===r&&(r=!0);var o=this.serviceProvider.errorDialogService,i=this.serviceProvider.toolsConfigService,s=n||i.getConfigModel();switch(!0){case!0==!t.error:break;case t.error.type===Xn.extensionIsInvalid:var a=i.getAcceptedErrorFormats();o.showFormatError(a,t.error.item.ext,r,e).subscribe();break;case t.error.type===Xn.minFileSize:o.showMinFileSizeError(t.error.item,r,e).subscribe();break;case t.error.type===Xn.maxFileSize:o.showMaxFileSizeError(t.error.item,s.maxFileSize,r,e).subscribe();break;case t.error.type===Xn.maxFilesSize:o.showMaxFilesSizeError(i.getMaxFilesSize(),r,e).subscribe();break;case t.error.type===Xn.maxFilesCount:o.showMaxFilesCountError(s.maxFilesCount,r,e).subscribe();break;case t.error.type===Xn.isEmpty:console.warn("isEmpty",{data:t}),e()}},t}(),wi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_i=function(t){function e(e){var r=t.call(this,e)||this;return r.pickerApiLoaded=!1,r.scope=["https://www.googleapis.com/auth/drive.readonly"],r}return wi(e,t),Object.defineProperty(e.prototype,"gapi",{get:function(){return window.gapi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"google",{get:function(){return window.google},enumerable:!0,configurable:!0}),e.prototype.readFiles=function(t){return this.pickFiles(Array.from(t))},e.prototype.showPicker=function(){var t=this.serviceProvider.toolsConfigService.getConfigModel().gdrive;this.picker&&this.appId===t.appId&&this.clientId===t.clientId?this.picker.setVisible(!0):(this.clientId=t.clientId,this.appId=t.appId,this.loadPicker())},e.prototype.onAuthApiLoad=function(){var t=this;this.gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1},(function(e){return t.handleAuthResult(e)}))},e.prototype.handleAuthResult=function(t){t?(this.oauthToken=t.access_token,t.error?console.warn("authResult.error",{error:t.error}):this.picker||this.createPicker()):this.oauthToken=void 0},e.prototype.onPickerApiLoad=function(){this.pickerApiLoaded=!0,this.oauthToken&&this.createPicker()},e.prototype.loadPicker=function(){var t=this,e=window.gapi;this.oauthToken||e.load("auth",{callback:function(){return t.onAuthApiLoad()}}),e.load("picker",{callback:function(){return t.onPickerApiLoad()}})},e.prototype.createPicker=function(){var t=this;if(!this.picker){var e=window.google;if(this.pickerApiLoaded&&this.oauthToken){var r=new e.picker.DocsView(e.picker.ViewId.FOLDERS),n=new e.picker.DocsView(e.picker.ViewId.DOCS),o=this.serviceProvider.toolsConfigService.getConfigModel().fileAccept.split(",").map((function(t){return t.trim()})).filter((function(t){return!!t&&"."!==t[0]})).join(",");r.setMimeTypes(o),n.setMimeTypes(o),this.origin=window.location.protocol+"//"+window.location.host;var i=(new e.picker.PickerBuilder).setOrigin(this.origin).setAppId(this.appId).setOAuthToken(this.oauthToken).addView(e.picker.ViewId.DOCUMENTS).addView(e.picker.ViewId.PDFS).addView(e.picker.ViewId.DOCS_IMAGES).addView(n).addView(r).setSelectableMimeTypes(o).setCallback((function(e){return t.pickerCallback(e)}));this.serviceProvider.toolsConfigService.allowMultipleFiles()&&(i=i.enableFeature(e.picker.Feature.MULTISELECT_ENABLED)),(i=i.build()).setVisible(!0),this.picker=i}}},e.prototype.pickerCallback=function(t){var e=this,r=this.google,n=this.gapi;t.action===r.picker.Action.PICKED&&n.load("client",(function(){n.client.load("drive","v3",(function(){e.picker.setVisible(!1);var r=(t.docs||[]).map((function(t){return e.toMeta(t)}));r&&r.length&&e.serviceProvider.inputService.dropFiles(r)}))}))},e.prototype.toMeta=function(t){var e=this.serviceProvider.fileMetaDataService,r=e.getFileExtension(t.name),n=t.mimeType||e.getMimeTypeByExtension(r);return{name:t.name,size:t.sizeBytes,type:n,ext:r,isFile:!1,url:"https://www.googleapis.com/drive/v3/files/"+t.id+"?alt=media",headers:{Authorization:"Bearer "+this.oauthToken}}},e.prototype.pickFiles=function(t){var e=this;return this.locked?un("LocalPickerService:locked"):(this.locked=!0,this.createStoreFilesData(t).pipe(ti((function(){e.locked=!1}))))},e}(oi),Si=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pi=function(t){function e(e){return t.call(this,e)||this}return Si(e,t),e.prototype.readFiles=function(t){return this.pickFiles(Array.from(t))},e.prototype.showPicker=function(){if(!this.isOpened){this.isOpened=!0;var t=this.getOptions();Dropbox.choose(t)}},e.prototype.createOptions=function(){var t=this,e=this.serviceProvider.toolsConfigService,r=e.getConfigModel();return{linkType:"direct",multiselect:e.allowMultipleFiles(),extensions:r.fileExtensions.map((function(t){return"."===t[0]?t:"."+t})),folderselect:!1,sizeLimit:r.maxFileSize,success:function(e){t.isOpened=!1;var r=e.map((function(e){return t.toMeta(e)}));r&&r.length&&t.serviceProvider.inputService.dropFiles(r)},cancel:function(){t.isOpened=!1}}},e.prototype.getOptions=function(){return this.options||(this.options=this.createOptions()),this.options},e.prototype.useFakeDropBox=function(t){var e=function(){$("#tempFileInput").off(),$("body").remove("#tempFileInput")};$("#tempFileInput").length&&e();var r="<input class='"+this.serviceProvider.domHelper.css.displayNone+'\' id="tempFileInput" type="file"/>';$("body").append(r),$("#tempFileInput").on("change",(function(r){if(r.target.files){var n=Array.from(r.target.files).map((function(t){return{name:t.name,bytes:t.size,link:window.URL.createObjectURL(t),icon:"",isDir:!1,thumbnailLink:""}}));setTimeout((function(){t.success(n)}),500),$("#tempFileInput").val(null),e()}})).click()},e.prototype.pickFiles=function(t){var e=this;return this.locked?un("LocalPickerService:locked"):(this.locked=!0,this.createStoreFilesData(t).pipe(ti((function(){e.locked=!1}))))},e.prototype.toMeta=function(t){console.log("toMeta",{x:t});var e=this.serviceProvider.fileMetaDataService,r=e.getFileExtension(t.name),n=e.getMimeTypeByExtension(r);return{name:t.name,size:t.bytes,type:n,ext:r,isFile:!1,previewUrl:t.icon,url:t.link}},e}(oi),xi=function(){function t(){this.dropEvent=new O,this.selectFileClick=new O,this.acceptChange=new O}return Object.defineProperty(t.prototype,"selectFileClick$",{get:function(){return this.selectFileClick.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onFilesDrop$",{get:function(){return this.dropEvent.asObservable().pipe(G((function(t){return!!t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acceptChange$",{get:function(){return this.acceptChange.asObservable()},enumerable:!0,configurable:!0}),t.prototype.dropFiles=function(t){t&&t.length&&this.dropEvent.next(Array.from(t))},t.prototype.selectFile=function(t){this.selectFileClick.next(t)},t.prototype.setAccept=function(t){this.acceptChange.next(t)},t}(),Ci=function(){function t(t){this.serviceProvider=t}return t.prototype.onAddFile=function(t){switch(t){case Xt.device:break;case Xt.dropBox:this.serviceProvider.dropboxPickerService.showPicker();break;case Xt.gDrive:this.serviceProvider.gDrivePickerService.showPicker();break;default:throw new Error("Not supported type")}},t.prototype.subscribeDefault=function(t){var e=this;this.serviceProvider.inputService.selectFileClick$.pipe(R(t)).subscribe((function(t){return e.onAddFile(t)}))},t}(),Oi=function(){function t(t){this.serviceProvider=t}return t.prototype.getFileTypeByFileName=function(t){return this.getFileTypeByExt(this.getFileExtension(t))},t.prototype.getFileTypeByExt=function(t){var e=this.serviceProvider.toolsConfigService.getToolConfig().fileType;switch(t){case dt.pdf:return xt.pdf;case dt.jpeg:case dt.jpg:case dt.png:case dt.gif:case dt.bmp:case dt.tif:case dt.tiff:case dt.jfif:return xt.image;case dt.docx:case dt.doc:case dt.odt:case dt.rtf:case dt.ods:case dt.xlsx:case dt.xls:case dt.xlt:case dt.xla:case dt.pptx:case dt.ppt:return xt.document;case dt.epub:case dt.djvu:case dt.djv:case dt.mobi:case dt.fb2:return xt.book;case dt.txt:case dt.xml:case dt.html:case dt.chm:return xt.text}return e},t.prototype.getMimeTypeByExtension=function(t){if(!t)return null;switch(t){case dt.epub:return xr.epub;case dt.djvu:case dt.djv:return xr.djvuX;case dt.mobi:return xr.mobi;case dt.fb2:return xr.fb2;case dt.txt:return xr.txt;case dt.xml:return xr.xml;case dt.html:return xr.html;case dt.chm:return xr.chm;case dt.png:return xr.png;case dt.jpg:return xr.jpg;case dt.jpeg:return xr.jpeg;case dt.jfif:return xr.jfif;case dt.bmp:return xr.bmp;case dt.gif:return xr.gif;case dt.tif:case dt.tiff:return xr.tiff;case dt.docx:return xr.docX;case dt.doc:return xr.doc;case dt.rtf:return xr.rtfX;case dt.odt:return xr.odt;case dt.ods:return xr.ods;case dt.xlsx:return xr.xlsx;case dt.xls:return xr.xls;case dt.xlt:return xr.xlt;case dt.xla:return xr.xla;case dt.pptx:return xr.pptx;case dt.ppt:return xr.ppt;case dt.pdf:return xr.pdf}return null},t.prototype.getFileExtension=function(t){return(t||"").split(".").slice(-1)[0].toLowerCase()},t.prototype.getMimeTypeByFileName=function(t){var e=this.getFileExtension(t);return this.getMimeTypeByExtension(e)},t}(),Ii=function(){function t(t){this.serviceProvider=t,this.prefix="TOOL_OPTIONS"}return t.prototype.getDefault=function(t){var e=this.serviceProvider.toolsConfigService.getToolName();return localStorage.getItem(this.createKey(e,t))},t.prototype.setDefault=function(t,e){var r=this.serviceProvider.toolsConfigService.getToolName(),n=this.createKey(r,t);null!=e?localStorage.setItem(n,e.toString()):localStorage.removeItem(n)},t.prototype.useDefaultOption=function(){return this.serviceProvider.toolsConfigService.getToolConfig().useDefaultOption||!1},t.prototype.saveCurrentOptions=function(t){this.currentOptions=t},t.prototype.hasCurrentOptions=function(){return!!this.currentOptions},t.prototype.getCurrentOptions=function(){return it.asJson(this.currentOptions)},t.prototype.getOptionsDto=function(){var t=this,e=this.getCurrentOptions(),r=Object.create(null);return Object.keys(e).forEach((function(n){switch(n){case yt.paperSize:var o=t.getPaperSize(e);o&&(r[n]=o.map((function(t){return String(t)})));break;default:r[n]=e[n]}})),r},t.prototype.getPaperSize=function(t){if(t.paperSize){var e=t[yt.paperSize].toString().split(",").map((function(t){return t.trim()}));if(e&&2===e.length)return e.map((function(t){return+t}))}return null},t.prototype.createKey=function(t,e){return this.prefix+":"+t+":"+e},t}(),Ei=function(){function t(){this.defaultMaxItemSize=160,this.defaultMinItemSize=120,this.createSubjects()}return Object.defineProperty(t.prototype,"viewItemsChange$",{get:function(){return this.viewItemsChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileCountChange$",{get:function(){return this.fileCountChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"runJobDisabledChange$",{get:function(){return this.runJobDisabledChange.asObservable().pipe(G((function(t){return null!==t})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filesUpdated$",{get:function(){return this.filesUpdated.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minMaxItemSizeChanged$",{get:function(){return this.minMaxItemSizeChanged.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewItemReady$",{get:function(){return this.viewItemRendered.asObservable().pipe(G((function(t){return null!==t})))},enumerable:!0,configurable:!0}),t.prototype.onViewItemsChange=function(t){this.viewItemsChange.next(t),this.fileCountChange.next(t.length)},t.prototype.onViewItemRendered=function(t){this.viewItemRendered.next(t)},t.prototype.onFilesUpdated=function(t){this.filesUpdated.next(t)},t.prototype.onRunJobDisabledChange=function(t){this.runJobDisabledChange.value!==t&&this.runJobDisabledChange.next(t)},t.prototype.setViewItemSize=function(t,e){this.minMaxItemSizeChanged.next({min:t,max:e})},t.prototype.getMinMaxItemValue=function(){return it.asJson(this.minMaxItemSizeChanged.value)},t.prototype.clean=function(){this.fileCountChange.complete(),this.viewItemsChange.complete(),this.viewItemRendered.complete(),this.filesUpdated.complete(),this.runJobDisabledChange.complete(),this.minMaxItemSizeChanged.complete(),this.createSubjects()},t.prototype.createSubjects=function(){this.fileCountChange=new O,this.viewItemsChange=new O,this.viewItemRendered=new H(null),this.filesUpdated=new H([]),this.runJobDisabledChange=new H(null),this.minMaxItemSizeChanged=new H({min:this.defaultMinItemSize,max:this.defaultMaxItemSize})},t}(),ki=function(){function t(t){this.serviceProvider=t,this.selectAllPagesChange=new H(!1),this.documentRed=new O}return Object.defineProperty(t.prototype,"selectAllPagesChange$",{get:function(){return this.selectAllPagesChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDocumentRead$",{get:function(){return this.documentRed.asObservable().pipe(Lt(1))},enumerable:!0,configurable:!0}),t.prototype.onSelectAllPagesChange=function(t){this.selectAllPagesChange.next(t)},t.prototype.onDocumentRead=function(t){this.documentRed.next(t)},t}();!function(t){t.closed="closed",t.valid="valid",t.invalid="invalid"}(pi||(pi={}));var Ti=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ji=r(471),Di=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.ids={componentId:n.componentId,btnCloseId:z.createQuickGuidAsString(),btnOkId:z.createQuickGuidAsString(),pwContainerId:z.createQuickGuidAsString()},n.stateChange=new O,n}return Ti(e,t),Object.defineProperty(e.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateChange$",{get:function(){return this.stateChange.asObservable().pipe(R(this.destroyEvent))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$btnRead",{get:function(){return this.helper.getById(this.ids.btnOkId)},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this.serviceProvider.Translate;this.model={modalCss:"--password-dialog",title:e.get("component-requires-password"),fileName:this.options.fileName,iconLock:qt.lock,btnLabelUnlock:e.get("component-unlock"),btnLabelSkip:e.get("component-skip-file")},this.createControls(),t.prototype.init.call(this)},e.prototype.show=function(){var t=this;this.toggleModelCss(!!this.model.modalCss),setTimeout((function(){t.destroyed||t.pwControl.focus()}))},e.prototype.hide=function(){this.unbind(),this.destroyComponent()},e.prototype.destroyComponent=function(){this.toggleModelCss(!1),this.pwControl&&(this.pwControl.destroyComponent(),this.pwControl=null),this.stateChange.complete(),t.prototype.destroyComponent.call(this)},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ji,this.ids);return this.setTemplateValuesByModel(t,this.model)},e.prototype.bind=function(){var t=this,e=this.serviceProvider.Translate;this.pwControl.init(),this.pwControl.setPrefixIcon(qt.lock),this.pwControl.change$.pipe(R(this.destroyEvent)).subscribe((function(e){return t.onPasswordChange(e)})),this.pwControl.input$.pipe(R(this.destroyEvent)).subscribe((function(e){e.event.isDefaultPrevented()||t.onPasswordChange(e.value)})),this.$btnRead.on("click",(function(){var r=t.pwControl,n=r.getValue();if(!n)return t.helper.toggleDisabled(t.$btnRead,!1),void t.pwControl.showError(e.get("component-enter-password"));r.setDisableState(!0),t.helper.toggleDisabled(t.$btnRead,!0),t.helper.toggleDisabled(t.$btnClose,!0),t.options.readPasswordFn(n).pipe(R(t.destroyEvent),Lt(1)).subscribe({error:function(r){console.warn("readPasswordFn:error",{error:r}),t.helper.toggleDisabled(t.$btnRead,!1),t.pwControl.showError(e.get("component-unexpected-error"))},next:function(n){n?(t.toggleModelCss(!1),t.stateChange.next(pi.valid),t.serviceProvider.modalService.onComponentClose(t)):(t.options.disallowClose||t.helper.toggleDisabled(t.$btnClose,!1),t.pwControl.showError(e.get("err_unlock_invalid_password")),r.setDisableState(!1))}})})),this.options.disallowClose?this.$btnClose.addClass(this.helper.css.displayNone):(this.$btnClose.on("click",(function(){t.helper.isDisabled(t.$btnClose)||t.close()})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Escape"===t.key})),Lt(1)).subscribe((function(){return t.close()})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Enter"===t.key}))).subscribe((function(e){if(!e.defaultPrevented){var r=t.pwControl,n=t.$btnRead;t.helper.isDisabled(n)||r.isDisabled()||!r.isValid()||(e.preventDefault(),n.trigger("click"))}})))},e.prototype.close=function(){this.toggleModelCss(!1),this.stateChange.next(pi.closed),this.serviceProvider.modalService.onComponentClose(this)},e.prototype.toggleModelCss=function(t){this.model.modalCss&&this.$component.toggleClass(this.model.modalCss,t)},e.prototype.createControls=function(){this.pwControl=new Je(this.ids.pwContainerId,"password",{inputType:me.password,formGroupCss:"form-group--dialog-enter",labelKey:this.options.fileName,placeholderKey:"component-enter-password",usePrefixIcon:!0})},e.prototype.onPasswordChange=function(t){var e=!!t&&!!(t||"").trim();e&&this.pwControl.hideError(),this.helper.toggleDisabled(this.$btnRead,!e)},e}(Nt),Mi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ai=r(472),Fi=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.ids={componentId:n.componentId,passwordContainerId:z.createQuickGuidAsString(),deleteId:z.createQuickGuidAsString()},n.deleteSubject=new O,n}return Mi(e,t),Object.defineProperty(e.prototype,"delete$",{get:function(){return this.deleteSubject.asObservable()},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.createControls(),t.prototype.init.call(this)},e.prototype.destroyComponent=function(){this.destroyed||(this.deleteSubject.complete(),t.prototype.destroyComponent.call(this))},e.prototype.validate=function(t){var e=this;return this.valid?Qe({valid:!0,password:this.pwControl.getValue()}):(t=t||this.pwControl.getValue(),this.serviceProvider.pdfService.isValidPassword({url:this.options.blobUrl,password:t}).pipe(Yt((function(r){return r?(e.valid=!0,e.pwControl.setDisableState(!0),e.pwControl.hideError()):e.showInvalidError(),e.pwControl.setValidation(r),{valid:r,password:t}}))))},e.prototype.isValid=function(){return this.valid},e.prototype.focus=function(){this.pwControl.focus()},e.prototype.isDisabled=function(){return this.pwControl.isDisabled()},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Ai,this.ids),e={fileName:this.options.fileName,pdfIcon:qt.getToolIcon(dt.pdf),closeIconUrl:qt.createSvgIconUrl("Close")};return this.setTemplateValuesByModel(t,e)},e.prototype.bind=function(){var t=this;if(this.pwControl.init(),this.pwControl.setPrefixIcon(qt.lock),this.pwControl.change$.pipe(R(this.destroyEvent)).subscribe((function(e){return t.onPasswordChange(e)})),this.pwControl.input$.pipe(R(this.destroyEvent),G((function(t){return!t.event.isDefaultPrevented()})),Yt((function(t){return t.value}))).subscribe((function(e){return t.onPasswordChange(e)})),this.options.usePerItemDelete){var e=this.helper.getById(this.ids.deleteId);e.removeClass(this.helper.css.displayNone),re(e.get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(){t.deleteSubject.next()}))}},e.prototype.createControls=function(){this.pwControl=new Je(this.ids.passwordContainerId,"password",{inputType:me.password,formGroupCss:"form-group--show-label",labelKey:this.options.fileName,placeholderKey:"component-enter-password",usePrefixIcon:!0})},e.prototype.onPasswordChange=function(t){this.valid||(!!t&&!!(t||"").trim()?(this.pwControl.hideError(),this.pwControl.setValidation(!0)):this.showInvalidError())},e.prototype.showInvalidError=function(){this.pwControl.setValidation(!1),this.pwControl.showError("Invalid password")},e}(Nt);function Li(t,e){var r=t.findIndex((function(t){return e(t)})),n=t.splice(r,1);if(n.length)return n[0]}var Ri=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vi=r(473),Bi=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.ids={componentId:n.componentId,btnCloseId:z.createQuickGuidAsString(),btnOkId:z.createQuickGuidAsString(),listId:z.createQuickGuidAsString()},n.ok=new O,n.deleteSubject=new O,n.close=new O,n}return Ri(e,t),Object.defineProperty(e.prototype,"ok$",{get:function(){return this.ok.asObservable().pipe(R(this.destroyEvent),Lt(1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delete$",{get:function(){return this.deleteSubject.asObservable().pipe(R(this.destroyEvent))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"close$",{get:function(){return this.close.asObservable().pipe(R(this.destroyEvent),Lt(1))},enumerable:!0,configurable:!0}),e.prototype.show=function(){},e.prototype.hide=function(){this.unbind(),this.destroyComponent()},e.prototype.destroyComponent=function(){this.destroyed||(this.list.forEach((function(t){return t.component.destroyComponent()})),this.list=null,this.ok.complete(),this.close.complete(),this.deleteSubject.complete(),t.prototype.destroyComponent.call(this))},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(Vi,this.ids),e=this.serviceProvider.Translate,r={btnLabelUnlock:e.get("component-unlock"),title:e.get("component-requires-password")};return this.setTemplateValuesByModel(t,r)},e.prototype.bind=function(){var t=this,e=this.options.items.map((function(e,r,n){return{component:new Fi(t.ids.listId,{fileName:e.storedFile.name,useCheckboxApplyToAll:0===r&&n.length>1,blobUrl:e.storedFile.blobUrl,usePerItemDelete:!!t.options.usePerItemDelete}),valid:!1,itemData:e}}));e.forEach((function(r){r.component.init(),t.options.usePerItemDelete&&r.component.delete$.pipe(R(t.destroyEvent),R(r.component.getOnDestroy$())).subscribe((function(){var n=t.helper.getById(t.ids.btnOkId);if(!t.helper.isDisabled(n)){var o=r.itemData.fileId;Li(e,(function(t){return t===r})),r.component.destroyComponent(),t.deleteSubject.next(o),e.length||t.helper.getById(t.ids.btnCloseId).get(0).click()}}))})),this.list=e;var r=function(e){return re(t.helper.getById(e).get(0),"click").pipe(R(t.destroyEvent))};r(this.ids.btnCloseId).subscribe((function(){t.close.next(),t.serviceProvider.modalService.onComponentClose(t)})),r(this.ids.btnOkId).pipe(Yt((function(){return t.helper.getById(t.ids.btnOkId)})),G((function(e){return!t.helper.isDisabled(e)})),tr((function(e){var r=t.list.filter((function(t){return!t.component.isValid()}));return r.length?(t.helper.toggleDisabled(e,!0),mo(r.map((function(t){return t.component.validate().pipe(Yt((function(e){return t.valid=e.valid,t.valid&&(t.itemData.workFile.readPassword=e.password),t})))}))).pipe(Yt((function(r){var n=r.filter((function(t){return!t.valid}));return t.helper.toggleDisabled(e,!1),!n.length})),Go((function(r){return t.helper.toggleDisabled(e,!1),un(r)})))):Qe(!0)})),G((function(t){return t}))).subscribe((function(){return t.ok.next()})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Escape"===t.key})),Lt(1)).subscribe((function(){return t.helper.getById(t.ids.btnCloseId).get(0).click()})),setTimeout((function(){t.list.find((function(t){return!t.component.isDisabled()})).component.focus()}))},e.prototype.onPasswordClosed=function(t){this.serviceProvider.modalService.onComponentClose(this)},e}(Nt),Ni=function(){function t(t){this.serviceProvider=t}return t.prototype.openFileDialog=function(t){return this.serviceProvider.modalService.show((function(e){return new Di(e,t)})),this.serviceProvider.modalService.onCreate$.pipe(Lt(1))},t.prototype.openFileListDialog=function(t){return this.serviceProvider.modalService.show((function(e){return new Bi(e,t)})),this.serviceProvider.modalService.onCreate$.pipe(Lt(1))},t}(),$i=function(){function t(t){this.serviceProvider=t,this.selectAllPagesChange=new H(!1),this.documentRed=new O}return Object.defineProperty(t.prototype,"selectAllPagesChange$",{get:function(){return this.selectAllPagesChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDocumentRead$",{get:function(){return this.documentRed.asObservable().pipe(Lt(1))},enumerable:!0,configurable:!0}),t.prototype.onDocumentRead=function(t){this.documentRed.next(t)},t.prototype.onSelectAllPagesChange=function(t){this.selectAllPagesChange.next(t)},t}(),zi=function(){function t(t){this.serviceProvider=t,this.documentRed=new O}return Object.defineProperty(t.prototype,"onDocumentRead$",{get:function(){return this.documentRed.asObservable().pipe(Lt(1))},enumerable:!0,configurable:!0}),t.prototype.onDocumentRead=function(t){this.documentRed.next(t)},t}(),Ui=function(){function t(){this.initialized=!1,this.interceptors=[]}return t.prototype.init=function(t,e){void 0===e&&(e=[]),this.initialized||(this.interceptors=e,this.configure(t),this.initialized=!0)},t.prototype.reset=function(){this.initialized=!1},t.prototype.configure=function(t){var e=this;$.ajaxSetup({beforeSend:function(r,n){(n.url===t.endpoint||t.getConfigEndpoint&&n.url===t.getConfigEndpoint)&&e.interceptors.forEach((function(e){return e.intercept(r,n,t)}))}})},t}(),Hi=function(){function t(t){this.serviceProvider=t,this.lockDropzone=new O,this.startOver=new O}return Object.defineProperty(t.prototype,"startOver$",{get:function(){var t=this;return this.startOver.asObservable().pipe(Lt(1),Yt((function(e){return t.startOverCustomHandler instanceof Function?t.startOverCustomHandler(e):t.onStartOverDefault(e),e})))},enumerable:!0,configurable:!0}),t.prototype.setApp=function(t){this.app=t},t.prototype.getApp=function(){return this.app},Object.defineProperty(t.prototype,"lockDropzone$",{get:function(){return this.lockDropzone.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setLockDropzoneState=function(t){this.lockDropzone.next(t)},t.prototype.geConfig$=function(t){var e=this.serviceProvider.toolsConfigService.getConfigModel(),r=e.getConfigEndpoint;return new _((function(n){(new FormData).append("payload",JSON.stringify({job:t})),$.ajax({type:"POST",url:r,data:JSON.stringify({job:t}),contentType:"application/json",dataType:"json",processData:!1,success:function(r){var o=Object.assign(it.asJson(e),r);o.toolName=t,!r.maxFilesCount&&r.maxFileCount&&(o.maxFilesCount=r.maxFileCount),n.next(o)},error:function(t){return n.error(t)}})})).pipe(Lt(1))},t.prototype.onStartOver=function(t){this.startOver.next(t)},t.prototype.onStartOverDefault=function(t){var e=this.serviceProvider.toolsConfigService.getConfigModel().fileAccept;this.serviceProvider.inputService.setAccept(e),t.gotTo(V.destroy)},t.prototype.getEditor=function(){return this.editor||(this.editor=r.e(2).then(r.t.bind(null,490,7)).then((function(t){return t.CandyJsEditModule})).then((function(t){return t.CandyEdit}))),this.editor},t}(),Gi=function(){function t(){this.LIMIT_OPERATIONS_SELECTOR=".limit.notification-block"}return t.prototype.getSelector=function(){return this.LIMIT_OPERATIONS_SELECTOR},t.prototype.hasLimit=function(){return!!$(this.LIMIT_OPERATIONS_SELECTOR).length},t}(),Ji=function(){function t(t){this.serviceProvider=t,this.KEY_OF_SENT="LIMIT_OPERATIONS_IS_SENT"}return Object.defineProperty(t.prototype,"gaService",{get:function(){return this.serviceProvider.ga},enumerable:!0,configurable:!0}),t.prototype.send=function(){this.gaService.onLimitOperations()},t.prototype.isSent=function(){return!!localStorage.getItem(this.KEY_OF_SENT)},t.prototype.setKeyOfSent=function(){localStorage.setItem(this.KEY_OF_SENT,"1")},t.prototype.removeKeyOfSent=function(){localStorage.removeItem(this.KEY_OF_SENT)},t}(),Wi=function(){function t(){this.storage=new yo}return t.prototype.get=function(t){return this.storage.getItem(t)},t.prototype.save=function(t,e){this.storage.add(t,e)},t.prototype.remove=function(t){this.storage.remove(t)},t.prototype.has=function(t){return this.storage.hasItem(t)},t}(),qi=function(){function t(t){this.serviceInjector=t}return Object.defineProperty(t.prototype,"Translate",{get:function(){return this.serviceInjector.get(Ot)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mediaService",{get:function(){return this.serviceInjector.get(ft)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"domHelper",{get:function(){return this.serviceInjector.get(U)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolsConfigService",{get:function(){return this.serviceInjector.get(eo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateService",{get:function(){return this.serviceInjector.get(ao)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileReaderService",{get:function(){return this.serviceInjector.get(uo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modalService",{get:function(){return this.serviceInjector.get(po)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workFileStoreService",{get:function(){return this.serviceInjector.get(go)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileTransferService",{get:function(){return this.serviceInjector.get($o)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"webSocketService",{get:function(){return this.serviceInjector.get(zo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jobService",{get:function(){return this.serviceInjector.get(Uo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scriptLoaderService",{get:function(){return this.serviceInjector.get(Ho)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pdfService",{get:function(){return this.serviceInjector.get(Qo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileConverterService",{get:function(){return this.serviceInjector.get(Yo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileRenderService",{get:function(){return this.serviceInjector.get(Xo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localPickerService",{get:function(){return this.serviceInjector.get(si)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gDrivePickerService",{get:function(){return this.serviceInjector.get(_i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropboxPickerService",{get:function(){return this.serviceInjector.get(Pi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pickerHandlerService",{get:function(){return this.serviceInjector.get(Ci)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortableService",{get:function(){return this.serviceInjector.get(ai)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ga",{get:function(){return this.serviceInjector.get(li)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorDialogService",{get:function(){return this.serviceInjector.get(bi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"passwordDialogService",{get:function(){return this.serviceInjector.get(Ni)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputService",{get:function(){return this.serviceInjector.get(xi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fileMetaDataService",{get:function(){return this.serviceInjector.get(Oi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolOptionService",{get:function(){return this.serviceInjector.get(Ii)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewerService",{get:function(){return this.serviceInjector.get(Ei)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formValuesService",{get:function(){return this.serviceInjector.get(Wi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"splitService",{get:function(){return this.serviceInjector.get(ki)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deletePagesService",{get:function(){return this.serviceInjector.get($i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotatePagesService",{get:function(){return this.serviceInjector.get(zi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interceptorService",{get:function(){return this.serviceInjector.get(Ui)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appService",{get:function(){return this.serviceInjector.get(Hi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limitOperationsService",{get:function(){return this.serviceInjector.get(Gi)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limitOperationsStatisticService",{get:function(){return this.serviceInjector.get(Ji)},enumerable:!0,configurable:!0}),t}(),Zi=function(){function t(t,e){this.component=t,this.stateName=e,this.css={host:"app-state-root"},this.componentId=z.createQuickGuidAsString(),this.destroyEvent=new O,this.serviceProvider=kt.getContainer().get(qi)}return Object.defineProperty(t.prototype,"stateService",{get:function(){return this.serviceProvider.stateService},enumerable:!0,configurable:!0}),t.prototype.initComponent=function(){this.template||(this.template=this.createTemplate(),this.appendTemplate(),this.bindEvents())},t.prototype.destroyComponent=function(){this.destroyEvent.next(!0),this.destroyEvent.complete(),this.onDestroy()},t.prototype.gotTo=function(t,e){this.component.gotTo(t,e)},t.prototype.isDestroyed=function(){return this.destroyed},t.prototype.isThisState=function(t){return this.stateName===t},t.prototype.createTemplate=function(t){return void 0===t&&(t="Not implemented Template"),'<div id="'+this.componentId+'" class="'+this.css.host+'">'+t+"</div>"},t.prototype.bindEvents=function(){var t=this;this.serviceProvider.mediaService.change$.pipe(R(this.destroyEvent)).subscribe((function(e){var r,n=$(t.serviceProvider.domHelper.cssToSelector(t.css.host)),o=function(){n.css("height",""),n.removeClass(t.css.host+"_calc-height")};if(e.isMobile&&V.pageViewer!==t.stateName){var i=n.offset().top,s=n.width(),a=n.height(),c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,p=(c-s)/2;if(i+a+p<=u)r=u-i-p,n.addClass(t.css.host+"_calc-height"),setTimeout((function(){n.css("height",r)}));else o()}else o()}))},t.prototype.appendTemplate=function(){this.serviceProvider.domHelper.getById(this.component.rootContainerId).append(this.template)},t.prototype.onDestroy=function(){this.serviceProvider.domHelper.destroyComponent(this.componentId),this.template="",this.destroyed=!0},t.prototype.destroyChildren=function(t){var e=this;(t||[]).forEach((function(t){e[t]&&e[t].destroyComponent instanceof Function&&(e[t].destroyComponent(),e[t]=null)}))},t}(),Ki=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qi=function(t){function e(e,r){return t.call(this,e,V.init)||this}return Ki(e,t),e.prototype.initComponent=function(){var t=this.serviceProvider.toolsConfigService.getConfigModel();t.firstFileUrl?(this.gotTo(V.dropZone,{sourceState:this.stateName,targetState:V.dropZone,data:{isDropZoneData:!0,url:t.firstFileUrl.url,size:t.firstFileUrl.size}}),t.firstFileUrl&&(t.firstFileUrl=void 0)):this.gotTo(V.dropZone)},e}(Zi),Yi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xi=function(t){function e(e,r){return t.call(this,e,V.destroy)||this}return Yi(e,t),e.prototype.initComponent=function(){this.stateService.next(null),this.serviceProvider.workFileStoreService.clean(),this.serviceProvider.fileTransferService.cleanStores(),this.serviceProvider.viewerService.clean(),this.serviceProvider.webSocketService.clean(),this.component.gotTo(V.init)},e.prototype.createTemplate=function(){return""},e.prototype.bindEvents=function(){},e}(Zi),ts=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),es=r(474),rs=function(t){function e(e,r){var n=t.call(this,e)||this;return n.bindToBody=r,n.css={dragover:"dragover",parent:"global-drop-zone--parent"},n.isOpened=!1,n}return ts(e,t),e.prototype.bind=function(){var t=this;this.initDropZoneEvents(),this.$parent.addClass(this.css.parent),this.serviceProvider.appService.lockDropzone$.pipe(R(this.destroyEvent)).subscribe((function(e){t.blockFileDrop=e}))},e.prototype.createTemplate=function(){var t=this.serviceProvider.Translate,e={componentId:this.componentId,dropzoneLabel:t.get("misc-drop-here")};return this.setTemplateValuesByModel(es,e)},e.prototype.initDropZoneEvents=function(){var t,e=this,r=function(t,r){return re(t.get(0),r).pipe(R(e.destroyEvent),Yt((function(t){return t})),G((function(t){return!t.defaultPrevented})))};r(t=this.bindToBody?$("body"):this.$parent,"dragover").pipe(G((function(){return!e.blockFileDrop})),G((function(){return!e.isOpened}))).subscribe((function(t){if(!e.allowEvent(t))return!1;t.preventDefault(),t.stopPropagation(),e.toggleDragOver(!0)})),r(t,"drop").pipe(G((function(){return!e.blockFileDrop&&e.isOpened}))).subscribe((function(t){t.preventDefault(),t.stopPropagation();var r=t.dataTransfer;r&&r.files&&r.files.length&&e.serviceProvider.inputService.dropFiles(r.files),e.toggleDragOver(!1)})),r(t,"dragleave").pipe(G((function(){return e.isOpened}))).subscribe((function(t){var r=$(t.relatedTarget),n=$("#"+e.componentId);e.isOutOfContainer(r,n)&&(e.toggleDragOver(!1),t.preventDefault(),t.stopPropagation())}))},e.prototype.toggleDragOver=function(t){this.isOpened=t,this.$parent.toggleClass(this.css.dragover,t)},e.prototype.allowEvent=function(t){var e=t.dataTransfer;return!!e&&!(!e.dropEffect||!e.effectAllowed)},e.prototype.isOutOfContainer=function(t,e){return!t||0===t.length||!t.is(e)&&0===e.find(t).length},e}(Nt),ns=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),os=r(475),is=function(t){function e(e){var r=t.call(this,e)||this;return r.disabled=!1,r.ids={componentId:r.componentId,btnAddLocalId:z.createQuickGuidAsString(),btnAddDropBoxId:z.createQuickGuidAsString(),btnAddGdriveId:z.createQuickGuidAsString(),inputId:z.createQuickGuidAsString(),dropZoneContentId:z.createQuickGuidAsString()},r.dropZoneComponent=new rs(r.componentId,!0),r}return ns(e,t),e.prototype.destroyComponent=function(){this.dropZoneComponent.destroyComponent(),t.prototype.destroyComponent.call(this)},e.prototype.setDisableState=function(t){this.disabled=t},e.prototype.hide=function(){this.$component.hide()},e.prototype.bind=function(){var t=this,e=function(e,r){if(!t.disabled)return e.isDefaultPrevented()||(e.preventDefault(),e.stopImmediatePropagation(),t.serviceProvider.inputService.selectFile(r)),!1};this.$btnAddLocal.off("click").on("click",(function(t){return e(t,Xt.device)})),this.$dropZoneContent.off("click").on("click",(function(t){return e(t,Xt.device)})),this.$btnAddDropBox.off("click").on("click",(function(t){return e(t,Xt.dropBox)})),this.$btnAddGdrive.off("click").on("click",(function(t){return e(t,Xt.gDrive)})),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent),this.dropZoneComponent.init()},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(os,this.ids),e=this.serviceProvider.toolsConfigService.allowMultipleFiles()?"drag-and-drop-mobile-text":"drag-and-drop-mobile-text-one",r=this.serviceProvider.Translate,n={btnAddLocalLabel:r.get(e),gDriveIcon:qt.GDrive,gDriveLabel:"Google Drive",dropBoxIcon:qt.DropBox,dropBoxLabel:"Dropbox",dragAndDropText:r.get("drag-and-drop-text")};return this.setTemplateValuesByModel(t,n)},Object.defineProperty(e.prototype,"$btnAddLocal",{get:function(){return this.helper.getById(this.ids.btnAddLocalId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$btnAddDropBox",{get:function(){return this.helper.getById(this.ids.btnAddDropBoxId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$btnAddGdrive",{get:function(){return this.helper.getById(this.ids.btnAddGdriveId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$dropZoneContent",{get:function(){return this.helper.getById(this.ids.dropZoneContentId)},enumerable:!0,configurable:!0}),e}(Nt),ss=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),as=r(476),cs=function(t){function e(e){var r=t.call(this,e)||this;return r.ids={componentId:r.componentId},r}return ss(e,t),e.prototype.createTemplate=function(){return t.prototype.setTemplateValuesByModel.call(this,as,this.ids)},e.prototype.bind=function(){},e}(Nt),us=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ps=function(t){function e(e,r){var n=t.call(this,e,V.dropZone)||this;return n.inputData=r,n.locked=!1,n.view=new is(n.componentId),n.pendingView=new cs(n.componentId),n}return us(e,t),Object.defineProperty(e.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitOperationsService",{get:function(){return this.serviceProvider.limitOperationsService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitOperationsStatisticService",{get:function(){return this.serviceProvider.limitOperationsStatisticService},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var e=this;t.prototype.bindEvents.call(this),this.view.init();var r=!1;if(this.serviceProvider.inputService.onFilesDrop$.pipe(R(this.destroyEvent),G((function(){return!r})),Yt((function(t){return e.limitOperationsService.hasLimit()?e.gotTo(V.limits):e.limitOperationsStatisticService.removeKeyOfSent(),t})),tr((function(t){return e.locked?un("DropZoneState:locked"):mo(t.map((function(t){return e.fileReaderService.readFile(t).pipe(Lt(1))})))}))).subscribe((function(t){var r=(t||[]).map((function(t,e){return t.order=e,t}));if(r.length){var n={sourceState:e.stateName,targetState:V.readFiles,data:e.stateService.createStoreFilesData(r)};e.gotTo(V.readFiles,n)}})),this.inputData&&this.inputData.data&&this.inputData.data.isDropZoneData){r=!0,this.view.setDisableState(!0),this.view.hide(),this.pendingView.init();var n=this.inputData.data.url,o=this.inputData.data.size,i=this.serviceProvider.toolsConfigService,s=i.getConfigModel(),a=decodeURI(n).split("?").shift().split("/").pop(),c=this.serviceProvider.fileMetaDataService.getMimeTypeByFileName(a);if(!i.isAllowSize(s,o))return void this.serviceProvider.errorDialogService.showMaxFileSizeError({name:a,type:c,size:o},s.maxFileSize,!1,(function(){e.gotTo(V.destroy)})).subscribe();Xe(this.serviceProvider.fileTransferService.downloadByUrl(n,s.token,c,a)).pipe(R(this.destroyEvent),Lt(1),Go((function(t){throw r=!1,e.view.setDisableState(!1),alert("Entered file was not loaded"),console.warn("e",{e:t,url:n,name:a,type:c}),t})),tr((function(t){return e.fileReaderService.readFile(t).pipe(R(e.destroyEvent),Lt(1))}))).subscribe((function(t){var r={sourceState:e.stateName,targetState:V.readFiles,data:e.stateService.createStoreFilesData([t])};e.gotTo(V.readFiles,r)}))}},e.prototype.onDestroy=function(){this.destroyChildren(["view","pendingView"]),t.prototype.onDestroy.call(this)},e}(Zi),ls=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fs=function(t){function e(e,r){var n=t.call(this,e,V.limits)||this;return n.inputData=r,n}return ls(e,t),Object.defineProperty(e.prototype,"limitOperationsService",{get:function(){return this.serviceProvider.limitOperationsService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitOperationsStatisticService",{get:function(){return this.serviceProvider.limitOperationsStatisticService},enumerable:!0,configurable:!0}),e.prototype.initComponent=function(){this.template=this.createTemplate(),t.prototype.initComponent.call(this),this.limitOperationsService.hasLimit()&&(this.showLimitNotification(),this.sendAnalytics())},e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.showLimitNotification=function(){var t=$(this.limitOperationsService.getSelector()).css("display","flex");this.serviceProvider.domHelper.getById(this.component.rootContainerId).append(t)},e.prototype.sendAnalytics=function(){this.limitOperationsStatisticService.isSent()||(this.limitOperationsStatisticService.send(),this.limitOperationsStatisticService.setKeyOfSent())},e}(Zi),ds=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hs=function(t){function e(e,r){var n=t.call(this,e,V.readFiles)||this;if(!r)throw new Error("!inputData");if(!n.stateService.isStoreFilesEventData(r.data))throw new Error("is not file data");return n.inputData=r,n.view=new cs(n.componentId),n}return ds(e,t),Object.defineProperty(e.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var t=this;this.view.init();var e=this.stateService.eventDataToStoreFilesArray(this.inputData.data);e.length?(this.gotTo(V.pending),mo(e.map((function(e){return t.fileReaderService.readBlob(e)}))).pipe(Lt(1)).subscribe((function(e){var r={targetState:V.checkFiles,sourceState:t.stateName,data:t.stateService.createStoreFilesData(e)};t.gotTo(V.checkFiles,r)}))):this.gotTo(V.destroy)},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),vs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ys=function(t){function e(e,r){var n=t.call(this,e,V.pending)||this;return n.view=new cs(n.componentId),n}return vs(e,t),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){this.view.init()},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),gs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ms=function(t){function e(e,r){var n=t.call(this,e,V.checkFiles)||this;if(!r)throw new Error("!inputData");if(!n.stateService.isStoreFilesEventData(r.data))throw new Error("!is not file data");return n.inputData=r,n.view=new cs(n.componentId),n}return gs(e,t),Object.defineProperty(e.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var t=this;this.view.init();var e=this.serviceProvider.localPickerService.handleFiles(this.inputData.data,0,0),r=function(){return t.onClose(e.readyFiles)};e.error?this.serviceProvider.errorDialogService.handleError(e,r,!0):r()},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e.prototype.onClose=function(t){if(t.length){var e=this.stateService.createStoreFilesData(t),r={targetState:V.selectViewerState,sourceState:this.stateName,data:e};this.serviceProvider.ga.onFirstFileAddToTool(e.files),this.gotTo(V.selectViewerState,r)}else this.gotTo(V.destroy)},e}(Zi),bs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ws=function(t){function e(e,r){var n=t.call(this,e,V.selectViewerState)||this;if(!r)throw new Error("!inputData");if(!n.stateService.isStoreFilesEventData(r.data))throw new Error("is not file data");return n.view=new cs(n.componentId),n.inputData=r,n}return bs(e,t),Object.defineProperty(e.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileReaderService",{get:function(){return this.serviceProvider.fileReaderService},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var t=this,e=this.toolsConfigService;this.view.init();var r=this.stateService.eventDataToStoreFilesArray(this.inputData.data);r.forEach((function(e){return t.serviceProvider.workFileStoreService.add(e.guid,e)}));var n=void 0;if(!this.serviceProvider.toolsConfigService.getToolConfig().blockInstantUploading){var o=e.getConfigModel();n=this.serviceProvider.fileTransferService.upload(r,o)}var i={items:r,initUploadTransactionId:n,isViewerOptions:!0},s={targetState:null,sourceState:this.stateName,data:i};e.useEditor()?s.targetState=V.editViewer:e.useInstantViewer()?s.targetState=V.instantViewer:e.useFileViewer()?s.targetState=V.fileViewer:e.usePerPageViewer()&&(s.targetState=V.pageViewer),s.targetState&&this.gotTo(s.targetState,s)},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),_s=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ss=function(t){function e(e,r,n){void 0===n&&(n=V.instantViewer);var o=t.call(this,e,n)||this;if(!r)throw new Error("!inputData");if(!r.data.isViewerOptions)throw new Error("is not isViewerOptions");return o.inputData=r,o.pwMap=new Map,o}return _s(e,t),Object.defineProperty(e.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!0,configurable:!0}),e.prototype.initComponent=function(){this.bindEvents()},e.prototype.createTemplate=function(){return""},e.prototype.createTemplateBase=function(e){return t.prototype.createTemplate.call(this,e)},e.prototype.initComponentBase=function(){return t.prototype.initComponent.call(this)},e.prototype.bindEvents=function(){var t=this,e=this.inputData.data,r=e.items.length;if(this.hasPdf(e))if(this.serviceProvider.appService.startOver$.pipe(Lt(1)).subscribe(),1===r){var n=e.items[0];this.waitBlobUrl$(n).pipe(tr((function(){var e={url:n.blobUrl};return n.password&&(e.password=n.password),t.serviceProvider.pdfService.isValidPassword(e).pipe(Yt((function(r){return r&&n.password?t.pwMap.set(n.guid,e.password):delete n.password,r})))})),tr((function(e){return e?Qe(!0):t.openPasswordDialog(n)})),G((function(t){return!!t})),Lt(1)).subscribe((function(){return t.startListening(e)})),this.gotTo(V.pending)}else{var o={status:Bo.errored,hasError:!0,data:{message:"More than one pdf file does not support"}};this.gotTo(V.errorViewer,{targetState:V.errorViewer,sourceState:this.stateName,data:o})}else this.startListening(e)},e.prototype.waitBlobUrl$=function(t){return(t.waitBlobUrl$?t.waitBlobUrl$:this.serviceProvider.fileTransferService.hasFilesForDownload([t])?this.serviceProvider.fileTransferService.download(t):Qe(!0)).pipe(Lt(1))},e.prototype.startListening=function(t){var e=this,r=this.serviceProvider.fileTransferService.progressEvent$,n=this.createUploadEventData(r);this.gotTo(V.uploadState,n),this.serviceProvider.fileTransferService.progressEvent$.pipe(G((function(t){return!!t})),G((function(e){return e.transactionId===t.initUploadTransactionId})),Go((function(t){return un({status:Bo.errored,hasError:!0,data:t})}))).pipe(G((function(t){return t.progress.completed})),Lt(1)).subscribe((function(){e.gotTo(V.runJobState,e.createRunJobData(t.items))}),(function(t){if(!t||!t.hasError)throw new Error("!error || !error.hasError");e.gotTo(V.errorViewer,{targetState:V.errorViewer,sourceState:e.stateName,data:t})}))},e.prototype.hasPdf=function(t){return!!t.items.find((function(t){return t.ext===dt.pdf}))},e.prototype.createRunJobData=function(t){return{sourceState:this.stateName,targetState:V.runJobState,data:this.stateService.createWorkFilesEventData(this.storeToWorkFiles(t))}},e.prototype.createUploadEventData=function(t){return{sourceState:this.stateName,targetState:V.uploadState,data:this.stateService.createProgressEventData(t.pipe(Yt((function(t){return t.progress}))))}},e.prototype.storeToWorkFiles=function(t){var e=this;return t.map((function(t,r){var n=e.serviceProvider.fileConverterService.storeToWork(t,r+1);return n.readPassword=e.pwMap.get(t.guid),n}))},e.prototype.isValidPassword=function(t,e){var r={url:t.blobUrl};return e&&(r.password=e),this.serviceProvider.pdfService.isValidPassword(r)},e.prototype.openPasswordDialog=function(t){var e=this;return this.serviceProvider.passwordDialogService.openFileDialog({fileName:t.name,readPasswordFn:function(r){return e.isValidPassword(t,r).pipe(Yt((function(n){return n?e.pwMap.set(t.guid,r):e.pwMap.has(t.guid)&&e.pwMap.delete(t.guid),n})))}}).pipe(Lt(1),tr((function(t){return t.stateChange$.pipe(R(e.destroyEvent))})),tr((function(t){switch(t){case pi.closed:e.serviceProvider.appService.onStartOver(e)}return Qe(t)})),G((function(t){return t===pi.valid})),Yt((function(){return!0})))},e}(Zi);function Ps(t){return!p(t)&&t-parseFloat(t)+1>=0}function xs(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}}var Cs,Os=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Is=r(477),Es=function(t){function e(e,r){var n=t.call(this,e)||this;return n.seconds=r,n.ids={componentId:n.componentId,timerId:z.createQuickGuidAsString(),canvasContainerId:z.createQuickGuidAsString()},n}return Os(e,t),e.prototype.start=function(t){var e=this;void 0===t&&(t=1e3);var r=1e3*this.seconds,n=Math.round(r/t);(!n||n<1)&&(r=0,n=0);var o=this.helper.getById(this.ids.canvasContainerId);return o.html(""),o.append($("<img/>",{src:"/assets/sand-time.svg",height:100})),function(t,e,r){void 0===t&&(t=0);var n=-1;return Ps(e)?n=Number(e)<1?1:Number(e):ke(e)&&(r=e),ke(r)||(r=K),new _((function(e){var o=Ps(t)?t:+t-r.now();return r.schedule(xs,o,{index:0,period:n,subscriber:e})}))}(0,t).pipe(R(this.destroyEvent),Yt((function(o){var i=r-o*t;return e.setTime(i/1e3),n--})),G((function(t){return t<=0})),Lt(1),Yt((function(){})))},e.prototype.createTemplate=function(){var e=this.serviceProvider.Translate,r={windowsIcon:qt.Candy,windowsMessage:e.get("q-tired-of-waiting"),queueLabel:this.getQueLabelValue(this.seconds)},n=t.prototype.setTemplateValuesByModel.call(this,Is,this.ids);return t.prototype.setTemplateValuesByModel.call(this,n,r)},e.prototype.bind=function(){},Object.defineProperty(e.prototype,"$timer",{get:function(){return this.helper.getById(this.ids.timerId)},enumerable:!0,configurable:!0}),e.prototype.setTime=function(t){this.$timer.find(".sleep").text(t+"")},e.prototype.getQueLabelValue=function(t){return this.serviceProvider.Translate.get("queue-text-header").replace("%s",""+t)},e}(Nt),ks=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.complete="complete",t.error="error"}(Cs||(Cs={}));var Ts,js=function(t){function e(e,r){var n=t.call(this,e,V.queueState)||this;return n.second=n.serviceProvider.toolsConfigService.getQueSecond(),n.second<1&&(n.second=0),n.view=new Es(n.componentId,n.second),n}return ks(e,t),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var t=this;0===this.second?this.stateService.next({sourceState:this.stateName,targetState:this.stateName,data:{queueState:Cs.complete,isQueStateOption:!0}}):(this.view.init(),this.view.start().pipe(R(this.destroyEvent)).subscribe({complete:function(){t.stateService.next({sourceState:t.stateName,targetState:t.stateName,data:{queueState:Cs.complete,isQueStateOption:!0}})},error:function(e){t.stateService.next({sourceState:t.stateName,targetState:t.stateName,data:{queueState:Cs.error,isQueStateOption:!0,error:e}})}}))},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),Ds=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ms=r(478),As=function(t){function e(e,r){var n=t.call(this,e)||this;return n.progress$=r,n.ids={componentId:n.componentId,percentFillId:z.createQuickGuidAsString(),percentValueId:z.createQuickGuidAsString()},n}return Ds(e,t),e.prototype.bind=function(){var t=this;this.progress$.pipe(R(this.destroyEvent)).subscribe((function(e){t.$percentValue.text(""+e.percent.toFixed(0)),t.$percentFill.css({width:e.percent.toFixed(2)+"%"})}))},e.prototype.createTemplate=function(){var t=this.serviceProvider.Translate,e={windowsIcon:qt.Candy,windowsMessage:t.get("tired-of-waiting"),uploadedMessage:t.get("component-uploaded").replace("%s","")},r=this.setTemplateValuesByModel(Ms,this.ids);return this.setTemplateValuesByModel(r,e)},Object.defineProperty(e.prototype,"$percentValue",{get:function(){return this.helper.getById(this.ids.percentValueId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$percentFill",{get:function(){return this.helper.getById(this.ids.percentFillId)},enumerable:!0,configurable:!0}),e}(Nt),Fs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ls=function(t){function e(e,r){var n=t.call(this,e,V.uploadState)||this;if(!r)throw new Error("!inputData");if(!n.stateService.isProgressEventData(r.data))throw new Error("!progress observable was not set to instance");return n.progress$=r.data.progress$,n.view=new As(n.componentId,n.progress$.pipe(R(n.destroyEvent))),n}return Fs(e,t),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){this.view.init()},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),Rs=function(){function t(){}return t.run=function(t,e){if(this.isSupported(t)){if(Mo.isIE())return void console.warn("ie doesnt support this animations",{isIe:Mo.isIE(),version:Mo.getMajorVersion()});r.e(1).then(r.t.bind(null,491,7)).then((function(t){return t.CandyCssAnimation})).then((function(r){r.createAnimation(t,e.get(0))}))}},t.isSupported=function(t){return!![vt.addPdfPageNumbers,vt.compressPdf,vt.cropPdf,vt.deletePdf,vt.editPdf,vt.editMetadataPdf,vt.mergePdf,vt.protectPdf,vt.addPdfHeaderAndFooter,vt.rotatePdf,vt.pdfResize,vt.unlockPdf,vt.addPdfWatermark,vt.rearrangePdf,vt.extractImages,vt.splitPdf,vt.pdfOcr].find((function(e){return e==t}))},t}(),Vs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bs=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Ns=r(479),$s=function(t){function e(e){var r=t.call(this,e)||this;return r.ids={componentId:r.componentId,canvasContainerId:z.createQuickGuidAsString(),iconsContainerId:z.createQuickGuidAsString(),canvasId:z.createQuickGuidAsString(),progressPercentId:z.createQuickGuidAsString()},r}return Vs(e,t),e.prototype.setProgress=function(t){t&&this.helper.getById(this.ids.progressPercentId).html(t+"%")},e.prototype.createTemplate=function(){var e,r=this.serviceProvider.Translate,n=t.prototype.setTemplateValuesByModel.call(this,Ns,this.ids),o=this.serviceProvider.toolsConfigService.getToolConfig(),i=this.serviceProvider.toolsConfigService.getConfigModel(),s="",a="",c=[],u=o.convertToIcons;if(u&&u.length){var p=qt.arrow;c.push(p),c.push(p),c.push(p),s=(e=Bs(u.map((function(t){return qt.getToolIcon(t)})),2))[0],a=e[1],this.useIcons=!0}var l={convertFromIcon:s,arrowsIcon:c.join(""),convertToIcon:a,windowsIcon:qt.Candy,windowsMessage:r.get("tired-of-waiting"),jobLabel:r.get(i.toolName+"-animation")};return t.prototype.setTemplateValuesByModel.call(this,n,l)},e.prototype.bind=function(){this.runAnimation()},e.prototype.runAnimation=function(){if(this.useIcons)this.helper.getById(this.ids.iconsContainerId).show();else{var t=this.serviceProvider.toolsConfigService.getToolName();if(Rs.isSupported(t)){var e=this.helper.getById(this.ids.canvasContainerId);e.html(""),Rs.run(t,e),e.show()}}},e}(Nt),zs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.password="password",t.skip="skip"}(Ts||(Ts={}));var Us,Hs=function(t,e,r){this.storedFile=e,this.workFile=t,this.destroy$=r,this.fileId=t.guid,this.documentSize=null,this.currentSize=null,this.pdfPage=null,this.rendered=!1,this.waitPassword=!0,this.locked=!0,this.maxSize=e.size,this.viewOrder=e.order,this.subscribed=!1},Gs=function(t){function e(e,r){var n=t.call(this,e,V.runJobState)||this;if(!r)throw new Error("!inputData");if(!n.stateService.isWorkFileEventData(r.data))throw new Error("is not work files data");return n.view=new $s(n.componentId),n.files=n.stateService.eventDataToWorkFileArray(r.data),n}return zs(e,t),e.prototype.destroyComponent=function(){this.lockDestroy||t.prototype.destroyComponent.call(this)},e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var t=this;this.lockDestroy=!0,this.stateService.changeState$.pipe(G((function(t){return t.sourceState===V.queueState})),Lt(1)).subscribe((function(e){if(t.lockDestroy=!1,e.data&&e.data.queueState===Cs.error){if(!e.data||!e.data.hasError)throw new Error("!error || !error.hasError");var r={status:Bo.errored,hasError:!0,data:e};t.gotTo(V.errorViewer,{targetState:V.errorViewer,sourceState:t.stateName,data:r})}else t.component.setCurrentState(t),t.view.init(),t.serviceProvider.jobService.runJob(t.files).pipe(Go((function(e){var r=t.getSocketData(e&&e.data?e:{data:e.statusText});return console.warn("catchError",{e:e,errorData:r}),t.handleError(r),un(e)})),R(t.destroyEvent),tr((function(e){return e.session_id&&(t.sessionId=e.session_id),t.getJobData(e).pipe(R(t.destroyEvent),Yt((function(e){return e&&e.hasError&&e.status==Bo.passwordError?(t.onPasswordError(e.data.message),null):e})),G((function(t){return!!t})),Go((function(e){var r=t.getSocketData(e&&e.data?e:{data:e.statusText});return console.warn("catchError",{e:e,errorData:r}),t.handleError(r),un(e)})))}))).subscribe((function(e){if(e.status===Bo.finished)t.redirectToResult();else{if(!e.hasError)throw console.warn("RunJobState:runJob:error",{socketData:e}),new Error("unexpected result");t.handleError(e)}}))})),this.gotTo(V.queueState)},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e.prototype.handleError=function(t){t.hasError&&(t.status===Bo.passwordError||(t.status!==Bo.expectedError&&this.serviceProvider.ga.onInvalidJob({error:t,success:!1}),this.gotTo(V.errorViewer,{targetState:V.errorViewer,sourceState:this.stateName,data:t})))},e.prototype.getSocketData=function(t){var e;try{e=JSON.parse(t.data)}catch(e){return console.error("something went wrong. "+JSON.stringify(e)),{data:t.data,status:Bo.parseError,hasError:!0}}if(!e)return{data:null,status:Bo.isEmptyData,hasError:!0};if(e.expectedError)return{data:{status:e.status,type:Xn.expectedError,message:e.expectedError,data:e},status:Bo.expectedError,hasError:!0};if(e.passwordException)return{data:{message:e.message,data:e},status:Bo.passwordError,hasError:!0};switch(e.status){case Bo.finished:return{data:e,status:Bo.finished,hasError:!1};case Bo.errored:return{data:e,status:Bo.errored,hasError:!0};case Bo.processing:return{data:e,status:Bo.processing,hasError:!1}}switch(e.error){case Xn.notImplemented:console.error("backend:"+e.error);break;default:console.error("not expected status from response. "+JSON.stringify(e))}return{data:e,status:Bo.errored,hasError:!0}},e.prototype.getJobData=function(t){var e=this;if(!t)return Qe({data:t,status:Bo.errored,hasError:!0});if(t.status===Bo.waiting){if(!t.websocket)throw new Error("!data.websocket");var r=this.serviceProvider.toolsConfigService.getConfigModel();r.webSocket!==t.websocket&&(r.webSocket=t.websocket);var n=this.serviceProvider.webSocketService;return n.startConnection(r),new _((function(r){var o=!1;n.error$.pipe(R(e.destroyEvent),yn((function(){return!o}))).subscribe((function(e){o=!0;var n={data:{data:t,error:e},hasError:!0,status:Bo.errored};r.error(n),r.complete(),console.warn("getJobData:error",{e:e})})),n.close$.pipe(R(e.destroyEvent),yn((function(){return!o}))).subscribe((function(e){o=!0;var n={data:{data:t,error:e},hasError:!0,status:Bo.errored};r.error(n),r.complete()})),e.serviceProvider.webSocketService.receiveMessage$.pipe(R(e.destroyEvent),yn((function(){return!o}))).subscribe((function(t){var n=e.getSocketData(t);n.hasError?n.status===Bo.passwordError?r.next(n):(o=!0,r.next(n),r.complete()):n.status===Bo.finished?(o=!0,r.next(n),r.complete()):n.status===Bo.processing&&n.data&&n.data.progress&&e.view.setProgress(n.data.progress)}))}))}return t.ok?Qe({data:t,status:Bo.finished,hasError:!1}):Qe({data:t,status:Bo.errored,hasError:!0})},e.prototype.redirectToResult=function(){var t="result/"+this.sessionId+".html",e=this.serviceProvider.toolsConfigService.getLocalizedUrl(t),r=this.serviceProvider.toolsConfigService.getConfigModel();(this.serviceProvider.webSocketService.clean(),r.isDevelopmentMode)?confirm("Job complete, reload?")&&window.location.reload():window.location.href=e},e.prototype.onPasswordError=function(t){var e=this;if(!this.isPwDialogPending){var r=t,n=r.map((function(t){return t.replace(/\.pdf$/,"")})),o=this.files,i=this.serviceProvider.workFileStoreService.getStore(),s=new O,a=s.asObservable().pipe(Lt(1),ge((function(){e.isPwDialogPending=!1}))),c=n.map((function(t){var e=o.find((function(e){return e.guid===t})),r=i.find((function(e){return e.guid===t}));return e&&r?new Hs(e,r,a):null})).filter((function(t){return!!t}));this.isPwDialogPending=!0;var u=function(){var t={entry:r,password:[],type:Ts.skip};e.serviceProvider.webSocketService.send(JSON.stringify(t)).subscribe(),s.next()};c.length?this.serviceProvider.passwordDialogService.openFileListDialog({items:c,usePerItemDelete:!0}).pipe(R(a),ge((function(t){t.delete$.pipe(R(a)).subscribe((function(t){return r=t,e.serviceProvider.workFileStoreService.remove(r),Li(e.files||[],(function(t){return t.guid===r})),void Li(c||[],(function(t){return t.fileId===r}));var r})),t.close$.subscribe((function(){return u()})),t.ok$.pipe(R(a)).subscribe((function(){var t;e.serviceProvider.modalService.hide(),t={entry:r,password:c.map((function(t){return{id:t.fileId,fileName:t.workFile.exportName,password:t.workFile.readPassword}})).filter((function(t){return!!(t.password||"").trim()})),type:Ts.password},s.next(),e.serviceProvider.webSocketService.send(JSON.stringify(t)).subscribe(),console.log("items:ok",{selectedFiles:c,ids:n})}))}))).subscribe((function(){}),(function(){return s.next()})):u()}},e}(Zi),Js=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ws=r(480),qs=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.ids={componentId:n.componentId,btnCloseId:z.createQuickGuidAsString(),workCanvasId:z.createQuickGuidAsString(),workCanvasContainerId:z.createQuickGuidAsString()},n}return Js(e,t),e.prototype.createTemplate=function(){return this.setTemplateValuesByModel(Ws,this.ids)},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.show=function(){var t=this;if(!this.options.imageInfo)throw new Error("!this.options.imageInfo");var e=new Image,r=this.options.imageInfo,n=r.dimensions,o=n.width,i=n.height;e.src=r.url,e.width=o,e.height=i,e.onload=function(){var n=t.$workCanvas,s=t.getInnerDimensions(),a=n.get(0);a.width=o,a.height=i,a.getContext("2d").drawImage(e,0,0);var c=s.width/s.height,u=o/i,p=t.calcCss(s,c,u,r.angle);n.css({width:p.width,height:p.height}),r.angle&&n.css("transform","rotate("+r.angle+"deg)"),t.setBtnPosition()}},e.prototype.hide=function(){this.unbind(),this.destroyComponent()},e.prototype.bind=function(){var t=this,e=this.close.bind(this);this.$btnClose.on("click",e),this.$parent.on("click",e),this.destroyEvent.pipe(Lt(1)).subscribe((function(){t.$parent.off("click",e)})),re(document,"keydown").pipe(R(this.destroyEvent),G((function(t){return"Escape"===t.key})),Lt(1)).subscribe((function(){return e()}))},e.prototype.close=function(){this.destroyed||(this.onClose instanceof Function&&this.onClose(),this.serviceProvider.modalService.onComponentClose(this))},Object.defineProperty(e.prototype,"$btnClose",{get:function(){return this.helper.getById(this.ids.btnCloseId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$workCanvas",{get:function(){return this.helper.getById(this.ids.workCanvasId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$workContainer",{get:function(){return this.helper.getById(this.ids.workCanvasContainerId)},enumerable:!0,configurable:!0}),e.prototype.getInnerDimensions=function(){var t=window.innerWidth,e=window.innerHeight,r=this.$btnClose.width();return{width:t-20-r-60,height:e-20-60-r-60}},e.prototype.calcCss=function(t,e,r,n){n||(n=0);var o=90===(n=Math.abs(n%360))||270===n;return r>1||r<1?e>=1?o?{width:t.height,height:t.height/r}:{width:t.height*r,height:t.height}:o?{width:t.width*r,height:t.width}:{width:t.width,height:t.width/r}:e>=1?{width:t.height,height:t.height}:{width:t.width,height:t.width}},e.prototype.setBtnPosition=function(){var t=this.$workCanvas,e=this.$btnClose,r=t.offset(),n=e.offset(),o=n.top-r.top,i=n.left-r.left+e.width()-20;e.css({top:-o-60,left:i})},e}(Nt),Zs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ks=function(t){function e(e,r){var n=t.call(this,e)||this;return n.currentState=r,n.viewItems=[],n.trans=[],n.options={isZoomDialogOpened:!1,useRotate:!1,useZoom:!1,usePageBox:!1,showPageNumber:!1,loadDisabled:!1,useDelete:!1},n.ids={componentId:n.componentId,headerContainerId:n.createChildId("header"),viewerContainerId:n.createChildId("viewerContainer"),footerContainerId:n.createChildId("footerContainer"),workCanvasId:n.createChildId("workCanvas")},n.dropZoneComponent=new rs(n.componentId,!0),n}return Zs(e,t),Object.defineProperty(e.prototype,"$workCanvas",{get:function(){return this.helper.getById(this.ids.workCanvasId)},enumerable:!0,configurable:!0}),e.prototype.addFilesToWorkStore=function(t){var e=this;t.forEach((function(t){e.serviceProvider.workFileStoreService.add(t.guid,t)}))},e.prototype.waitBlobUrl$=function(t,e){return(t.waitBlobUrl$?t.waitBlobUrl$:this.serviceProvider.fileTransferService.hasFilesForDownload([t])?this.serviceProvider.fileTransferService.download(t):Qe(!0)).pipe(Lt(1),R(this.destroyEvent),R(e))},e.prototype.hasLockedFiles=function(){return!!this.viewItems.find((function(t){return t.locked}))},e.prototype.hasNotRenderedItems=function(){return!!this.viewItems.find((function(t){return!t.rendered}))},e.prototype.updateViewCounters=function(t,e){var r=this;void 0===e&&(e=!0),e&&this.serviceProvider.sortableService.sortArray(t,(function(t){return t.viewOrder}),!0),t.forEach((function(t,e){r.updateViewItemCounter(t,e+1)}))},e.prototype.updateViewItemCounter=function(t,e){t.viewOrder=e,t.component.setPageNumber(e)},e.prototype.openPasswordDialog=function(t,e){var r=this;return this.serviceProvider.passwordDialogService.openFileDialog({fileName:t.storedFile.name,readPasswordFn:function(r){return t.workFile.readPassword=r,e(r).pipe(Yt((function(e){return e||delete t.workFile.readPassword,e})))}}).pipe(R(this.destroyEvent)).pipe(tr((function(t){return t.stateChange$.pipe(R(r.destroyEvent),Yt((function(t){var e={closed:!1,state:t};switch(t){case pi.valid:case pi.closed:return e.closed=!0,e;default:return e}})))})))},e.prototype.onZoom=function(t){var e=this;if(!this.options.isZoomDialogOpened&&this.options.useZoom){var r=this.viewItems.find((function(e){return e.fileId===t}));if(r){var n;if(this.options.isZoomDialogOpened=!0,r.zoomImageInfo)n=Qe(r.zoomImageInfo).pipe(Lt(1));else try{r.zoomImageInfo={angle:0,dimensions:null,url:void 0},n=this.renderZoom$(r.pdfPage,r.destroy$).pipe(Yt((function(t){return Object.assign(r.zoomImageInfo,t),r.zoomImageInfo})),Lt(1))}catch(t){return this.options.isZoomDialogOpened=!1,void console.error("renderZoom$:error",{error:t,item:r})}n.subscribe((function(){Object.assign(r.zoomImageInfo,{angle:e.getAngle(r)}),e.serviceProvider.modalService.show((function(t){var n=new qs(t,{imageInfo:r.zoomImageInfo});return n.onClose=function(){e.options.isZoomDialogOpened=!1},n}))}))}}},e.prototype.getAngle=function(t){return t&&t.workFile&&t.workFile.options&&t.workFile.options.angle?t.workFile.options.angle:0},e.prototype.renderZoom$=function(t,e){return this.serviceProvider.pdfService.renderZoom$(t,e,this.destroyEvent)},e.prototype.isPasswordError=function(t){return this.serviceProvider.pdfService.isPasswordError(t)},e}(Nt),Qs=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Xs=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ta=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},ea=r(481),ra=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.toolConfig=n.serviceProvider.toolsConfigService.getToolConfig(),n}return Qs(e,t),e.prototype.init=function(){if(!this.entryOptions)throw new Error("!this.entryOptions");var t=this.serviceProvider.toolsConfigService;if(this.initBase()){this.trans.push({files:this.entryOptions.items.map((function(t){return t.guid})),tranId:this.entryOptions.initUploadTransactionId});var e=this.options;e.useZoom=this.toolConfig.showZoomUi,e.usePageBox=t.showPageCounter(),e.useRotate=t.isRotatable(),e.useDelete=!this.toolConfig.hideDelete;var r=t.isSingleFileTool();e.showPageNumber=!r,r||this.dropZoneComponent.init(),this.onFilesEnter(this.entryOptions.items)}},e.prototype.destroyComponent=function(){this.dropZoneComponent&&this.dropZoneComponent.destroyComponent(),t.prototype.destroyComponent.call(this)},e.prototype.initBase=function(){return!this.destroyed&&(t.prototype.init.call(this),!this.destroyed)},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ea,this.ids),e=this.serviceProvider.viewerService.getMinMaxItemValue(),r={canvasWidth:e.min,canvasHeight:e.max};return this.setTemplateValuesByModel(t,r)},e.prototype.bind=function(){var t=this;this.destroyed||this.initFooter(),this.destroyed||this.initHeader(),this.destroyed||this.initFileActions(),this.destroyed||this.initSortable(),this.serviceProvider.inputService.onFilesDrop$.pipe(R(this.destroyEvent),G((function(){return t.serviceProvider.mediaService.isMobile()})),fn(40)).subscribe((function(){var e=$(t.serviceProvider.domHelper.cssToSelector("app-state-root")),r=e.find(".file-viewer--content"),n=r.offset().top+r.height(),o=r.find(".page-item").last();n<o.offset().top+o.height()&&(e.css("height",""),e.removeClass("app-state-root_calc-height"))}))},e.prototype.initFooter=function(){var t=this,e=this.serviceProvider.toolsConfigService.getToolConfig();e.footerFactory&&(this.footerComponent=e.footerFactory(this.ids.footerContainerId,this.currentState),this.footerComponent.init(),this.footerComponent.runJob$.pipe(R(this.destroyEvent)).subscribe((function(){t.helper.scrollMoreThan(350)&&t.helper.scrollToStart(),t.onRunJob()})),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent))},e.prototype.onRunJobReady=function(){var t=this;this.serviceProvider.sortableService.sortArray(this.viewItems,(function(t){return t.viewOrder}),!0);var e=this.viewItems.map((function(t){return t.fileId})),r=this.viewItems.map((function(t){return t.workFile})),n=this.serviceProvider.fileTransferService,o=n.progressEvent$.pipe(Yt((function(){return n.getStoredProgress(e)})));this.currentState.gotTo(V.uploadState,{sourceState:this.currentState.stateName,targetState:V.uploadState,data:this.serviceProvider.stateService.createProgressEventData(o)}),n.progressEvent$.pipe(Go((function(t){return un({status:Bo.errored,hasError:!0,data:t})})),G((function(t){return t.progress.completed})),Lt(1)).subscribe({error:function(e){if(!e||!e.hasError)throw new Error("!error || !error.hasError");t.currentState.gotTo(V.errorViewer,{targetState:V.errorViewer,sourceState:t.currentState.stateName,data:e})}}),Me([n.progressEvent$.pipe(G((function(t){return t.status===Do.completed}))),o.pipe(G((function(t){return t.completed})),Lt(1))]).subscribe((function(e){var n=ta(e,2),o=(n[0],n[1],t.serviceProvider.stateService.createWorkFilesEventData(r));t.currentState.gotTo(V.runJobState,{sourceState:t.currentState.stateName,targetState:V.runJobState,data:o})}))},e.prototype.onRunJob=function(){var t=this;if(!this.hasLockedFiles())return this.hasNotRenderedItems()?(console.warn("hasNotRenderedFiles",{items:this.viewItems}),void alert("Please wait while the file rendering is finished.")):void this.onRunJobReady();this.serviceProvider.passwordDialogService.openFileListDialog({items:this.viewItems.filter((function(t){return t.locked}))}).pipe(R(this.destroyEvent)).subscribe((function(e){e.ok$.subscribe((function(){t.serviceProvider.modalService.hide(),t.onRunJobReady()}))}))},e.prototype.initHeader=function(){var t=this;this.toolConfig.headerFactory&&(this.headerComponent=this.toolConfig.headerFactory(this.ids.headerContainerId,this.currentState),this.headerComponent.init(),this.headerComponent.hasSortable&&this.headerComponent.sort$.pipe(R(this.destroyEvent)).subscribe((function(e){return t.sort(e)})))},e.prototype.initFileActions=function(){var t=this;this.serviceProvider.inputService.onFilesDrop$.pipe(R(this.destroyEvent)).subscribe((function(e){var r=t.serviceProvider.localPickerService;r.isLocked()?console.error("picker in progress"):r.readFiles(e).pipe(R(t.destroyEvent),Yt((function(e){var n=jo(t.viewItems.map((function(t){return t.storedFile.size})));return r.handleFiles(e,n,t.viewItems.length)}))).subscribe((function(e){var r=function(){e.readyFiles.length&&(t.addFilesToWorkStore(e.readyFiles),t.onFilesEnter(e.readyFiles,!0))};e.error?t.serviceProvider.errorDialogService.handleError(e,r,!0):r()}))}))},e.prototype.onFilesEnter=function(t,e){var r=this;if(void 0===e&&(e=!1),t&&t.length){this.options.loadDisabled=!0,this.footerComponent.setRunJobDisabledState(this.options.loadDisabled);var n=this.viewItems.length||0,o=t.map((function(t){n++;var e=r.createPageItem(r.ids.viewerContainerId,t.guid);e.setViewModelOptions({imageUrl:void 0,name:t.name,totalPages:1,totalPagesLabel:"",useDelete:r.options.useDelete}),e.init(),e.setRenderingState(!0);var o=r.serviceProvider.viewerService.getMinMaxItemValue(),i={component:e,fileId:t.guid,storedFile:t,rendered:!1,locked:!1,workFile:r.serviceProvider.fileConverterService.storeToWork(t),currentSize:void 0,documentSize:void 0,maxSize:o.max,destroy$:e.getOnDestroy$(),subscribed:!1,viewOrder:n,waitPassword:!1};r.viewItems.push(i);var s=r.viewItems.length;return i.workFile.order=s,e.setPageNumber(s),e.setZoomBtnVisibleState(r.options.useZoom),e.setRotateVisibleState(r.options.useRotate),e.setPageNumberVisibleState(r.options.showPageNumber),e.setDeleteBtnVisible(r.options.useDelete),e.setPageBoxVisibleState(!1),r.initPageItem$(i)})),i=this.serviceProvider.fileTransferService,s=i.hasFilesForDownload(t);mo(o).pipe(R(this.destroyEvent)).subscribe((function(){if(r.options.loadDisabled=!1,r.footerComponent.setRunJobDisabledState(r.options.loadDisabled),r.serviceProvider.viewerService.onFilesUpdated(r.viewItems),e){var n=i.hasFilesForDownload(t);if(s&&!n)r.uploadOnLoaded(t);else if(s&&n)throw new Error("Logic error")}})),e&&!s?this.uploadOnLoaded(t):console.info("hasFilesForDownload",{hasFilesForDownload:s}),this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component})))}},e.prototype.uploadOnLoaded=function(t){var e=this.serviceProvider.toolsConfigService.getConfigModel(),r=this.serviceProvider.fileTransferService.upload(t,e);this.trans.push({files:t.map((function(t){return t.guid})),tranId:r})},e.prototype.createPageItem=function(t,e){return new tn(t,e)},e.prototype.initPageItem$=function(t){if(!t.subscribed)return this.subscribePageItem(t),t.workFile.fileType===xt.pdf?this.renderPdfFactory$(t):this.serviceProvider.toolsConfigService.useIconForPagePreview(t.storedFile.ext)?this.renderDocument$(t).pipe(Yt((function(){return t}))):this.renderImage$(t).pipe(Yt((function(){return t})))},e.prototype.getViewPortBySize=function(t,e,r){var n=this.serviceProvider.pdfService.getViewPortInfo(e,r);return t.documentSize=n.documentSize,t.currentSize=n.currentSize,n.viewport},e.prototype.renderPdf$=function(t){var e=this;return this.waitBlobUrl$(t.storedFile,t.destroy$).pipe(tr((function(){return e.serviceProvider.pdfService.getFirstPageInfo({url:t.storedFile.blobUrl,password:t.workFile.readPassword||t.storedFile.password||void 0}).pipe(R(e.destroyEvent),R(t.destroy$),tr((function(r){t.pdfPage=r.page,t.totalPages=r.doc.numPages||0,t.component.setTotalPages(r.doc.numPages);var n=e.getViewPortBySize(t,r.page,t.maxSize),o=e.$workCanvas.get(0);if(!o)return Qe(null).pipe(Lt(1));var i=o.getContext("2d");i.clearRect(0,0,o.width,o.height),o.width=n.width,o.height=n.height;var s=$("<canvas>").get(0);s.width=n.width,s.height=n.height;var a={canvasContext:s.getContext("2d"),viewport:n,intent:"print"};return e.serviceProvider.pdfService.createImageUrl(r.page,a,i,s).pipe(R(e.destroyEvent),R(t.destroy$),Lt(1),tr((function(r){return t.component.setImage(r,n.width,n.height),e.options.useZoom,Qe(!0).pipe(Lt(1))})),ti((function(){t.component.setRenderingState(!1),t.component.setPageBoxVisibleState(e.options.usePageBox),t.rendered=!0})))})),G((function(t){return!!t})))})),Yt((function(){return!0})))},e.prototype.renderPdfFactory$=function(t){var e=this;return this.renderPdf$(t).pipe(Lt(1),Go((function(r){return e.isPasswordError(r)?(t.locked=!0,t.component.setRenderingState(!1),t.component.setLockedState(!0),t.waitPassword=!0,e.toolConfig.requirePdfPassword?e.readPassword(t,!0).pipe(R(e.destroyEvent),Lt(1),Yt((function(){return t}))):Qe(null)):(console.warn("renderPdf:error",{e:r}),un(r))})),Yt((function(r){return r&&(t.waitPassword=!1,e.serviceProvider.viewerService.onViewItemRendered(t)),t})))},e.prototype.renderImage$=function(t){var e=this;return t.component.setPageBoxVisibleState(!1),this.options.useZoom&&t.component.setZoomBtnVisibleState(this.serviceProvider.toolsConfigService.showZoomUi(t.storedFile.ext)),this.waitBlobUrl$(t.storedFile,t.destroy$).pipe(tr((function(){return e.serviceProvider.fileRenderService.renderImage$(t.storedFile.blobUrl,t.maxSize).pipe(R(e.destroyEvent),R(t.destroy$),Lt(1),Yt((function(r){t.documentSize=r.documentSize,t.currentSize=r.currentSize,t.zoomImageInfo=Object.assign(t.zoomImageInfo||{},{url:r.blobUrl,dimensions:{height:t.documentSize.height,width:t.documentSize.width}},{angle:e.getAngle(t)}),t.component.setImage(r.blobUrl,t.currentSize.width,t.currentSize.height),t.component.setRenderingState(!1),t.rendered=!0})))})))},e.prototype.renderDocument$=function(t){var e=this;return t.component.setPageBoxVisibleState(!1),t.component.setRotateVisibleState(!1),t.component.setZoomBtnVisibleState(!1),this.waitBlobUrl$(t.storedFile,t.destroy$).pipe(Yt((function(){var r=e.serviceProvider.viewerService;t.documentSize=null;var n=r.getMinMaxItemValue();t.currentSize={height:n.max,width:n.min};var o=qt.getToolIcon(t.storedFile.ext);t.component.setImageAsSvg(o,t.currentSize.width,t.currentSize.height),t.rendered=!0,t.component.setRenderingState(!1)})))},e.prototype.onDelete=function(t){var e=Li(this.viewItems,(function(e){return e.fileId===t}));e&&e.component.destroyComponent(),this.updateViewCounters(this.viewItems);var r=this.trans.find((function(e){return e.files.find((function(e){return e===t}))}));r&&(Li(r.files,(function(e){return e===t})),this.viewItems.length||(this.headerComponent&&this.headerComponent.startOver instanceof Function?this.headerComponent.startOver():this.currentState.gotTo(V.destroy))),this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component})))},e.prototype.subscribePageItem=function(t){var e=this;t.subscribed||(t.component.delete$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onDelete(t)})),t.component.zoom$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onZoom(t)})),t.component.lock$.pipe(R(this.destroyEvent)).subscribe((function(r){return Ys(e,void 0,void 0,(function(){return Xs(this,(function(e){switch(e.label){case 0:return t.fileId!==r?[3,2]:[4,this.onItemLocked(t)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})),t.component.rotate$.pipe(R(this.destroyEvent)).subscribe((function(r){if(r.itemId===t.fileId){var n=r.direction===Vr.left?-1:1,o=e.getAngle(t);o+=90*n,o%=360,t.workFile.options.angle=o,t.component.setRotateImage(o)}})),t.subscribed=!0)},e.prototype.sort=function(t){this.serviceProvider.sortableService.sortArray(this.viewItems,(function(t){return t.storedFile.name.toLocaleLowerCase()}),t===ne.asc),this.updateViewCounters(this.viewItems,!1),this.serviceProvider.sortableService.sortDomElementsBySortedItems(this.viewItems,(function(t){return t.fileId}),this.ids.viewerContainerId,".page-item")},e.prototype.initSortable=function(){var t=this;this.serviceProvider.sortableService.useSortable()&&this.serviceProvider.sortableService.initSortable$(this.helper.getById(this.ids.viewerContainerId),{sort:!0,onStart:function(e){t.serviceProvider.appService.setLockDropzoneState(!0)},onEnd:function(e){t.helper.getById(t.ids.viewerContainerId).find(".page-item").each((function(e,r){var n=t.viewItems.find((function(t){return t.fileId===r.id})),o=e+1;n.component.setPageNumber(o),n.viewOrder=o})),t.serviceProvider.appService.setLockDropzoneState(!1)}}).pipe(R(this.destroyEvent),G((function(t){return!!t}))).subscribe()},e.prototype.onItemLocked=function(t){return Ys(this,void 0,void 0,(function(){return Xs(this,(function(e){switch(e.label){case 0:return t.component.setLockedState(!0),t.locked=!0,[4,this.readPassword(t).toPromise()];case 1:return e.sent(),[2,!0]}}))}))},e.prototype.readPassword=function(t,e){var r=this;return void 0===e&&(e=!1),this.openPasswordDialog(t,(function(e){return new _((function(n){e?r.renderPdfFactory$(t).subscribe((function(t){t.waitPassword||(t.component.setLockedState(!1),t.locked=!1,r.onPasswordRed(t)),n.next(!t.waitPassword)})):n.next(!1)})).pipe(R(r.destroyEvent),Lt(1))})).pipe(G((function(e){if(e.closed&&e.state===pi.closed){if(r.toolConfig.requirePdfPassword)return r.onPasswordSkiped(t),!1;r.onPasswordClosed(t)}return e.closed})),Yt((function(){})))},e.prototype.onPasswordSkiped=function(t){this.currentState.gotTo(V.destroy)},e.prototype.onPasswordClosed=function(t){},e.prototype.onPasswordRed=function(t){},e}(Ks),na=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oa=r(482),ia=function(t){function e(e,r,n){var o=t.call(this,e,r,n)||this;return o.registrated=!1,o.cropOptions={mobile:{size:200},desktop:{size:358},current:{size:358},isMobile:null,renderLocked:!1,onRendered:null,css:{isMobile:"is-mobile",useFields:"use-fields"},minCropSpace:40,isInputSource:!1,mediaKey:"cropMobileMax"},o.form={valid:!0,pending:!1,bottom:0,left:0,right:0,top:0},o.media={x:1159.99,y:659.99,queries:Object.create(null)},o.initMedia(),o}return na(e,t),Object.defineProperty(e.prototype,"$image",{get:function(){return this.helper.getById(this.ids.imageId)},enumerable:!0,configurable:!0}),e.prototype.destroyComponent=function(){this.itemData=null,this.Cropper=null,this.cropper&&(this.cropper.destroy(),this.cropper=null),this.registrated=!1,t.prototype.destroyComponent.call(this)},e.prototype.registrateCropEvents=function(t,e){if(!e)throw new Error("!cropperLib");this.registrated||(this.Cropper=e,this.itemData=t,this.initCropper())},e.prototype.getDesktopSize=function(){return this.cropOptions.desktop.size},e.prototype.bind=function(){t.prototype.bind.call(this)},e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this)},e.prototype.getHtmlTemplate=function(){return oa},e.prototype.createInitModel=function(){var e=t.prototype.createInitModel.call(this);return e.formContainerTop=z.createQuickGuidAsString(),e.formContainerRight=z.createQuickGuidAsString(),e.formContainerBottom=z.createQuickGuidAsString(),e.formContainerLeft=z.createQuickGuidAsString(),e},e.prototype.bindActions=function(){var t=this,e=function(t,e){return t.isDefaultPrevented()||(t.preventDefault(),e()),!1};this.helper.getById(this.ids.btnUnlockId).on("click",(function(r){return e(r,(function(){return t.onUnlock()}))})),this.$component.on("click",(function(r){return e(r,(function(){return t.onUnlock()}))}))},e.prototype.onDelete=function(){},e.prototype.onZoom=function(){},e.prototype.onRotate=function(t){},e.prototype.onClick=function(){},e.prototype.fixModel=function(t,e,r,n,o){var i=!1;(!(r=+r)||r<0)&&(r=0),t[e]=r;var s=this.cropOptions.minCropSpace/o;switch(e){case"left":var a=n.width-s-t.right;r>a&&(t[e]=a,i=!0);break;case"top":var c=n.height-s-t.bottom;r>c&&(t[e]=c,i=!0);break;case"right":var u=n.width-s-t.left;r>u&&(t[e]=u,i=!0);break;case"bottom":var p=n.height-s-t.top;r>p&&(t[e]=p,i=!0)}return i},e.prototype.initCropper=function(t){var e=this;void 0===t&&(t=!0),this.cropper&&(this.cropper.destroy(),this.cropper=null);var r=this.cropOptions.minCropSpace,n=this.getViewDocumentSize(),o={left:0,top:0,right:0,bottom:0},i=!1;return this.cropper=new this.Cropper(this.$image.get(0),{rotatable:!1,scalable:!1,zoomable:!1,zoomOnTouch:!1,zoomOnWheel:!1,cropBoxMovable:!0,autoCrop:!1,background:!1,minCropBoxWidth:r,minCropBoxHeight:r,autoCropArea:1,viewMode:3,restore:!1,minCanvasWidth:n.width,minCanvasHeight:n.height,minContainerWidth:n.width,minContainerHeight:n.height,ready:function(){var t=e.getViewDocumentSize();e.cropper.setData({x:0,y:0,width:t.width,height:t.height,rotate:0,scaleX:1,scaleY:1}),e.cropper.crop()},crop:function(){var t=e.cropper.getCanvasData(),r=t.width/t.naturalWidth,n=e.cropper.getData(!1);n.x*=r,n.y*=r,n.width*=r,n.height*=r;var s=e.getRawDocumentSize(),a=e.getDocumentScale(),c=e.scaleCropEvent(n,1/a);if(i||(o.left=c.x,o.top=c.y,o.right=s.width-c.x-c.width,o.bottom=s.height-c.y-c.height,i=!0),!e.cropOptions.isInputSource){var u={left:c.x-o.left,top:c.y-o.top,right:s.width-c.x-c.width-o.right,bottom:s.height-c.y-c.height-o.bottom},p=Object.create(null);Object.keys(u).forEach((function(t){return e.fixModel(p,t,u[t],s,a)}));var l=e.roundOffset(p);e.updateModel(l)}}}),t&&this.serviceProvider.mediaService.change$.pipe(R(this.destroyEvent)).subscribe((function(t){if(t&&t.data&&t.data.key===e.cropOptions.mediaKey){var r=e.getViewMediaOptions();e.toggleMobileOptions(r.isMobile);var n=e.serviceProvider.pdfService.getViewPortInfo(e.itemData.pdfPage,e.cropOptions.current.size),o={width:Math.round(n.currentSize.width),height:Math.round(n.currentSize.height)};e.itemData.currentSize=o,e.helper.setImageSize(e.$image,o),e.initCropper(!1)}})),this.cropper},e.prototype.getViewDocumentSize=function(){var t=this.itemData.currentSize;return{width:Math.floor(t.width),height:Math.floor(t.height)}},e.prototype.getRawDocumentSize=function(){var t=this.itemData.documentSize;return{width:Math.floor(t.width),height:Math.floor(t.height)}},e.prototype.getDocumentScale=function(){return this.itemData.currentSize.width/this.itemData.documentSize.width},e.prototype.roundOffset=function(t){return{top:Math.round(t.top),right:Math.round(t.right),bottom:Math.round(t.bottom),left:Math.round(t.left)}},e.prototype.scaleCropEvent=function(t,e){return{x:t.x*e,y:t.y*e,width:t.width*e,height:t.height*e}},e.prototype.updateModel=function(t){Object.assign(this.form||(this.form=Object.create(null)),t),this.serviceProvider.toolsConfigService.setFormValue(this.form)},e.prototype.getViewMediaOptions=function(){var t=this.media.queries,e=t.maxWidth,r=t.maxHeight,n=this.serviceProvider.mediaService.queryHelper,o=n.matchMedia(e),i=n.matchMedia(r);return{hIsMobile:i,wIsMobile:o,isMobile:o||i,useFields:!o}},e.prototype.toggleMobileOptions=function(t){var e=this.cropOptions;e.isMobile=t,e.current.size=t?e.mobile.size:e.desktop.size,this.$component.toggleClass(e.css.isMobile,e.isMobile)},e.prototype.initMedia=function(){var t=this.serviceProvider.mediaService,e=t.queryHelper,r=e.maxWidth(this.media.x),n=e.maxHeight(this.media.y);this.media.queries={maxWidth:r,maxHeight:n};var o=[r,n],i=this.getViewMediaOptions();this.toggleMobileOptions(i.isMobile);var s=o.join(",");t.addCustomMedia(s,this.cropOptions.mediaKey,{x:this.media.x,y:this.media.y})},e}(tn),sa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aa=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},ca=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ua=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.hasFile=!1,n.lib=n.initCropperLib(),n}return sa(e,t),e.prototype.init=function(){if(!this.entryOptions)throw new Error("!this.entryOptions");this.toolConfig=this.serviceProvider.toolsConfigService.getToolConfig(),this.initBase()&&(this.trans.push({files:this.entryOptions.items.map((function(t){return t.guid})),tranId:this.entryOptions.initUploadTransactionId}),this.options.useZoom=!1,this.options.usePageBox=!1,this.options.useRotate=!1,this.options.showPageNumber=!1,this.onFilesEnter(this.entryOptions.items))},e.prototype.onFilesEnter=function(e){this.hasFile||e&&e.length&&(t.prototype.onFilesEnter.call(this,[e[0]]),this.hasFile=!0)},e.prototype.createPageItem=function(t,e){return new ia(t,e)},e.prototype.initPageItem$=function(t){var e=this;if(!t.subscribed){if(t.workFile.fileType!==xt.pdf)throw new Error("item.workFile.fileType !== FileType.pdf");return this.subscribePageItem(t),this.serviceProvider.viewerService.viewItemReady$.pipe(R(this.destroyEvent),R(t.destroy$),G((function(e){return e.fileId===t.fileId}))).subscribe((function(){e.lib.then((function(){t.component.registrateCropEvents(t,e.Cropper)}))})),this.renderPdfFactory$(t).pipe(Yt((function(t){return t})))}},e.prototype.subscribePageItem=function(t){var e=this;t.component.lock$.pipe(R(this.destroyEvent)).subscribe((function(r){return aa(e,void 0,void 0,(function(){return ca(this,(function(e){switch(e.label){case 0:return t.fileId!==r?[3,2]:[4,this.onItemLocked(t)];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},e.prototype.getViewPortBySize=function(t,e,r){var n=t.component.getDesktopSize(),o=this.serviceProvider.pdfService.getViewPortInfo(e,n);return t.documentSize=o.documentSize,t.currentSize=o.currentSize,o.viewport},e.prototype.initCropperLib=function(){return aa(this,void 0,void 0,(function(){var t,e,r,n,o,i,s;return ca(this,(function(a){switch(a.label){case 0:if(!(t=this.toolConfig).advancedLibs||!t.advancedLibs.length)throw new Error("!cfg.advancedLibs || !cfg.advancedLibs.length");return"Cropper","CropperCss",e=t.advancedLibs.find((function(t){return"Cropper"===t.name})),r=t.advancedLibs.find((function(t){return"CropperCss"===t.name})),n=this.serviceProvider.scriptLoaderService,o=n.hasLib("Cropper"),i=n.hasLib("CropperCss"),o||n.addScript({src:e.defaultPath,windowName:"Cropper"}),i||n.addScript({src:r.defaultPath,windowName:"CropperCss",isCss:!0}),[4,n.loadChain(["Cropper","CropperCss"])];case 1:return s=a.sent(),this.Cropper=s[0],[2,!0]}}))}))},e}(ra),pa=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},la=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(pa(arguments[e]));return t},fa=function(){function t(){}return t.getRelatedExtensions=function(t){var e=this.getRelatedArr(t)||[];return la(e)},t.getTool=function(t,e){var r=this.getGroupExt(t);return this.getToolByExt(r,e)},t.getGroupExt=function(t){if(!t||!t.length)throw new Error("!from || !from.length");var e=t[0],r=this.getRelatedArr(e);switch(!0){case this.map.pdf===r:return dt.pdf;case this.map.image===r:return dt.jpg;case this.map.docs===r:return dt.doc;case this.map.excl===r:return dt.xlsx;case this.map.pp===r:return dt.ppt;case this.map.text===r:return dt.txt;case this.map.chm===r:return dt.chm;case this.map.xml===r:return dt.xml;case this.map.html===r:return dt.html;case this.map.books===r:return dt.epub;case this.map.booksDjv===r:return dt.djv;default:throw new Error("getGroupExt: Not supported Ext")}},t.isImage=function(t){switch(t){case dt.png:case dt.jpg:case dt.jpeg:case dt.bmp:case dt.tif:case dt.tiff:case dt.gif:return!0}return!1},t.getToolByExt=function(t,e){if(t===dt.pdf)switch(e){case dt.png:return vt.pdfToPng;case dt.jpg:case dt.jpeg:return vt.pdfToJpg;case dt.bmp:return vt.pdfToBmp;case dt.tif:case dt.tiff:return vt.pdfToTiff;case dt.doc:case dt.odt:case dt.rtf:return vt.pdfToWord;case dt.docx:return vt.pdfToDocx;case dt.xlsx:case dt.xls:case dt.xlt:case dt.xla:throw new Error("getToolByExt: "+e+" not supported ex.");case dt.pptx:case dt.ppt:throw new Error("getToolByExt: "+e+" not supported ex.");case dt.epub:case dt.djvu:case dt.djv:case dt.mobi:case dt.fb2:throw new Error("getToolByExt: "+e+" not supported ex.");case dt.txt:case dt.xml:case dt.html:case dt.chm:throw new Error("getToolByExt: "+e+" not supported ex.");default:throw new Error("getToolByExt: from:"+t+",to:"+e+" not supported ex.")}else{if(e!==dt.pdf)throw new Error("getToolByExt:  not supported tool from:"+t+",to:"+e);switch(t){case dt.png:return vt.pngToPdf;case dt.jpg:case dt.jpeg:return vt.jpgToPdf;case dt.bmp:return vt.bmpToPdf;case dt.tif:case dt.tiff:return vt.tiffToPdf;case dt.odt:return vt.odtToPdf;case dt.rtf:return vt.rtfToPdf;case dt.doc:return vt.wordToPdf;case dt.docx:return vt.docxToPdf;case dt.xlsx:case dt.xls:case dt.xlt:case dt.xla:return vt.excelToPdf;case dt.pptx:case dt.ppt:return vt.pptToPdf;case dt.epub:return vt.epubToPdf;case dt.djvu:case dt.djv:return vt.djvuToPdf;case dt.mobi:return vt.mobiToPdf;case dt.fb2:return vt.fb2ToPdf;case dt.txt:return vt.txtToPdf;case dt.xml:return vt.xmlToPdf;case dt.html:case dt.htm:return vt.htmlToPdf;case dt.chm:return vt.chmToPdf;default:throw new Error("getToolByExt: from:"+t+",to:"+e+" not supported ex.")}}},t.getRelatedArr=function(t){var e=this;return Object.keys(this.map).map((function(t){return e.map[t]})).find((function(e){return e.indexOf(t)>-1}))},t.map={pdf:[dt.pdf],image:[dt.png,dt.jpg,dt.jpeg,dt.bmp,dt.tiff,dt.tif,dt.jfif,dt.gif],docs:[dt.docx,dt.doc,dt.odt,dt.rtf],excl:[dt.ods,dt.xlsx,dt.xls,dt.xlt,dt.xla],pp:[dt.ppt,dt.pptx],text:[dt.txt],chm:[dt.chm],xml:[dt.xml],html:[dt.html,dt.htm],books:[dt.epub,dt.mobi,dt.fb2],booksDjv:[dt.djvu,dt.djv]},t}(),da=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ha=r(483),va=function(t){function e(e,r){var n=t.call(this,e,{popover:function(t){return new se(t)}})||this;return n.options=r,n.btnNextKey="next",n.ids.btnNextId=z.createQuickGuidAsString(),n.ids.btnToDocId=z.createQuickGuidAsString(),n.ids.btnToDocXId=z.createQuickGuidAsString(),n.ids.btnToJpgId=z.createQuickGuidAsString(),n.next=new O,n}return da(e,t),Object.defineProperty(e.prototype,"next$",{get:function(){return this.next.asObservable().pipe(R(this.destroyEvent))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$btnRunJob",{get:function(){return this.$btnNext},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$actionContainer",{get:function(){return this.helper.getById(this.ids.formContainerId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$btnNext",{get:function(){return this.helper.getById(this.ids.btnNextId)},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.options.from.find((function(t){return t===dt.pdf}))?(this.isPdfToDirection=!0,this.initPdfTo()):(this.isPdfToDirection=!1,this.initToPdf())},e.prototype.isPdfTo=function(){return this.isPdfToDirection},e.prototype.setRunJobDisabledState=function(t,e){void 0===e&&(e=!0)},e.prototype.setFilesCount=function(t,e){},e.prototype.setPdfControlsDisabledState=function(t){var e=this;[this.ids.btnToDocId,this.ids.btnToDocXId,this.ids.btnToJpgId].forEach((function(r){var n=e.helper.getById(r);e.helper.toggleDisabled(n,t)}))},e.prototype.getDefaultLabelKey=function(){return this.btnNextKey},e.prototype.createLabelKey=function(t){return this.btnNextKey},e.prototype.setDisableState=function(t){this.helper.toggleDisabled(this.helper.getById(this.ids.btnNextId),t),this.popover.setDisabledState(t)},e.prototype.getFromExt=function(){return this.options.from},e.prototype.nextClick=function(){this.$btnNext.get(0).click()},e.prototype.createTemplate=function(){var t=this.setTemplateValuesByModel(ha,this.ids),e=this.serviceProvider.Translate,r=function(t,r){return e.has(t)?e.get(t):r};return t=this.setTemplateValuesByModel(t,{btnToDoc:r("converter-btn-to-doc","To Doc"),btnToDocX:r("converter-btn-to-docx","To DocX"),btnToJpg:r("converter-btn-to-jpg","To JPG")})},e.prototype.onPopoverInit=function(){},e.prototype.getLabelKey=function(t){return this.btnNextKey},e.prototype.initPdfTo=function(){var t=this;this.$actionContainer.removeClass(this.helper.css.displayNone);var e=function(e){return function(){t.$actionContainer.addClass(t.helper.css.displayNone),t.bindNext(e),t.nextClick()}};this.bindBtn(this.ids.btnToDocId,e(dt.doc)),this.bindBtn(this.ids.btnToDocXId,e(dt.docx)),this.bindBtn(this.ids.btnToJpgId,e(dt.jpg)),this.serviceProvider.inputService.setAccept(this.extToAccept([dt.pdf]))},e.prototype.initToPdf=function(){var t=this;this.bindNext(dt.pdf);var e=this.options.from,r=this.extToAccept(e);this.serviceProvider.inputService.setAccept(r),setTimeout((function(){t.nextClick()}))},e.prototype.bindNext=function(t){var e=this;this.bindBtn(this.ids.btnNextId,(function(){e.next.next({from:e.options.from,to:t})}))},e.prototype.bindBtn=function(t,e){var r=this;re(this.helper.getById(t).get(0),"click").pipe(R(this.destroyEvent)).subscribe((function(n){return n.defaultPrevented||r.helper.isDisabled(r.helper.getById(t))||(n.preventDefault(),e()),!1}))},e.prototype.extToAccept=function(t){var e=this;return t.map((function(t){return e.serviceProvider.fileMetaDataService.getMimeTypeByExtension(t)+",."+t})).join(",")},e}(ce);!function(t){t.sourceIsEmpty="sourceIsEmpty",t.fileListIsEmpty="fileListIsEmpty",t.uniqueListIsEmpty="uniqueListIsEmpty",t.relatedIsEmpty="relatedIsEmpty",t.notPermittedItems="notPermittedItems"}(Us||(Us={}));var ya,ma=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},ba=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ma(arguments[e]));return t},wa=function(){function t(t){this.items=t}return t.prototype.init=function(){if(this.items.length){if(!this.fileExtensions){var t=this.getExtensionsFromFile(this.items);if(!t.length)return void(this.extensionsError=Us.fileListIsEmpty);this.fileExtensions=this.getUniqueExtensions(t)}this.fileExtensions.length?(this.relatedExtensions||(this.relatedExtensions=this.getRelatedExtensions(this.fileExtensions)),this.relatedExtensions.length?(this.notPermittedItems||(this.notPermittedItems=this.getNotPermittedItems(this.fileExtensions,this.relatedExtensions)),this.notPermittedItems.length&&(this.extensionsError=Us.notPermittedItems)):this.extensionsError=Us.relatedIsEmpty):this.extensionsError=Us.uniqueListIsEmpty}else this.extensionsError=Us.sourceIsEmpty},t.prototype.handleError=function(t){switch(console.error("Extensions:error",{err:t,this:this}),t){case Us.fileListIsEmpty:alert("ExtensionsError.fileListIsEmpty");break;case Us.uniqueListIsEmpty:case Us.relatedIsEmpty:alert("ExtensionsError.uniqueListIsEmpty")}},t.prototype.hasError=function(){return!!this.extensionsError},t.prototype.getError=function(){return this.extensionsError},t.prototype.clean=function(){this.fileExtensions=null,this.relatedExtensions=null,this.notPermittedItems=null,this.extensionsError=null,this.items=null},t.prototype.getExtensionsFromFile=function(t){return t.map((function(t){return t.ext})).filter((function(t){return!!t}))},t.prototype.getUniqueExtensions=function(t){return ba(new Set(t))},t.prototype.getRelatedExtensions=function(t){return fa.getRelatedExtensions(t[0])},t.prototype.getNotPermittedItems=function(t,e){return t.filter((function(t){return!e.includes(t)}))},t}(),_a=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sa=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.converterCss={pending:"pending"},n.pendingView=new cs(n.parentId),n}return _a(e,t),e.prototype.appendTemplate=function(){var e=this;this.$parent.addClass(this.converterCss.pending),t.prototype.appendTemplate.call(this),this.pendingView.init(),this.getOnDestroy$().pipe(Lt(1)).subscribe((function(){e.pendingView&&e.pendingView.destroyComponent()}))},e.prototype.initFooter=function(){var t=this,e=new wa(this.entryOptions.items);if(e.init(),e.hasError())return e.handleError(e.getError()),e.getError()===Us.notPermittedItems&&this.onNotPermittedItems(e),e.clean(),void this.currentState.gotTo(V.destroy);this.footerComponent=new va(this.ids.footerContainerId,{from:e.relatedExtensions}),this.footerComponent.init(),this.serviceProvider.pickerHandlerService.subscribeDefault(this.destroyEvent),this.footerComponent.next$.pipe(R(this.destroyEvent),Lt(1)).subscribe((function(e){t.footerComponent.setDisableState(!0),t.serviceProvider.appService.setLockDropzoneState(!0);var r=fa.getTool(e.from,e.to);t.onNext(r)})),this.footerComponent.isPdfTo()&&this.pendingView&&(this.$parent.removeClass(this.converterCss.pending),this.pendingView.destroyComponent(),this.pendingView=null)},e.prototype.onFilesEnter=function(e,r){void 0===r&&(r=!1);var n=new wa(e),o=this.footerComponent.getFromExt();if(n.relatedExtensions=o,n.init(),n.hasError()){var i=n.getError();return n.handleError(i),i===Us.notPermittedItems&&this.onNotPermittedItems(n),void n.clean()}t.prototype.onFilesEnter.call(this,e,r)},e.prototype.onPasswordClosed=function(t){t.component.deleteItem()},e.prototype.onPasswordRed=function(t){this.footerComponent.isPdfTo()&&this.viewItems.every((function(t){return!t.locked}))&&this.footerComponent.setPdfControlsDisabledState(!1)},e.prototype.renderPdfFactory$=function(e){var r=this;return t.prototype.renderPdfFactory$.call(this,e).pipe(Yt((function(t){return r.footerComponent.isPdfTo()&&t.locked&&r.footerComponent.setPdfControlsDisabledState(!0),t})))},e.prototype.uploadOnLoaded=function(t){},e.prototype.onNext=function(t){var e=this,r=this.viewItems.map((function(t){var e=t.workFile.blob;return e.password=t.workFile.readPassword,e})),n=this.viewItems.map((function(t){return t.storedFile})),o=function(){e.serviceProvider.appService.onStartOver(e.currentState)};this.serviceProvider.appService.geConfig$(t).subscribe((function(t){var i=e.serviceProvider.localPickerService,s=jo(n.map((function(t){return t.size}))),a=i.handleFiles({files:n,isStoreFilesArray:!0},s,0,t);if(a.error)e.serviceProvider.errorDialogService.handleError(a,(function(){return o()}),!0,t);else{t.fromConverter=!0;var c=e.serviceProvider.appService.deps;e.currentState.gotTo(V.destroy),e.serviceProvider.appService.getApp().rebuild(t,c);var u=e.serviceProvider.toolsConfigService.getToolConfig();t.maxFilesCount>1&&u.viewerType===ht.instant&&(u.viewerType=ht.file),e.serviceProvider.inputService.dropFiles(r)}}),(function(t){e.serviceProvider.errorDialogService.open({body:"GetConfig: Error",title:"GetConfig: Error",okCallback:function(){return o()}})}))},e.prototype.onNotPermittedItems=function(t){var e=t.relatedExtensions.join(", ").toUpperCase(),r=t.notPermittedItems.join(", ");this.serviceProvider.errorDialogService.showFormatError(e,r,!0).subscribe(),this.serviceProvider.appService.onStartOver(this.currentState)},e}(ra),Pa=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xa=function(t){function e(e,r){return t.call(this,e,r)||this}return Pa(e,t),e.prototype.onRunJob=function(){this.onRunJobReady()},e}(ra),Ca=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oa=function(t){function e(e,r){var n=t.call(this,e,V.fileViewer)||this;if(!r)throw new Error("!inputData");if(!r.data.isViewerOptions)throw new Error("is not isViewerOptions");switch(n.options=r.data,n.serviceProvider.toolsConfigService.getToolConfig().viewerType){case ht.fileCrop:n.view=new ua(n.componentId,n);break;case ht.fileConverter:n.view=new Sa(n.componentId,n);break;case ht.fileUnlock:n.view=new xa(n.componentId,n);break;default:n.view=new ra(n.componentId,n)}return n}return Ca(e,t),Object.defineProperty(e.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){t.prototype.bindEvents.call(this),this.view.entryOptions=this.options,this.view.init()},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),Ia=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ea=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},ka=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ta=r(484),ja=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.initialized=!1,n.waitRender=!1,n.scrollLocked=!1,n.waitScroll=!0,n.maxPerPagePages=100,n.serviceProvider.pdfService.getPdfLib(),n.pendingView=new cs(n.parentId),n.onItemsRendered=new O,n}return Ia(e,t),Object.defineProperty(e.prototype,"onItemsRendered$",{get:function(){return this.onItemsRendered.pipe(R(this.destroyEvent),Lt(1))},enumerable:!0,configurable:!0}),e.prototype.init=function(){if(!this.entryOptions)throw new Error("!this.entryOptions");var e=this.serviceProvider.toolsConfigService;this.toolConfig=e.getToolConfig(),this.pendingView.init(),t.prototype.init.call(this),this.trans.push({files:this.entryOptions.items.map((function(t){return t.guid})),tranId:this.entryOptions.initUploadTransactionId}),this.options.useZoom=this.toolConfig.showZoomUi,this.options.showPageNumber=this.toolConfig.showOrderUi,this.options.usePageBox=e.showPageCounter(),this.options.useRotate=e.isRotatable(),this.options.useDelete=!this.toolConfig.hideDelete,this.onFilesEnter(this.entryOptions.items)},e.prototype.destroyComponent=function(){this.dropZoneComponent&&this.dropZoneComponent.destroyComponent(),this.headerComponent&&this.headerComponent.destroyComponent();var e=this.footerComponent;e&&e.destroyComponent(),t.prototype.destroyComponent.call(this)},e.prototype.createTemplate=function(){return this.setTemplateValuesByModel(Ta,this.ids)},e.prototype.bind=function(){var t=this;this.initHeader(),this.initFooter(),this.serviceProvider.viewerService.viewItemsChange$.pipe(R(this.destroyEvent),G((function(){return t.serviceProvider.mediaService.isMobile()})),fn(40)).subscribe((function(){var e=$(t.serviceProvider.domHelper.cssToSelector("app-state-root")),r=e.offset().top,n=e.width(),o=e.height(),i=document.documentElement.clientWidth,s=document.documentElement.clientHeight,a=(i-n)/2;if(r+o+a<=s){var c=s-r-a;e.addClass("app-state-root_calc-height"),setTimeout((function(){e.css("height",c)}))}else e.css("height",""),e.removeClass("app-state-root_calc-height")}))},e.prototype.onFilesEnter=function(t,e){return Ea(this,void 0,void 0,(function(){var e,r,n;return ka(this,(function(o){switch(o.label){case 0:if(!t||!t.length||this.initialized)return[2];if(t.length>1)throw new Error("files.length > 1: doesnt support");return this.options.loadDisabled=!0,e=t[0],r=this.serviceProvider.viewerService.getMinMaxItemValue(),this.document={component:null,fileId:e.guid,storedFile:e,rendered:!1,locked:!1,workFile:this.serviceProvider.fileConverterService.storeToWork(e),currentSize:void 0,documentSize:void 0,maxSize:r.max,destroy$:this.getOnDestroy$(),subscribed:!1,viewOrder:0,waitPassword:!1,pdfDocumentProxy:void 0},[4,this.waitBlobUrl$(this.document.storedFile,this.document.destroy$).toPromise()];case 1:return o.sent(),n=this.document,[4,this.getPdfDocument(this.document)];case 2:return n.pdfDocumentProxy=o.sent(),this.document.pdfDocumentProxy?(this.document.totalPages=this.document.pdfDocumentProxy.numPages,this.onDocumentRead(),[2]):(this.currentState.gotTo(V.destroy),[2])}}))}))},e.prototype.initFooter=function(){var t=this,e=this.serviceProvider.toolsConfigService.getToolConfig();e.footerFactory&&(this.footerComponent=e.footerFactory(this.ids.footerContainerId,this.currentState),this.footerComponent.init(),this.footerComponent.setRunJobDisabledState(!0),this.footerComponent.runJob$.pipe(R(this.destroyEvent)).subscribe((function(){if(t.initialized){t.helper.scrollMoreThan(350)&&t.helper.scrollToStart(),t.onBeforeRunJob();var e=[t.document.fileId],r=[t.document.workFile],n=t.serviceProvider.fileTransferService,o=n.progressEvent$.pipe(Yt((function(){return n.getStoredProgress(e)})));t.currentState.gotTo(V.uploadState,{sourceState:t.currentState.stateName,targetState:V.uploadState,data:t.serviceProvider.stateService.createProgressEventData(o)}),n.progressEvent$.pipe(Go((function(t){return un({status:Bo.errored,hasError:!0,data:t})})),G((function(t){return t.progress.completed}))).subscribe({error:function(e){if(!e||!e.hasError)throw new Error("!error || !error.hasError");t.currentState.gotTo(V.errorViewer,{targetState:V.errorViewer,sourceState:t.currentState.stateName,data:e})}}),o.pipe(G((function(t){return t.completed})),Lt(1)).subscribe((function(){var e=t.serviceProvider.stateService.createWorkFilesEventData(r);t.currentState.gotTo(V.runJobState,{sourceState:t.currentState.stateName,targetState:V.runJobState,data:e})}))}})))},e.prototype.onBeforeRunJob=function(){},e.prototype.initHeader=function(){this.toolConfig.headerFactory&&(this.headerComponent=this.toolConfig.headerFactory(this.ids.headerContainerId,this.currentState),this.onBeforeHeaderInit(),this.headerComponent.init())},e.prototype.initScroll=function(){var t=this;this.scroll$||(this.scroll$=re(document,"scroll").pipe(R(this.destroyEvent),yn((function(){return t.waitScroll})),G((function(){return t.waitRender})),ge((function(){return t.onScroll()}))))},e.prototype.onBeforeHeaderInit=function(){},e.prototype.onDocumentRead=function(){var t=this;this.viewItems=this.createPageItems(this.document.pdfDocumentProxy),this.viewItems.forEach((function(e){var r=e.component;r.init(),r.setRenderingState(!0),t.subscribePageItem(e),r.setPageNumber(e.initPageNumber),r.setPageNumberVisibleState(t.options.showPageNumber),r.setRotateVisibleState(t.options.useRotate),r.setZoomBtnVisibleState(t.options.useZoom),r.setDeleteBtnVisible(t.options.useDelete)})),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.waitRender=!0,this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component}))),this.scroll$.subscribe(),this.onScroll(),this.initialized=!0},e.prototype.getPdfDocument=function(t){return Ea(this,void 0,void 0,(function(){var e,r=this;return ka(this,(function(n){return[2,(e=function(e){return new _((function(n){Xe(r.serviceProvider.pdfService.getDocument({url:t.storedFile.blobUrl,password:e})).subscribe({next:function(e){t.waitPassword=!1,n.next({documentProxy:e,openDialog:!1})},error:function(e){r.isPasswordError(e)?(t.waitPassword=!0,t.locked=!0,n.next({documentProxy:null,openDialog:!0})):r.currentState.gotTo(V.destroy)}})})).pipe(R(r.destroyEvent),Lt(1))})("").pipe(tr((function(n){if(!n.openDialog&&n.documentProxy)return Qe(n.documentProxy);if(!n.openDialog&&!n.documentProxy)return Qe(null);return r.openPasswordDialog(t,(function(t){return e(t).pipe(Yt((function(t){return n.documentProxy=t.documentProxy,!!t.documentProxy})))})).pipe(Yt((function(t){switch(t.state){case pi.closed:return null;case pi.valid:return n.documentProxy}})))}))).toPromise()]}))}))},e.prototype.createPageItems=function(t){for(var e=[],r=t.numPages,n=this.document,o=0;o<r;o++){var i=o+1,s=this.createChildId(String(i),n.fileId),a=new tn(this.ids.viewerContainerId,s);a.setViewModelOptions({imageUrl:void 0,useDelete:this.options.useDelete});var c=this.serviceProvider.viewerService.getMinMaxItemValue(),u={component:a,fileId:s,storedFile:n.storedFile,rendered:!1,locked:!1,workFile:this.serviceProvider.fileConverterService.storeToWork(n.storedFile,o),currentSize:void 0,documentSize:void 0,maxSize:c.max,destroy$:a.getOnDestroy$(),subscribed:!1,viewOrder:i,waitPassword:!1,initPageNumber:i};e.push(u)}return e},e.prototype.subscribePageItem=function(t){var e=this;t.subscribed||(t.component.delete$.pipe(R(this.destroyEvent),R(t.destroy$)).subscribe((function(t){return e.onDelete(t)})),t.component.zoom$.pipe(R(this.destroyEvent),R(t.destroy$)).subscribe((function(t){return e.onZoom(t)})),t.component.rotate$.pipe(R(this.destroyEvent),R(t.destroy$)).subscribe((function(r){r.itemId===t.fileId&&e.onRotate(r,t)})),t.subscribed=!0)},e.prototype.onDelete=function(t){var e=Li(this.viewItems,(function(e){return e.fileId===t}));if(e&&e.component.destroyComponent(),this.updateViewCounters(this.viewItems),!this.viewItems.length){var r=this.document.fileId,n=this.trans.find((function(t){return t.files.find((function(t){return t===r}))}));n&&Li(n.files,(function(t){return t===r})),this.currentState.gotTo(V.destroy)}this.serviceProvider.viewerService.onViewItemsChange(this.viewItems.map((function(t){return t.component})))},e.prototype.onRotate=function(t,e){var r=0,n=this.getAngle(e);switch(t.direction){case Vr.left:r=-1;break;case Vr.right:r=1;break;case Vr.zero:r=0,n=0}n+=90*r,n%=360,e.workFile.options.angle=n,e.component.setRotateImage(n)},e.prototype.onScroll=function(){return Ea(this,void 0,void 0,(function(){var t;return ka(this,(function(e){switch(e.label){case 0:return this.scrollLocked||this.destroyed?[2,!1]:(this.scrollLocked=!0,(t=this.viewItems.find((function(t){return!t.rendered})))?[4,this.renderPdfPage(t)]:[3,2]);case 1:return e.sent()&&(this.scrollLocked=!1,this.onScroll()),[3,3];case 2:return this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.onItemsRendered.next(),[2,!1];case 3:return[2,!0]}}))}))},e.prototype.renderPdfPage=function(t){return Ea(this,void 0,void 0,(function(){var e,r,n,o,i,s,a,c;return ka(this,(function(u){switch(u.label){case 0:return t.rendered?[2,!0]:(t.component.setRenderingState(!0),[4,(e=this.serviceProvider.pdfService).getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)]);case 1:return r=u.sent(),t.pdfPage=r,n=this.serviceProvider.pdfService.getViewPortInfo(r,t.maxSize),o=n.viewport,t.documentSize=n.documentSize,t.currentSize=n.currentSize,(i=this.$workCanvas.get(0))?(i.getContext("2d").clearRect(0,0,i.width,i.height),i.width=o.width,i.height=o.height,s=$("<canvas/>"),(a=s.get(0)).width=o.width,a.height=o.height,c={canvasContext:a.getContext("2d"),viewport:o,intent:"print",enableWebGL:!0},[2,e.drawCanvas(r,c).toPromise().then((function(){return t.component.replaceImageWithCanvas(s,o.width,o.height),t.component.setRenderingState(!1),t.rendered=!0,r.cleanup(),!0}))]):[2,!1]}}))}))},e.prototype.destroyPending=function(){this.pendingView&&(this.pendingView.destroyComponent(),this.pendingView=null)},e}(Ks),Da=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Ma=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Da(arguments[e]));return t},Aa=function(){function t(t,e){var r=this;this.totalPages=t,this.pageItemsMap=new Map,this.pageInfoMap=new Map,this.pageNumbers=[],this.destroyed=!1,e&&e.forEach((function(t,e){r.pageItemsMap.set(e+1,t)}));for(var n=0;n<t;n++){var o=n+1;this.pageNumbers.push(o),this.pageInfoMap.set(o,{pageNumber:o,selected:!1})}}return t.prototype.destroy=function(){this.destroyed||(this.pageInfoMap.clear(),this.pageItemsMap.clear(),this.pageNumbers=null,this.destroyed=!0)},t.prototype.changeValueHandler=function(t){var e="";if(t&&(e=t),Hr.lastIsSeparator(e))throw new Error("lastIsSeparator");this.deselectAll();var r=Hr.parseValue(e);r&&r.length&&this.changePagesSelectedStatus(r,!0)},t.prototype.getOnClickedValue=function(t,e){this.onItemSelectedChange(t,e);var r=this.getSelectedPages()||[];return this.changePagesSelectedStatus(r,!0),Hr.pagesToValue(r)},t.prototype.selectAll=function(){this.changePagesSelectedStatus(this.pageNumbers,!0)},t.prototype.deselectAll=function(){this.changePagesSelectedStatus(this.getAllPages(),!1)},t.prototype.getAllPages=function(){return Ma(this.pageNumbers)},t.prototype.getAllPagesViewValue=function(){return Hr.createAllPagesValue(this.totalPages)},t.prototype.getSelectedPages=function(){var t=this;return this.pageNumbers.map((function(e){return t.pageInfoMap.get(e)})).filter((function(t){return t&&t.selected})).map((function(t){return t.pageNumber}))},t.prototype.setPages=function(t,e){var r=this;this.getAllPages().forEach((function(t){return r.onItemSelectedChange(t,!1)})),this.changePagesSelectedStatus(t,e)},t.prototype.changePagesSelectedStatus=function(t,e){var r=this;Ma(new Set(t)).forEach((function(t){return r.onItemSelectedChange(t,e)}))},t.prototype.onItemSelectedChange=function(t,e){var r=this.pageInfoMap.get(t);if(r){r.selected=e;var n=this.pageItemsMap.get(t);n&&n.component.setSelected(e)}},t}(),Fa=function(){function t(){}return t.prototype.setFrom=function(t,e){this.from=t,this.fromIsSelectMode=e},t.prototype.setTo=function(t,e){this.to=t,this.toIsSelectedMode=e},t.prototype.isLeft=function(){return this.from>this.to},t.prototype.isRight=function(){return this.from<this.to},t.prototype.isSame=function(){return this.from===this.to},t}(),La=function(){function t(t){void 0===t&&(t=2),this.maxLen=t,this.stack=[]}return t.prototype.add=function(t){for(this.stack.push(t);this.stack.length>this.maxLen;)this.stack.shift()},t.prototype.prev=function(){return this.stack.length?this.stack.length<this.maxLen?this.stack[this.stack.length-1]:this.stack[this.maxLen-2]:0},t.prototype.last=function(){return this.stack.length?this.stack[this.stack.length-1]:0},t.prototype.lastIsSameAs=function(t){return this.last()===t},t.prototype.isEmpty=function(){return!this.stack.length},t}(),Ra=function(){function t(t,e){this.destroy$=t,this.items=e,this.change=new O,this.stack=new La}return Object.defineProperty(t.prototype,"change$",{get:function(){return this.change.asObservable().pipe(R(this.destroy$))},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,e=re(document,"keydown").pipe(R(this.destroy$),G((function(t){return t.shiftKey})),ge((function(){t.shiftDown=!0}))),r=re(document,"keyup").pipe(R(this.destroy$),ge((function(){t.shiftDown=!1,t.range=null})));e.subscribe(),r.subscribe(),this.items.forEach((function(e){e.component.click$.pipe(R(e.destroy$),fn(1),Yt((function(e){t.stack.isEmpty()&&t.stack.add(0);var r=t.getIndex(e.itemId);t.stack.lastIsSameAs(r)||t.stack.add(r);var n=t.stack.prev(),o=t.stack.last();return t.range||(t.range=new Fa),t.range.setFrom(n,t.items[n].component.isSelected()),t.range.setTo(o,t.items[o].component.isSelected()),e})),G((function(){return t.shiftDown}))).subscribe((function(e){if(!t.range.isSame()){var r=!1;t.range.fromIsSelectMode&&t.range.toIsSelectedMode?r=!0:t.range.fromIsSelectMode&&!t.range.toIsSelectedMode?r=!1:!t.range.fromIsSelectMode&&t.range.toIsSelectedMode?r=!0:t.range.fromIsSelectMode||t.range.toIsSelectedMode||(r=!1);var n=Object.create(null);t.items.filter((function(t){return t.component.isSelected()})).forEach((function(t){return n[t.viewOrder]=!0}));var o,i=t.range,s=t.range.from+1,a=t.range.to+1;if(i.isRight())o=t.items.filter((function(t){return t.viewOrder>=s&&t.viewOrder<=a}));else{if(!i.isLeft())return void console.warn("shift +click:same",{range:t.range,items:o,src:t.items});o=t.items.filter((function(t){return t.viewOrder>=a&&t.viewOrder<=s}))}r?o.forEach((function(t){return n[t.viewOrder]=!0})):o.forEach((function(t){delete n[t.viewOrder]}));var c=Hr.objToPages(n);t.change.next(c)}}))}))},t.prototype.getIndex=function(t){return this.items.findIndex((function(e){return e.fileId===t}))},t}(),Va=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ba=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Na=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},$a=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.splitCss={ok:"icon--ok",iconDelete:"icon--delete"},n}return Va(e,t),Object.defineProperty(e.prototype,"formComponent",{get:function(){return this.footerComponent.getFormComponent()},enumerable:!0,configurable:!0}),e.prototype.destroyComponent=function(){this.pageHandler&&(this.pageHandler.destroy(),this.pageHandler=null),t.prototype.destroyComponent.call(this)},e.prototype.initScroll=function(){},e.prototype.onBeforeHeaderInit=function(){this.headerComponent.setService(this.serviceProvider.splitService)},e.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?this.initAsDocument():this.initAsPages()},e.prototype.subscribePageItem=function(t){var e=this;t.subscribed||(t.component.zoom$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onZoom(t)})),t.component.click$.pipe(R(this.destroyEvent)).subscribe((function(r){e.value.pages=e.pageHandler.getOnClickedValue(t.initPageNumber,r.isSelected),e.formComponent.setValue(e.value)})))},e.prototype.getInitValue=function(){return this.value={mode:St.single,pages:Hr.createAllPagesValue(this.document.totalPages),pending:!1,valid:!0},it.asJson(this.value)},e.prototype.initAsDocument=function(){return Ba(this,void 0,void 0,(function(){var t,e,r,n,o=this;return Na(this,(function(i){switch(i.label){case 0:return this.asDocument=!0,this.headerComponent.setToggleVisible(!1),t=this.document,this.serviceProvider.splitService.onDocumentRead(t.totalPages),e=t.storedFile.guid,(r=new tn(this.ids.viewerContainerId,e)).setViewModelOptions({imageUrl:void 0,useDelete:!1}),n=this.serviceProvider.viewerService.getMinMaxItemValue(),t.component=r,t.viewOrder=1,t.initPageNumber=1,t.maxSize=n.max,this.viewItems=[t],r.init(),r.setRenderingState(!0),r.zoom$.pipe(R(this.destroyEvent),R(t.destroy$)).subscribe((function(t){return o.onZoom(t)})),r.setTotalPages(t.totalPages),r.setPageBoxVisibleState(!0),r.setPageNumberVisibleState(!1),r.setRotateVisibleState(!1),r.setZoomBtnVisibleState(!0),r.setDeleteBtnVisible(!1),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.serviceProvider.viewerService.onViewItemsChange([r]),[4,this.renderDocument(t)];case 1:return i.sent(),this.formComponent.setTotalPages(t.totalPages),this.formComponent.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return o.formByDocumentChange(t)})),this.initialized=!0,this.formComponent.setAllPages(),[2]}}))}))},e.prototype.renderDocument=function(t){return Ba(this,void 0,void 0,(function(){var e,r,n,o;return Na(this,(function(i){switch(i.label){case 0:return t.rendered?[2,!0]:[4,this.serviceProvider.pdfService.getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)];case 1:return e=i.sent(),r=this.serviceProvider.pdfService.getViewPortInfo(e,t.maxSize),n=r.viewport,t.documentSize=r.documentSize,t.currentSize=r.currentSize,o=t,[4,this.renderZoom$(e,t.destroy$).toPromise()];case 2:return o.zoomImageInfo=i.sent(),t.component.setImage(t.zoomImageInfo.url,Math.round(n.width),Math.round(n.height)),t.component.setPageName(t.storedFile.name),t.rendered=!0,t.component.setRenderingState(!1),this.formComponent.setDisableState(!1),[2,!0]}}))}))},e.prototype.formByDocumentChange=function(t){if(this.formComponent.isDisabled())this.value=it.asJson(t);else{var e=this.value;if(e){if(this.changeRunJobLabel(t.mode),this.value=it.asJson(t),t.mode!==e.mode){if(e.mode===St.single)return void this.formComponent.resetPages();t.mode===St.single&&this.formComponent.setAllPages()}}else this.value=t}},e.prototype.initAsPages=function(){var e=this;this.asDocument=!1,this.headerComponent.setToggleVisible(!0),t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this),this.pageHandler=new Aa(this.document.totalPages,this.viewItems);var r=new Ra(this.getOnDestroy$(),this.viewItems);r.init(),r.change$.subscribe((function(t){var r=Hr.pagesToValue(t),n=it.asJson(e.value);n.pages=r,e.pageHandler.setPages(t,!0),e.formComponent.setValue(n)}));var n=this.formComponent;n.setTotalPages(this.document.totalPages),this.viewItems.forEach((function(t){return t.component.setIgnoreRenderingOnClick(!0)})),this.value=this.getInitValue(),n.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onPerPageFormChange(t)}));var o=this.serviceProvider.splitService;o.selectAllPagesChange$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onToggleAllChange(t)})),o.onDocumentRead(this.document.totalPages),n.setDisableState(!1),n.setValue(this.value),o.onSelectAllPagesChange(!0)},e.prototype.onToggleAllChange=function(t){var e=this.value;this.changeIcons(e.mode),this.viewItems.forEach((function(e){e.component.setSelected(t)})),t?(this.pageHandler.selectAll(),this.formComponent.setAllPages()):(this.pageHandler.deselectAll(),this.formComponent.resetPages())},e.prototype.onPerPageFormChange=function(t){if(this.formComponent.isDisabled())this.value=it.asJson(t);else{var e=this.value;e?(this.value=it.asJson(t),this.updateMode(t,e),this.updatePages(t,e),this.checkOrUpdateHeaderState()):this.value=t}},e.prototype.checkOrUpdateHeaderState=function(){var t=this.viewItems.map((function(t){return t.component.isSelected()})).every((function(t){return!!t})),e=this.headerComponent.isSelected();t?this.headerComponent.setSelectState(Fr.selectAll,!1):e&&!t&&this.headerComponent.setSelectState(Fr.deselectAll,!1)},e.prototype.updateMode=function(t,e){var r=this.toggleMode;if(this.isToggleModeChange(t.mode,r)&&(this.changeIcons(t.mode),this.changeRunJobLabel(t.mode),this.toggleMode=t.mode),t.mode!==e.mode){if(e.mode===St.single)return t.pages="",this.value=it.asJson(t),void this.formComponent.setValue(it.asJson(t));this.value=it.asJson(t);var n=this.serviceProvider.splitService;switch(t.mode){case St.single:n.onSelectAllPagesChange(!0);break;case St.deleteSelected:this.changeIcons(t.mode)}}},e.prototype.updatePages=function(t,e){t.pages!==e.pages&&(t.pages||this.headerComponent.setSelectState(Fr.deselectAll),Hr.lastIsSeparator(t.pages)||this.pageHandler.changeValueHandler(t.pages))},e.prototype.changeIcons=function(t){var e=this,r=this.getIconData(t);this.viewItems.forEach((function(t){t.component.setIcon(r.icon),t.component.toggleIconCss([e.splitCss.ok,e.splitCss.iconDelete],!1),t.component.toggleIconCss(r.css,!0)}))},e.prototype.isToggleModeChange=function(t,e){var r=St.deleteSelected;return!this.toggleMode||this.toggleMode!==t&&(t===r||this.toggleMode===r)},e.prototype.changeRunJobLabel=function(t){var e=this.footerComponent,r=e.getDefaultLabelKey();t===St.deleteSelected&&(r=e.createLabelKey(vt.deletePdf)),e.setBtnLabel(r,0)},e.prototype.getIconData=function(t){var e=qt.okGreen,r=this.splitCss,n=r.ok;return t===St.deleteSelected&&(e=qt.trash,n=r.iconDelete),{icon:e,css:n}},e}(ja),za=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ua=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},Ha=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Ga=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.deleteCss={iconDelete:"icon--delete"},n.value={pages:void 0,pending:!1,valid:!1},n}return za(e,t),Object.defineProperty(e.prototype,"formComponent",{get:function(){return this.footerComponent.getFormComponent()},enumerable:!0,configurable:!0}),e.prototype.destroyComponent=function(){this.pageHandler&&(this.pageHandler.destroy(),this.pageHandler=null),t.prototype.destroyComponent.call(this)},e.prototype.initScroll=function(){},e.prototype.onBeforeHeaderInit=function(){this.headerComponent.setService(this.serviceProvider.deletePagesService)},e.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?this.initAsDocument():this.initAsPages()},e.prototype.subscribePageItem=function(t){var e=this;t.subscribed||(t.component.zoom$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onZoom(t)})),t.component.click$.pipe(R(this.destroyEvent)).subscribe((function(r){e.value.pages=e.pageHandler.getOnClickedValue(t.initPageNumber,r.isSelected),e.formComponent.setValue(e.value)})))},e.prototype.initAsDocument=function(){return Ua(this,void 0,void 0,(function(){var t,e,r,n,o=this;return Ha(this,(function(i){switch(i.label){case 0:return this.asDocument=!0,this.headerComponent.setToggleVisible(!1),t=this.document,this.serviceProvider.deletePagesService.onDocumentRead(t.totalPages),e=t.storedFile.guid,(r=new tn(this.ids.viewerContainerId,e)).setViewModelOptions({imageUrl:void 0,useDelete:!1}),n=this.serviceProvider.viewerService.getMinMaxItemValue(),t.component=r,t.viewOrder=1,t.initPageNumber=1,t.maxSize=n.max,this.viewItems=[t],r.init(),r.setRenderingState(!0),r.zoom$.pipe(R(this.destroyEvent),R(t.destroy$)).subscribe((function(t){return o.onZoom(t)})),r.setTotalPages(t.totalPages),r.setPageBoxVisibleState(!0),r.setPageNumberVisibleState(!1),r.setRotateVisibleState(!1),r.setZoomBtnVisibleState(!0),r.setDeleteBtnVisible(!1),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.$component.toggleClass(this.helper.css.perPageViewerSingle,!0),this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.serviceProvider.viewerService.onViewItemsChange([r]),[4,this.renderDocument(t)];case 1:return i.sent(),this.formComponent.setTotalPages(this.document.totalPages),this.formComponent.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return o.formByDocumentChange(t)})),this.formComponent.resetPages(),this.initialized=!0,this.formComponent.focus(),[2]}}))}))},e.prototype.renderDocument=function(t){return Ua(this,void 0,void 0,(function(){var e,r,n,o;return Ha(this,(function(i){switch(i.label){case 0:return t.rendered?[2,!0]:[4,this.serviceProvider.pdfService.getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)];case 1:return e=i.sent(),r=this.serviceProvider.pdfService.getViewPortInfo(e,t.maxSize),n=r.viewport,t.documentSize=r.documentSize,t.currentSize=r.currentSize,o=t,[4,this.renderZoom$(e,t.destroy$).toPromise()];case 2:return o.zoomImageInfo=i.sent(),t.component.setImage(t.zoomImageInfo.url,Math.round(n.width),Math.round(n.height)),t.component.setPageName(t.storedFile.name),t.rendered=!0,t.component.setRenderingState(!1),this.formComponent.setDisableState(!1),[2,!0]}}))}))},e.prototype.formByDocumentChange=function(t){},e.prototype.initAsPages=function(){var e=this;this.headerComponent.setToggleVisible(!0),t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this),this.viewItems.forEach((function(t){t.component.setIgnoreRenderingOnClick(!0),t.component.setIcon(qt.trash),t.component.setSelected(!1),t.component.toggleIconCss(e.deleteCss.iconDelete,!0)})),this.asDocument=!1,this.pageHandler=new Aa(this.document.totalPages,this.viewItems);var r=new Ra(this.getOnDestroy$(),this.viewItems);r.init(),r.change$.subscribe((function(t){var r=Hr.pagesToValue(t),n=it.asJson(e.value);n.pages=r,e.pageHandler.setPages(t,!0),e.formComponent.setValue(n)}));var n=this.formComponent;n.setTotalPages(this.document.totalPages),n.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onPerPageFormChange(t)}));var o=this.serviceProvider.deletePagesService;o.selectAllPagesChange$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onToggleAllChange(t)})),o.onDocumentRead(this.document.totalPages),n.setDisableState(!1),this.initialized=!0,n.resetPages(),n.setValidPages(!0),o.onSelectAllPagesChange(!1),this.formComponent.focus()},e.prototype.onToggleAllChange=function(t){this.viewItems.forEach((function(e){e.component.setSelected(t)})),t?(this.pageHandler.selectAll(),this.formComponent.setAllPages()):(this.pageHandler.deselectAll(),this.formComponent.resetPages())},e.prototype.onPerPageFormChange=function(t){if(this.formComponent.isDisabled())this.value=it.asJson(t);else{var e=this.value;this.value=it.asJson(t),this.updatePages(t,e),this.checkOrUpdateHeaderState()}},e.prototype.checkOrUpdateHeaderState=function(){var t=this.viewItems.map((function(t){return t.component.isSelected()})).every((function(t){return!!t})),e=this.headerComponent.isSelected();t?this.headerComponent.setSelectState(Fr.selectAll,!1):e&&!t&&this.headerComponent.setSelectState(Fr.deselectAll,!1)},e.prototype.updatePages=function(t,e){e&&t.pages===e.pages||(t.pages||this.headerComponent.setSelectState(Fr.deselectAll),Hr.lastIsSeparator(t.pages)||this.pageHandler.changeValueHandler(t.pages))},e}(ja),Ja=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wa=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},qa=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Za=function(t){function e(e,r){return t.call(this,e,r)||this}return Ja(e,t),Object.defineProperty(e.prototype,"formComponent",{get:function(){return this.footerComponent.getFormComponent()},enumerable:!0,configurable:!0}),e.prototype.initScroll=function(){},e.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?(this.formComponent.allowReset(!1),this.initAsDocument()):(this.formComponent.allowReset(!0),this.initAsPages())},e.prototype.subscribePageItem=function(t){var e=this;t.subscribed||(t.component.zoom$.pipe(R(this.destroyEvent)).subscribe((function(t){return e.onZoom(t)})),t.component.rotate$.pipe(R(this.destroyEvent)).subscribe((function(r){r.itemId===t.fileId&&e.onRotate(r,t)})),t.subscribed=!0)},e.prototype.onRotate=function(e,r,n){void 0===n&&(n=!1),t.prototype.onRotate.call(this,e,r),n||this.savePerPageValue()},e.prototype.renderDocument=function(t){return Wa(this,void 0,void 0,(function(){var e,r,n,o,i;return qa(this,(function(s){switch(s.label){case 0:return t.rendered?[2,!0]:[4,(e=this.serviceProvider.pdfService).getPDFPageLoadingTask(this.document.pdfDocumentProxy,t.initPageNumber)];case 1:return r=s.sent(),n=e.getViewPortInfo(r,t.maxSize),o=n.viewport,t.documentSize=n.documentSize,t.currentSize=n.currentSize,i=t,[4,this.renderZoom$(r,t.destroy$).toPromise()];case 2:return i.zoomImageInfo=s.sent(),t.component.setImage(t.zoomImageInfo.url,Math.round(o.width),Math.round(o.height)),t.component.setPageName(t.storedFile.name),t.rendered=!0,t.component.setRenderingState(!1),this.formComponent.setDisableState(!1),[2,!0]}}))}))},e.prototype.initAsDocument=function(){return Wa(this,void 0,void 0,(function(){var t,e,r,n,o,i,s=this;return qa(this,(function(a){switch(a.label){case 0:return this.asDocument=!0,t=this.document,this.serviceProvider.deletePagesService.onDocumentRead(t.totalPages),e=t.storedFile.guid,(r=new tn(this.ids.viewerContainerId,e)).setViewModelOptions({imageUrl:void 0,useDelete:!1}),n=this.serviceProvider.viewerService.getMinMaxItemValue(),t.component=r,t.viewOrder=1,t.initPageNumber=1,t.maxSize=n.max,this.viewItems=[t],r.init(),r.setRenderingState(!0),r.zoom$.pipe(R(this.destroyEvent),R(t.destroy$)).subscribe((function(t){return s.onZoom(t)})),r.setTotalPages(t.totalPages),r.setPageBoxVisibleState(!0),r.setPageNumberVisibleState(!1),r.setRotateVisibleState(!1),r.setZoomBtnVisibleState(!0),r.setDeleteBtnVisible(!1),this.destroyPending(),this.$component.toggleClass(this.helper.css.displayNone,!1),this.$component.toggleClass(this.helper.css.perPageViewerSingle,!0),this.waitRender=!1,this.scrollLocked=!1,this.waitScroll=!1,this.serviceProvider.viewerService.onViewItemsChange([r]),[4,this.renderDocument(t)];case 1:return a.sent(),o=this.formComponent,i=function(e){if(s.initialized){s.viewItems.forEach((function(t){s.onRotate({direction:e,itemId:t.fileId},t,!0)}));s.saveDucumentValue(t)}},o.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return i(t.direction)})),o.setComponentVisible(!0),o.setDisableState(!1),this.serviceProvider.viewerService.onRunJobDisabledChange(!1),this.initialized=!0,this.saveDucumentValue(t),[2]}}))}))},e.prototype.saveDucumentValue=function(t){var e=t.workFile.options.angle,r={pages:Array.from(Array(t.totalPages),(function(t,e){return e+1})).map((function(t){return{angle:e,page:t}})),pending:!1,valid:!0};this.serviceProvider.toolsConfigService.setFormValue(r)},e.prototype.initAsPages=function(){var e=this;this.asDocument=!1,t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this);var r=this.formComponent,n=function(t){if(e.initialized){e.viewItems.forEach((function(r){e.onRotate({direction:t,itemId:r.fileId},r,!0)}));e.savePerPageValue()}};r.setDisableState(!0),r.change$.pipe(R(this.destroyEvent)).subscribe((function(t){return n(t.direction)})),r.reset$.pipe(R(this.destroyEvent)).subscribe((function(t){return n(Vr.zero)})),this.viewItems.length>1&&r.setComponentVisible(!0),r.setDisableState(!1),this.serviceProvider.viewerService.onRunJobDisabledChange(!1),this.initialized=!0},e.prototype.savePerPageValue=function(){this.serviceProvider.toolsConfigService.setFormValue(this.getPerPageFormValue())},e.prototype.getPerPageFormValue=function(){var t=this;return{pages:this.viewItems.map((function(e){return t.viewItemToDtoItem(e)})),pending:!1,valid:!0}},e.prototype.viewItemToDtoItem=function(t){return{angle:t.workFile.options.angle,page:t.initPageNumber}},e}(ja),Ka=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qa=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.maxPerPagePages=300,n}return Ka(e,t),e.prototype.initScroll=function(){},e.prototype.onDocumentRead=function(){this.document.totalPages>this.maxPerPagePages?this.onPagesOverLimit(this.document.totalPages,this.document.storedFile.name):this.initAsPages()},e.prototype.subscribePageItem=function(e){e.subscribed||t.prototype.subscribePageItem.call(this,e)},e.prototype.onDelete=function(e){this.serviceProvider.viewerService.onRunJobDisabledChange(!1),t.prototype.onDelete.call(this,e)},e.prototype.onRotate=function(e,r){t.prototype.onRotate.call(this,e,r),this.serviceProvider.viewerService.onRunJobDisabledChange(!1)},e.prototype.onPagesOverLimit=function(t,e){this.serviceProvider.errorDialogService.showMaxPagesError(e,this.maxPerPagePages,t).subscribe((function(){})),this.currentState.gotTo(V.destroy)},e.prototype.initAsPages=function(){this.asDocument=!1,t.prototype.initScroll.call(this),t.prototype.onDocumentRead.call(this);var e=this.serviceProvider.Translate.get("Page");this.viewItems.forEach((function(t){var r=e+" "+t.initPageNumber;t.component.setPageName(r)})),this.initSortable(),this.initialized=!0},e.prototype.onBeforeHeaderInit=function(){var t=this;this.headerComponent.hasSortable&&this.headerComponent.sort$.pipe(R(this.destroyEvent)).subscribe((function(e){return t.sort(e)}))},e.prototype.initSortable=function(){var t=this;this.serviceProvider.sortableService.useSortable()&&this.serviceProvider.sortableService.initSortable$(this.helper.getById(this.ids.viewerContainerId),{sort:!0,onStart:function(t){},onEnd:function(e){t.helper.getById(t.ids.viewerContainerId).find(".page-item").each((function(e,r){var n=t.viewItems.find((function(t){return t.fileId===r.id})),o=e+1;n.component.setPageNumber(o),n.viewOrder=o})),t.serviceProvider.viewerService.onRunJobDisabledChange(!1)}}).pipe(R(this.destroyEvent),G((function(t){return!!t}))).subscribe((function(t){}))},e.prototype.sort=function(t){this.serviceProvider.sortableService.sortArray(this.viewItems,(function(t){return t.initPageNumber}),t===ne.asc),this.updateViewCounters(this.viewItems,!1),this.serviceProvider.sortableService.sortDomElementsBySortedItems(this.viewItems,(function(t){return t.fileId}),this.ids.viewerContainerId,".page-item"),this.serviceProvider.viewerService.onRunJobDisabledChange(!1)},e.prototype.onBeforeRunJob=function(){var e={pages:this.viewItems.map((function(t){return{new:t.viewOrder,old:t.initPageNumber,angle:t.workFile.options.angle}})),pending:!1,valid:!0};this.document.workFile.options.rearrange=e,t.prototype.onBeforeRunJob.call(this)},e}(ja),Ya=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xa=function(t){function e(e,r){var n=t.call(this,e,V.pageViewer)||this;if(!r)throw new Error("!inputData");if(!r.data.isViewerOptions)throw new Error("is not isViewerOptions");switch(n.options=r.data,n.serviceProvider.toolsConfigService.getToolConfig().viewerType){case ht.split:n.view=new $a(n.componentId,n);break;case ht.delete:n.view=new Ga(n.componentId,n);break;case ht.rotate:n.view=new Za(n.componentId,n);break;case ht.rearrange:n.view=new Qa(n.componentId,n);break;default:n.view=new ja(n.componentId,n)}return n}return Ya(e,t),Object.defineProperty(e.prototype,"toolsConfigService",{get:function(){return this.serviceProvider.toolsConfigService},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){t.prototype.bindEvents.call(this),this.view.entryOptions=this.options,this.view.init()},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e}(Zi),tc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ec=r(485),rc=r(486),nc=r(487);!function(t){t.default="default",t.expectedError="expectedError"}(ya||(ya={}));var oc=function(t){function e(e,r){var n=t.call(this,e)||this;return n.options=r,n.startOver=new O,n}return tc(e,t),Object.defineProperty(e.prototype,"startOver$",{get:function(){return this.startOver.asObservable().pipe(R(this.destroyEvent))},enumerable:!0,configurable:!0}),e.prototype.createTemplate=function(){return this.model=this.createViewModel(this.options.type),this.setTemplateValuesByModel(ec,this.model)},e.prototype.bind=function(){var t=this;re(this.helper.getById(this.model.btnStartOverId).get(0),"click").pipe(R(this.destroyEvent),Lt(1)).subscribe((function(){t.startOver.next()}))},e.prototype.createViewModel=function(t){switch(t){case ya.expectedError:var e=this.options.translateMessageKey||"";return this.createExpectedModel(e);default:return this.createDefaultModel()}},e.prototype.createDefaultModel=function(){var t=this.serviceProvider.Translate,e=this.getBaseModel();return e.labelReportBug=t.get("component-report-bug"),e.iconBug=qt.bug,e.message=t.get("component-failed-sorry"),e.errUrl=this.serviceProvider.toolsConfigService.getLocalizedUrl("contact-us.html"),e.errUrl+="?bugreport",e.actions=this.setTemplateValuesByModel(rc,e),e},e.prototype.createExpectedModel=function(t){var e=this.serviceProvider.Translate,r=this.getBaseModel(),n=e.get(t);if("expected-error-no-text-found"===t){var o=this.serviceProvider.toolsConfigService.getConfigModel();n=n.replace("%(lang)",o.resourcesRoot+o.lang).replace("%(from)",o.sessionId)}return r.message=n,r.actions=this.setTemplateValuesByModel(nc,r),r},e.prototype.getBaseModel=function(){var t=this.serviceProvider.Translate.get("component-start-over");return{componentId:this.componentId,iconAttention:qt.attention,iconRotate:qt.Rotate,labelStartOver:t,btnStartOverId:z.createQuickGuidAsString(),message:void 0,errUrl:void 0,iconBug:void 0,actions:void 0,labelReportBug:void 0}},e}(Nt),ic=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sc=function(t){function e(e,r){var n=t.call(this,e,V.dropZone)||this;if(n.inputData=r,!r)throw new Error("!inputData");var o=n.getOptions();return n.view=new oc(n.componentId,o),n}return ic(e,t),e.prototype.createTemplate=function(){return t.prototype.createTemplate.call(this,"")},e.prototype.bindEvents=function(){var t=this;this.view.init(),this.view.startOver$.pipe(R(this.destroyEvent)).subscribe((function(){t.serviceProvider.appService.onStartOver(t)}))},e.prototype.onDestroy=function(){this.destroyChildren(["view"]),t.prototype.onDestroy.call(this)},e.prototype.getOptions=function(){var t=this.inputData;if(!t.data)throw new Error("!inputData.data");var e=t.data;if(!e.hasError)throw new Error("!eventData.hasError");var r={type:ya.default};return e.status===Bo.expectedError&&(r.type=ya.expectedError,e.data&&e.data.message&&(r.translateMessageKey=e.data.message)),r},e}(Zi);function ac(t){return"string"!=typeof t?"":t.replace(/\/\//g,"/").replace(/(https?:\/)(?!\/)/,"$1/")}var cc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uc=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},pc=function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},lc=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},fc=function(t){function e(e,r){var n=t.call(this,e,r,V.editViewer)||this;return n.hostCss="edit-wrapper",n.pending=new cs(n.componentId),console.log("EditViewerState",{component:e,inputData:r}),n}return cc(e,t),e.prototype.initComponent=function(){this.initComponentBase()},e.prototype.gotTo=function(e,r){e!==V.pending&&t.prototype.gotTo.call(this,e,r)},e.prototype.createTemplate=function(){return t.prototype.createTemplateBase.call(this," ")},e.prototype.bindEvents=function(){this.pending.init(),t.prototype.bindEvents.call(this)},e.prototype.startListening=function(e){var r=this,n=lc(e.items,1)[0],o=this.pwMap.get(n.guid),i=n.blobUrl;this.serviceProvider.appService.getEditor().then((function(e){return uc(r,void 0,void 0,(function(){var r,s,a,c,u,p,l=this;return pc(this,(function(f){switch(f.label){case 0:return r=this.toolsConfigService.getConfigModel(),s={src:ac(r.resourcesRoot+"/styles.css"),windowName:"candy-js-css",isCss:!0},(a=this.serviceProvider.scriptLoaderService).addScript(s),[4,a.loadLib(s.windowName)];case 1:return f.sent(),c={serviceProvider:this.serviceProvider,createQuickGuidAsString:function(){return z.createGuid().toString()}},u=new e(c,this.componentId,{fileUrl:i,fontFileExt:this.serviceProvider.Translate.getLocale(),password:o,isLibMode:!0,endpoint:r.endpoint,sessionId:r.sessionId}),(p=this.serviceProvider.domHelper.getById(this.componentId)).toggleClass(this.css.host,!1),p.toggleClass(this.hostCss,!0),this.destroyChildren(["pending"]),u.init(),u.onExport$.pipe(R(this.destroyEvent),Lt(1),ti((function(){return u.destroyComponent()}))).subscribe((function(e){return uc(l,void 0,void 0,(function(){var r,o,i,s,a,c;return pc(this,(function(u){switch(u.label){case 0:return r=this.serviceProvider.fileReaderService,[4,fetch(e).then((function(t){return t.blob()})).then((function(t){return t.size}))];case 1:return o=u.sent(),i=r.toMeta({url:e,type:n.type,name:n.name,size:o}),s=new co(i,i.url,0),[4,this.serviceProvider.fileTransferService.download(s).pipe(Lt(1)).toPromise()];case 2:return u.sent(),this.serviceProvider.workFileStoreService.add(s.guid,s),a=[s],c=this.toolsConfigService.getConfigModel(),t.prototype.startListening.call(this,{initUploadTransactionId:this.serviceProvider.fileTransferService.upload(a,c),isViewerOptions:!0,items:a}),[2]}}))}))})),this.setOnBeforeUnloadHandler(u),[2]}}))}))}))},e.prototype.setOnBeforeUnloadHandler=function(t){window.onbeforeunload=function(){if(t&&t.hasChanges instanceof Function)return!t.hasChanges()&&void 0},this.destroyEvent.pipe(Lt(1)).subscribe((function(){window.onbeforeunload=null}))},e}(Ss),dc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hc=function(t){function e(e){var r=t.call(this)||this;return r.config=e,r.rootContainerId=e.rootContainerId,r.type=e.toolName,r}return dc(e,t),Object.defineProperty(e.prototype,"stateName",{get:function(){if(this.state)return this.state.stateName},enumerable:!0,configurable:!0}),e.prototype.initComponent=function(){if(this.destroyed)throw console.error("destroyed",{this:this}),new Error("destroyed");this.gotTo(V.init)},e.prototype.destroyComponent=function(){this.state.destroyComponent(),this.destroyed=!0},e.prototype.gotTo=function(t,e){if(this.stateName!==t){switch(console.info("%c next state:"+t,"color: #00858c"),this.state&&!this.state.isDestroyed()&&this.state.destroyComponent(),t){case V.init:this.state=this.createInitState(e);break;case V.dropZone:this.state=this.createDropZoneState(e);break;case V.limits:this.state=this.createLimitOperationsState(e);break;case V.readFiles:this.state=this.createReadFilesState(e);break;case V.pending:this.state=this.createPendingState(e);break;case V.checkFiles:this.state=this.createCheckFilesState(e);break;case V.selectViewerState:this.state=this.createSelectViewerState(e);break;case V.editViewer:this.state=this.createEditViewerState(e);break;case V.instantViewer:this.state=this.createInstantViewerState(e);break;case V.fileViewer:this.state=this.createFileViewerState(e);break;case V.pageViewer:this.state=this.createPageViewerState(e);break;case V.queueState:this.state=this.createQueueState(e);break;case V.uploadState:this.state=this.createUploadState(e);break;case V.runJobState:this.state=this.createRunJobState(e);break;case V.errorViewer:this.state=this.createErrorViewerState(e);break;case V.destroy:this.state=this.createDestroyState(e);break;default:this.state=this.createInitState(e)}this.state.initComponent()}},e.prototype.getCurrentState=function(){return this.state},e.prototype.setCurrentState=function(t){this.stateName!==t.stateName&&(this.state&&!this.state.isDestroyed()&&this.state.destroyComponent(),this.state=t)},e.prototype.isDestroyed=function(){return this.destroyed},e.prototype.createInitState=function(t){return new Qi(this,t)},e.prototype.createDropZoneState=function(t){return new ps(this,t)},e.prototype.createLimitOperationsState=function(t){return new fs(this,t)},e.prototype.createReadFilesState=function(t){return new hs(this,t)},e.prototype.createPendingState=function(t){return new ys(this,t)},e.prototype.createCheckFilesState=function(t){return new ms(this,t)},e.prototype.createSelectViewerState=function(t){return new ws(this,t)},e.prototype.createEditViewerState=function(t){return new fc(this,t)},e.prototype.createInstantViewerState=function(t){return new Ss(this,t)},e.prototype.createFileViewerState=function(t){return new Oa(this,t)},e.prototype.createPageViewerState=function(t){return new Xa(this,t)},e.prototype.createQueueState=function(t){return new js(this,t)},e.prototype.createUploadState=function(t){return new Ls(this,t)},e.prototype.createRunJobState=function(t){return new Gs(this,t)},e.prototype.createErrorViewerState=function(t){return new sc(this,t)},e.prototype.createDestroyState=function(t){return new Xi(this,t)},e}(Dt),vc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yc=function(t){function e(e){return t.call(this,e)||this}return vc(e,t),e}(hc),gc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mc=function(t){function e(e){var r=t.call(this,e)||this;return r.serviceProvider.appService.startOverCustomHandler=function(t){var n=r.serviceProvider.appService.deps;r.serviceProvider.appService.getApp().rebuild(e,n)},r}return gc(e,t),e.prototype.initComponent=function(){var e=this,r=this.serviceProvider.viewerService,n=this.serviceProvider.mediaService,o=n.isDesktop(),i=function(){var t=r.getMinMaxItemValue(),e=o?300:160;t.max=e,r.setViewItemSize(t.min,t.max)};n.change$.pipe(yn((function(){return!e.destroyed}))).subscribe((function(t){o!==t.isDesktop&&(o=t.isDesktop,i())})),i(),t.prototype.initComponent.call(this)},e}(hc),bc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wc=function(t){function e(e,r){return t.call(this,e,r)||this}return bc(e,t),e.prototype.bindEvents=function(){var e=this.serviceProvider.toolsConfigService.getConfigModel(),r=this.inputData.data.files[0];fa.isImage(r.ext)||(e.maxFilesCount=1),t.prototype.bindEvents.call(this)},e}(ms),_c=function(t){function e(e){var r=t.call(this,e)||this;return r.initMaxFilesCount=e.maxFilesCount,r.serviceProvider.appService.startOverCustomHandler=function(t){var n=r.serviceProvider.appService.deps;e.maxFilesCount=r.initMaxFilesCount,r.serviceProvider.appService.getApp().rebuild(e,n)},r}return bc(e,t),e.prototype.destroyComponent=function(){var e=this.serviceProvider.toolsConfigService.getConfigModel();e.toolName===vt.pdfConverter&&(e.maxFilesCount=this.initMaxFilesCount),t.prototype.destroyComponent.call(this)},e.prototype.createCheckFilesState=function(t){return new wc(this,t)},e}(hc),Sc=function(){function t(){}return t.prototype.create=function(t){var e;switch(t.toolName){case vt.addPdfWatermark:e=new mc(t);break;case vt.pdfConverter:e=new _c(t);break;default:e=new yc(t)}return e},t}(),Pc=function(){function t(){}return t.prototype.protectViewer=function(){t.initialized||($(document).on("dragenter",(function(t){t.preventDefault()})).on("dragover",(function(t){t.preventDefault()})).on("dragleave",(function(t){t.preventDefault()})).on("drop",(function(t){return t.preventDefault(),!1})),t.initialized=!0)},t.initialized=!1,t}();var xc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cc=function(t){function e(e){var r=t.call(this,e)||this;return r.parentId=e,r.css={root:"app-modal",show:"app-modal--show"},r.lastDialogs=[],r.bound=!1,r}return xc(e,t),Object.defineProperty(e.prototype,"modalService",{get:function(){return this.serviceProvider.modalService},enumerable:!0,configurable:!0}),e.prototype.onDestroy=function(){for(;this.lastDialogs.length;)this.lastDialogs.pop().hide();t.prototype.onDestroy.call(this)},e.prototype.bind=function(){var t=this;this.bound||(this.modalService.onChange$.pipe(R(this.destroyEvent)).subscribe((function(e){if(e.show){if(e.show){var r=e.createComponent(t.componentId);t.lastDialogs.push(r),r.init(),r.show(),t.modalService.onComponentCreated(r)}}else{var n=t.lastDialogs.pop();n&&t.modalService.onComponentClose(n)}t.toggleShow(e.show)})),this.modalService.onHide$.pipe(R(this.destroyEvent)).subscribe((function(e){e.hide();var r=t.lastDialogs.findIndex((function(t){return t===e}));t.lastDialogs.splice(r,1),t.lastDialogs.length||t.toggleShow(!1)})),re(this.helper.getById(this.componentId).get(0),"click").pipe(R(this.destroyEvent),G((function(e){var r;return(null===(r=e.target)||void 0===r?void 0:r.id)===t.componentId}))).subscribe((function(){var e,r=t.lastDialogs[t.lastDialogs.length-1];(null===(e=null==r?void 0:r.dialogOptions)||void 0===e?void 0:e.backdrop)&&t.modalService.onComponentClose(r)})),this.bound=!0)},e.prototype.createTemplate=function(){return"<div id="+this.componentId+' class="'+this.css.root+'"></div>'},e.prototype.toggleShow=function(t){this.$component.toggleClass(this.css.show,t);var e=document.documentElement.clientWidth;document.documentElement.style.overflow=t?"hidden":"";var r=document.documentElement.clientWidth;document.documentElement.style.paddingRight=t?Math.abs(r-e)+"px":""},e}(Nt),Oc=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},Ic=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Oc(arguments[e]));return t},Ec=function(){function t(){}return t.prototype.mutate=function(t){if(!t.fileAccept||!t.fileExtensions){var e=["epub","mobi","fb2"];switch(t.toolName){case vt.jpgToPdf:case vt.pngToPdf:case vt.bmpToPdf:case vt.tiffToPdf:t.fileAccept="image/png, image/tiff, image/bmp, image/jpeg, image/jpg, jpeg/jfif",t.fileExtensions=["png","tiff","tif","bmp","jpg","jpeg","jfif"];break;case vt.pdfToJpg:case vt.pdfToPng:case vt.pdfToBmp:case vt.pdfToTiff:case vt.pdfToWord:case vt.pdfToDocx:case vt.pdfToRtf:t.fileAccept="application/pdf, .pdf",t.fileExtensions=["pdf"];break;case vt.compressPdf:case vt.extractText:case vt.extractImages:case vt.pdfOcr:case vt.pdfResize:case vt.protectPdf:case vt.editMetadataPdf:case vt.addPdfPageNumbers:case vt.addPdfHeaderAndFooter:case vt.addPdfWatermark:case vt.cropPdf:case vt.splitPdf:case vt.deletePdf:case vt.rotatePdf:case vt.unlockPdf:case vt.rearrangePdf:case vt.editPdf:t.fileAccept="application/pdf, .pdf",t.fileExtensions=["pdf"];break;case vt.mergePdf:t.fileAccept="application/pdf, image/png, image/tiff, image/bmp, image/jpeg, image/jpg, image/gif, jpeg/jfif, .jfif, .pdf, .bmp, .jpg, .jpeg, .png, .tiff, .tif, .gif",t.fileExtensions=["pdf","bmp","jpg","jpeg","png","tiff","tif","jfif","gif"];break;case vt.wordToPdf:t.fileAccept=".odt,.doc,.docx,.rtf,.xml,application/msword,application/vnd.oasis.opendocument.text,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/rtf",t.fileExtensions=["doc","docx","odt","rtf"];break;case vt.excelToPdf:t.fileAccept=".ods,.xls,.xlsx,.xml,application/vnd.oasis.opendocument.spreadsheet,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",t.fileExtensions=["xls","xlsx","ods"];break;case vt.docxToPdf:t.fileAccept="application/msword, application/vnd.oasis.opendocument.text, application/vnd.openxmlformats-officedocument.wordprocessingml.document,.doc,.docx,.odt",t.fileExtensions=["doc","docx","odt"];break;case vt.rtfToPdf:t.fileAccept="application/rtf, application/msword, application/vnd.oasis.opendocument.text, application/vnd.openxmlformats-officedocument.wordprocessingml.document,.doc,.docx,.odt,.rtf",t.fileExtensions=["doc","docx","odt","rtf"];break;case vt.odtToPdf:t.fileAccept="application/vnd.oasis.opendocument.text,.odt",t.fileExtensions=["odt"];break;case vt.pptToPdf:t.fileAccept="application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation,.ppt,.pptx",t.fileExtensions=["ppt","pptx"];break;case vt.htmlToPdf:t.fileAccept="text/html,.html,.htm",t.fileExtensions=["html","htm"];break;case vt.xmlToPdf:t.fileAccept="application/xml, text/xml,.xml",t.fileExtensions=["xml"];break;case vt.txtToPdf:t.fileAccept="text/plain,.txt,.text",t.fileExtensions=["txt","text"];break;case vt.chmToPdf:t.fileAccept="application/x-chm,.chm",t.fileExtensions=["chm"];break;case vt.djvuToPdf:t.fileAccept="image/vnd.djvu,.djvu,.djv",t.fileExtensions=["djvu","djv"];break;case vt.epubToPdf:case vt.fb2ToPdf:case vt.mobiToPdf:t.fileAccept=".epub,.mobi,.fb2",t.fileExtensions=e;break;case vt.pdfConverter:var r=Ic(["djvu","djv"],e),n=Ic(["pdf"],["bmp","jpg","jpeg","png","tiff","tif","jfif","gif"],["doc","docx","odt","rtf","xls","xlsx","ods","ppt","pptx"],r,["html","htm","xml","txt","text","chm"]);t.fileAccept=["application/pdf","image/png","image/tiff","image/bmp","image/jpeg","image/jpg","image/gif","jpeg/jfif","application/msword","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/rtf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/html","text/plain","application/xml","text/xml","application/x-chm","image/vnd.djvu"].join(",")+","+n.map((function(t){return"."+t})).join(","),t.fileExtensions=n,t.maxFilesCount=1}}},t}(),kc=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tc=function(t){function e(e){return t.call(this,e)||this}return kc(e,t),e.prototype.bind=function(){var t=this,e=this.serviceProvider.toolsConfigService.getConfigModel(),r=!1,n=this.$input.off("change").on("change",(function(e){r=!1,e.target.files&&(t.serviceProvider.inputService.dropFiles(e.target.files),n.val(""))})).off("click").on("click",(function(t){if(t.isDefaultPrevented())return!1;r=!0})).focus((function(t){})).attr("accept",e.fileAccept);this.serviceProvider.toolsConfigService.allowMultipleFiles()&&n.attr("multiple",""),this.serviceProvider.inputService.acceptChange$.pipe(R(this.destroyEvent)).subscribe((function(e){t.$input.attr("accept",e)})),this.serviceProvider.inputService.selectFileClick$.pipe(R(this.destroyEvent),G((function(t){return!r&&t===Xt.device})),ge((function(){n.click(),setTimeout((function(){return r=!1}),1e3)}))).subscribe()},e.prototype.createTemplate=function(){return'<input id="'+this.componentId+'" type="file" class="'+this.helper.css.displayNone+'" />'},Object.defineProperty(e.prototype,"$input",{get:function(){return this.helper.getById(this.componentId)},enumerable:!0,configurable:!0}),e}(Nt),jc=function(){function t(){}return t.prototype.intercept=function(t,e,r){if(t.setRequestHeader("Authorization","Bearer "+r.token),r.isDevelopmentMode){if(!(e.data&&e.data.get instanceof Function))return;var n=e.data.get("payload");if(n){var o=JSON.parse(n);console.log("AuthInterceptor:ajaxSetup:beforeSend:payloadData",o)}}},t}(),Dc=function(){function t(){}return t.prototype.intercept=function(t,e,r){!r.isDevelopmentMode||e.data&&e.data instanceof FormData&&e.data.get instanceof Function&&e.data.get("method")},t.prototype.getParseError=function(){return""},t.prototype.getEmptyDataError=function(){return null},t.prototype.getNoImagesError=function(){return{expectedError:"expected-error-no-images-found"}},t.prototype.getNoTextError=function(){return{expectedError:"expected-error-no-text-found"}},t.prototype.getOcrNoTextError=function(){return{expectedError:"expected-error-ocr-no-text"}},t.prototype.getErroredError=function(){return{status:Bo.errored}},t.prototype.getNotImplementedError=function(){return{error:"not_implemented"}},t}();r(488).init();var Mc=function(){function t(){console.log("CandyApp Started, version: "+ci.a),this.serviceInjector=kt.start((function(t){return e=t,r={type:Ct.object,value:e},n={type:Ct.service,value:qi},e.registrate("ScriptLoaderService",Ho,[]),e.registrate("DomHelper",U,[]),e.registrate("TranslateService",Ot,[]),e.registrate("WorkFileStoreService",go,[]),e.registrate("StateService",ao,[]),e.registrate("DropZoneDocumentProtectorService",Pc,[]),e.registrate("ModalService",po,[]),e.registrate("InterceptorService",Ui,[]),e.registrate("WebSocketService",zo,[]),e.registrate("FileRenderService",Xo,[]),e.registrate("MediaService",ft,[]),e.registrate("InputService",xi,[]),e.registrate("ViewerService",Ei,[]),e.registrate("FormValuesService",Wi,[]),e.registrate("ServiceProvider",qi,[r]),e.registrate("FileTransferService",$o,[n]),e.registrate("ToolsConfigService",eo,[n]),e.registrate("FileMetaDataService",Oi,[n]),e.registrate("FileReaderService",uo,[n]),e.registrate("GoogleAnalyticSenderService",li,[n]),e.registrate("LocalPickerService",si,[n]),e.registrate("GDrivePickerService",_i,[n]),e.registrate("DropboxPickerService",Pi,[n]),e.registrate("PickerHandlerService",Ci,[n]),e.registrate("FileConverterService",Yo,[n]),e.registrate("JobService",Uo,[n]),e.registrate("PdfService",Qo,[n]),e.registrate("SortableService",ai,[n]),e.registrate("ErrorDialogService",bi,[n]),e.registrate("PasswordDialogService",Ni,[n]),e.registrate("ToolOptionService",Ii,[n]),e.registrate("SplitService",ki,[n]),e.registrate("DeletePagesService",$i,[n]),e.registrate("RotatePagesService",zi,[n]),e.registrate("AppService",Hi,[n]),e.registrate("LimitOperationsService",Gi,[n]),void e.registrate("LimitOperationsStatisticService",Ji,[n]);var e,r,n})),this.serviceProvider=this.serviceInjector.get(qi),this.serviceInjector.get(Pc).protectViewer(),this.serviceProvider.appService.setApp(this),window.debugApp=this}return t.prototype.createWidget=function(t,e,r){if(void 0===r&&(r=!1),t.webSocket=void 0,this.serviceProvider.appService.deps=e,t.rootContainerId=t.selector.split("#").pop(),r&&(new Ec).mutate(t),this.widget)this.rebuild(t,e);else{var n=$("#"+t.rootContainerId).addClass("candy-app").addClass("tool--"+t.toolName).toggleClass("ssr",!1).html("");this.initInfrastructure(t,e),this.initMedia(n),this.initModal(t),this.serviceProvider.toolsConfigService.useEditor()&&this.serviceProvider.appService.getEditor(),this.initWidget(t)}},t.prototype.rebuild=function(t,e){this.widget&&(this.widget.destroyComponent(),this.widget=null),$("#"+t.rootContainerId).removeAttr("class"),this.serviceInjector.get(Ui).reset(),this.createWidget(t,e)},t.prototype.initSentry=function(){var t="Sentry",e=function(t){t.init({dsn:"https://b6b56055f6d244e1a7f9a634448b4bec@sentry.io/1857965"})},r=function(t){console.warn("no sentry",{e:t})};window[t]?e(window[t]):this.serviceInjector.get(Ho).loadLib(t).then((function(t){t?e(t):r("scriptLoader:lib was not loaded")}),(function(t){return r(t)}))},t.prototype.initInfrastructure=function(t,e){this.serviceProvider.Translate.setTranslates(t.lang,t.translates),qt.initToolIcons("/"),this.checkPlatform();var r=[new jc];t.isDevelopmentMode&&r.push(new Dc),this.serviceInjector.get(Ui).init(t,r),this.serviceProvider.toolsConfigService.setConfigModel(t);var n=this.serviceProvider.scriptLoaderService;e||(e=n.createDefaultLibs()),n.init(e),this.inputComponent&&this.inputComponent.destroyComponent(),this.inputComponent=new Tc(t.rootContainerId),this.inputComponent.init()},t.prototype.initMedia=function(t){var e=this.serviceProvider.mediaService;e.change$.subscribe((function(r){var n=e.css,o=Object.values(n);t.removeClass(o);var i=e.isMobileByWidth(),s=e.isTabletByWidth(),a=r.isDesktopByWidth;switch(!0){case a:t.addClass(n.isDesktop);break;case i:t.addClass(n.isMobile);break;case s:t.addClass(n.isTablet)}console.info("media.change$",{e:r,css:n,isMobile:i,isTablet:s,isDesktop:a})})),e.init()},t.prototype.initModal=function(t){this.modalRef&&(this.modalRef.destroyComponent(),this.modalRef=null),this.modalRef=new Cc(t.rootContainerId),this.modalRef.init()},t.prototype.initWidget=function(t){var e=new Sc;this.widget=e.create(t),this.widget.initComponent()},t.prototype.checkPlatform=function(){navigator.platform.toLowerCase().indexOf("win")>-1&&$("body").addClass("platform-windows")},t}()}]);
//# sourceMappingURL=bundle.js.map